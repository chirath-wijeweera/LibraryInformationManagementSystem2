<html>
<head>
<title>select2.full.js</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #808080;}
.s1 { color: #a9b7c6;}
.s2 { color: #cc7832;}
.s3 { color: #6a8759;}
.s4 { color: #629755; font-style: italic;}
.s5 { color: #629755; font-weight: bold; font-style: italic;}
.s6 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
select2.full.js</font>
</center></td></tr></table>
<pre><span class="s0">/*! 
 * Select2 4.0.13 
 * https://select2.github.io 
 * 
 * Released under the MIT license 
 * https://github.com/select2/select2/blob/master/LICENSE.md 
 */</span>
<span class="s2">;</span><span class="s1">(</span><span class="s2">function </span><span class="s1">(factory) {</span>
  <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">define === </span><span class="s3">'function' </span><span class="s1">&amp;&amp; define.amd) {</span>
    <span class="s0">// AMD. Register as an anonymous module.</span>
    <span class="s1">define([</span><span class="s3">'jquery'</span><span class="s1">]</span><span class="s2">, </span><span class="s1">factory)</span><span class="s2">;</span>
  <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">module === </span><span class="s3">'object' </span><span class="s1">&amp;&amp; module.exports) {</span>
    <span class="s0">// Node/CommonJS</span>
    <span class="s1">module.exports = </span><span class="s2">function </span><span class="s1">(root</span><span class="s2">, </span><span class="s1">jQuery) {</span>
      <span class="s2">if </span><span class="s1">(jQuery === undefined) {</span>
        <span class="s0">// require('jQuery') returns a factory that requires window to</span>
        <span class="s0">// build a jQuery instance, we normalize how we use modules</span>
        <span class="s0">// that require this pattern but the window provided is a noop</span>
        <span class="s0">// if it's defined (how jquery works)</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">window !== </span><span class="s3">'undefined'</span><span class="s1">) {</span>
          <span class="s1">jQuery = require(</span><span class="s3">'jquery'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span>
        <span class="s2">else </span><span class="s1">{</span>
          <span class="s1">jQuery = require(</span><span class="s3">'jquery'</span><span class="s1">)(root)</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
      <span class="s1">factory(jQuery)</span><span class="s2">;</span>
      <span class="s2">return </span><span class="s1">jQuery</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">;</span>
  <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
    <span class="s0">// Browser globals</span>
    <span class="s1">factory(jQuery)</span><span class="s2">;</span>
  <span class="s1">}</span>
<span class="s1">} (</span><span class="s2">function </span><span class="s1">(jQuery) {</span>
  <span class="s0">// This is needed so we can catch the AMD loader configuration and use it</span>
  <span class="s0">// The inner file should be wrapped (by `banner.start.js`) in a function that</span>
  <span class="s0">// returns the AMD loader references.</span>
  <span class="s2">var </span><span class="s1">S2 =(</span><span class="s2">function </span><span class="s1">() {</span>
  <span class="s0">// Restore the Select2 AMD loader so it can be used</span>
  <span class="s0">// Needed mostly in the language files, where the loader is not inserted</span>
  <span class="s2">if </span><span class="s1">(jQuery &amp;&amp; jQuery.fn &amp;&amp; jQuery.fn.select2 &amp;&amp; jQuery.fn.select2.amd) {</span>
    <span class="s2">var </span><span class="s1">S2 = jQuery.fn.select2.amd</span><span class="s2">;</span>
  <span class="s1">}</span>
<span class="s2">var </span><span class="s1">S2</span><span class="s2">;</span><span class="s1">(</span><span class="s2">function </span><span class="s1">() { </span><span class="s2">if </span><span class="s1">(!S2 || !S2.requirejs) {</span>
<span class="s2">if </span><span class="s1">(!S2) { S2 = {}</span><span class="s2">; </span><span class="s1">} </span><span class="s2">else </span><span class="s1">{ require = S2</span><span class="s2">; </span><span class="s1">}</span>
<span class="s4">/**</span>
 <span class="s4">* </span><span class="s5">@license </span><span class="s4">almond 0.3.3 Copyright jQuery Foundation and other contributors.</span>
 <span class="s4">* Released under MIT license, http://github.com/requirejs/almond/LICENSE</span>
 <span class="s4">*/</span>
<span class="s0">//Going sloppy to avoid 'use strict' string cost, but strict practices should</span>
<span class="s0">//be followed.</span>
<span class="s0">/*global setTimeout: false */</span>

<span class="s2">var </span><span class="s1">requirejs</span><span class="s2">, </span><span class="s1">require</span><span class="s2">, </span><span class="s1">define</span><span class="s2">;</span>
<span class="s1">(</span><span class="s2">function </span><span class="s1">(undef) {</span>
    <span class="s2">var </span><span class="s1">main</span><span class="s2">, </span><span class="s1">req</span><span class="s2">, </span><span class="s1">makeMap</span><span class="s2">, </span><span class="s1">handlers</span><span class="s2">,</span>
        <span class="s1">defined = {}</span><span class="s2">,</span>
        <span class="s1">waiting = {}</span><span class="s2">,</span>
        <span class="s1">config = {}</span><span class="s2">,</span>
        <span class="s1">defining = {}</span><span class="s2">,</span>
        <span class="s1">hasOwn = Object.prototype.hasOwnProperty</span><span class="s2">,</span>
        <span class="s1">aps = [].slice</span><span class="s2">,</span>
        <span class="s1">jsSuffixRegExp = </span><span class="s6">/\.js$/</span><span class="s2">;</span>

    <span class="s2">function </span><span class="s1">hasProp(obj</span><span class="s2">, </span><span class="s1">prop) {</span>
        <span class="s2">return </span><span class="s1">hasOwn.call(obj</span><span class="s2">, </span><span class="s1">prop)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s4">/**</span>
     <span class="s4">* Given a relative module name, like ./something, normalize it to</span>
     <span class="s4">* a real name that can be mapped to a path.</span>
     <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} name the relative name</span>
     <span class="s4">* </span><span class="s5">@param </span><span class="s4">{String} baseName a real name that the name arg is relative</span>
     <span class="s4">* to.</span>
     <span class="s4">* </span><span class="s5">@returns </span><span class="s4">{String} normalized name</span>
     <span class="s4">*/</span>
    <span class="s2">function </span><span class="s1">normalize(name</span><span class="s2">, </span><span class="s1">baseName) {</span>
        <span class="s2">var </span><span class="s1">nameParts</span><span class="s2">, </span><span class="s1">nameSegment</span><span class="s2">, </span><span class="s1">mapValue</span><span class="s2">, </span><span class="s1">foundMap</span><span class="s2">, </span><span class="s1">lastIndex</span><span class="s2">,</span>
            <span class="s1">foundI</span><span class="s2">, </span><span class="s1">foundStarMap</span><span class="s2">, </span><span class="s1">starI</span><span class="s2">, </span><span class="s1">i</span><span class="s2">, </span><span class="s1">j</span><span class="s2">, </span><span class="s1">part</span><span class="s2">, </span><span class="s1">normalizedBaseParts</span><span class="s2">,</span>
            <span class="s1">baseParts = baseName &amp;&amp; baseName.split(</span><span class="s3">&quot;/&quot;</span><span class="s1">)</span><span class="s2">,</span>
            <span class="s1">map = config.map</span><span class="s2">,</span>
            <span class="s1">starMap = (map &amp;&amp; map[</span><span class="s3">'*'</span><span class="s1">]) || {}</span><span class="s2">;</span>

        <span class="s0">//Adjust any relative paths.</span>
        <span class="s2">if </span><span class="s1">(name) {</span>
            <span class="s1">name = name.split(</span><span class="s3">'/'</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">lastIndex = name.length - </span><span class="s6">1</span><span class="s2">;</span>

            <span class="s0">// If wanting node ID compatibility, strip .js from end</span>
            <span class="s0">// of IDs. Have to do this here, and not in nameToUrl</span>
            <span class="s0">// because node allows either .js or non .js to map</span>
            <span class="s0">// to same file.</span>
            <span class="s2">if </span><span class="s1">(config.nodeIdCompat &amp;&amp; jsSuffixRegExp.test(name[lastIndex])) {</span>
                <span class="s1">name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp</span><span class="s2">, </span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">}</span>

            <span class="s0">// Starts with a '.' so need the baseName</span>
            <span class="s2">if </span><span class="s1">(name[</span><span class="s6">0</span><span class="s1">].charAt(</span><span class="s6">0</span><span class="s1">) === </span><span class="s3">'.' </span><span class="s1">&amp;&amp; baseParts) {</span>
                <span class="s0">//Convert baseName to array, and lop off the last part,</span>
                <span class="s0">//so that . matches that 'directory' and not name of the baseName's</span>
                <span class="s0">//module. For instance, baseName of 'one/two/three', maps to</span>
                <span class="s0">//'one/two/three.js', but we want the directory, 'one/two' for</span>
                <span class="s0">//this normalization.</span>
                <span class="s1">normalizedBaseParts = baseParts.slice(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">baseParts.length - </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">name = normalizedBaseParts.concat(name)</span><span class="s2">;</span>
            <span class="s1">}</span>

            <span class="s0">//start trimDots</span>
            <span class="s2">for </span><span class="s1">(i = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">i &lt; name.length</span><span class="s2">; </span><span class="s1">i++) {</span>
                <span class="s1">part = name[i]</span><span class="s2">;</span>
                <span class="s2">if </span><span class="s1">(part === </span><span class="s3">'.'</span><span class="s1">) {</span>
                    <span class="s1">name.splice(i</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>
                    <span class="s1">i -= </span><span class="s6">1</span><span class="s2">;</span>
                <span class="s1">} </span><span class="s2">else if </span><span class="s1">(part === </span><span class="s3">'..'</span><span class="s1">) {</span>
                    <span class="s0">// If at the start, or previous value is still ..,</span>
                    <span class="s0">// keep them so that when converted to a path it may</span>
                    <span class="s0">// still work when converted to a path, even though</span>
                    <span class="s0">// as an ID it is less than ideal. In larger point</span>
                    <span class="s0">// releases, may be better to just kick out an error.</span>
                    <span class="s2">if </span><span class="s1">(i === </span><span class="s6">0 </span><span class="s1">|| (i === </span><span class="s6">1 </span><span class="s1">&amp;&amp; name[</span><span class="s6">2</span><span class="s1">] === </span><span class="s3">'..'</span><span class="s1">) || name[i - </span><span class="s6">1</span><span class="s1">] === </span><span class="s3">'..'</span><span class="s1">) {</span>
                        <span class="s2">continue;</span>
                    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(i &gt; </span><span class="s6">0</span><span class="s1">) {</span>
                        <span class="s1">name.splice(i - </span><span class="s6">1</span><span class="s2">, </span><span class="s6">2</span><span class="s1">)</span><span class="s2">;</span>
                        <span class="s1">i -= </span><span class="s6">2</span><span class="s2">;</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
            <span class="s0">//end trimDots</span>

            <span class="s1">name = name.join(</span><span class="s3">'/'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">//Apply map config if available.</span>
        <span class="s2">if </span><span class="s1">((baseParts || starMap) &amp;&amp; map) {</span>
            <span class="s1">nameParts = name.split(</span><span class="s3">'/'</span><span class="s1">)</span><span class="s2">;</span>

            <span class="s2">for </span><span class="s1">(i = nameParts.length</span><span class="s2">; </span><span class="s1">i &gt; </span><span class="s6">0</span><span class="s2">; </span><span class="s1">i -= </span><span class="s6">1</span><span class="s1">) {</span>
                <span class="s1">nameSegment = nameParts.slice(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">i).join(</span><span class="s3">&quot;/&quot;</span><span class="s1">)</span><span class="s2">;</span>

                <span class="s2">if </span><span class="s1">(baseParts) {</span>
                    <span class="s0">//Find the longest baseName segment match in the config.</span>
                    <span class="s0">//So, do joins on the biggest to smallest lengths of baseParts.</span>
                    <span class="s2">for </span><span class="s1">(j = baseParts.length</span><span class="s2">; </span><span class="s1">j &gt; </span><span class="s6">0</span><span class="s2">; </span><span class="s1">j -= </span><span class="s6">1</span><span class="s1">) {</span>
                        <span class="s1">mapValue = map[baseParts.slice(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">j).join(</span><span class="s3">'/'</span><span class="s1">)]</span><span class="s2">;</span>

                        <span class="s0">//baseName segment has  config, find if it has one for</span>
                        <span class="s0">//this name.</span>
                        <span class="s2">if </span><span class="s1">(mapValue) {</span>
                            <span class="s1">mapValue = mapValue[nameSegment]</span><span class="s2">;</span>
                            <span class="s2">if </span><span class="s1">(mapValue) {</span>
                                <span class="s0">//Match, update name to the new value.</span>
                                <span class="s1">foundMap = mapValue</span><span class="s2">;</span>
                                <span class="s1">foundI = i</span><span class="s2">;</span>
                                <span class="s2">break;</span>
                            <span class="s1">}</span>
                        <span class="s1">}</span>
                    <span class="s1">}</span>
                <span class="s1">}</span>

                <span class="s2">if </span><span class="s1">(foundMap) {</span>
                    <span class="s2">break;</span>
                <span class="s1">}</span>

                <span class="s0">//Check for a star map match, but just hold on to it,</span>
                <span class="s0">//if there is a shorter segment match later in a matching</span>
                <span class="s0">//config, then favor over this star map.</span>
                <span class="s2">if </span><span class="s1">(!foundStarMap &amp;&amp; starMap &amp;&amp; starMap[nameSegment]) {</span>
                    <span class="s1">foundStarMap = starMap[nameSegment]</span><span class="s2">;</span>
                    <span class="s1">starI = i</span><span class="s2">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>

            <span class="s2">if </span><span class="s1">(!foundMap &amp;&amp; foundStarMap) {</span>
                <span class="s1">foundMap = foundStarMap</span><span class="s2">;</span>
                <span class="s1">foundI = starI</span><span class="s2">;</span>
            <span class="s1">}</span>

            <span class="s2">if </span><span class="s1">(foundMap) {</span>
                <span class="s1">nameParts.splice(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">foundI</span><span class="s2">, </span><span class="s1">foundMap)</span><span class="s2">;</span>
                <span class="s1">name = nameParts.join(</span><span class="s3">'/'</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s2">return </span><span class="s1">name</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">makeRequire(relName</span><span class="s2">, </span><span class="s1">forceSync) {</span>
        <span class="s2">return function </span><span class="s1">() {</span>
            <span class="s0">//A version of a require function that passes a moduleName</span>
            <span class="s0">//value for items that may need to</span>
            <span class="s0">//look up paths relative to the moduleName</span>
            <span class="s2">var </span><span class="s1">args = aps.call(arguments</span><span class="s2">, </span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>

            <span class="s0">//If first arg is not require('string'), and there is only</span>
            <span class="s0">//one arg, it is the array form without a callback. Insert</span>
            <span class="s0">//a null so that the following concat is correct.</span>
            <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">args[</span><span class="s6">0</span><span class="s1">] !== </span><span class="s3">'string' </span><span class="s1">&amp;&amp; args.length === </span><span class="s6">1</span><span class="s1">) {</span>
                <span class="s1">args.push(</span><span class="s2">null</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">}</span>
            <span class="s2">return </span><span class="s1">req.apply(undef</span><span class="s2">, </span><span class="s1">args.concat([relName</span><span class="s2">, </span><span class="s1">forceSync]))</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">makeNormalize(relName) {</span>
        <span class="s2">return function </span><span class="s1">(name) {</span>
            <span class="s2">return </span><span class="s1">normalize(name</span><span class="s2">, </span><span class="s1">relName)</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">makeLoad(depName) {</span>
        <span class="s2">return function </span><span class="s1">(value) {</span>
            <span class="s1">defined[depName] = value</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">callDep(name) {</span>
        <span class="s2">if </span><span class="s1">(hasProp(waiting</span><span class="s2">, </span><span class="s1">name)) {</span>
            <span class="s2">var </span><span class="s1">args = waiting[name]</span><span class="s2">;</span>
            <span class="s2">delete </span><span class="s1">waiting[name]</span><span class="s2">;</span>
            <span class="s1">defining[name] = </span><span class="s2">true;</span>
            <span class="s1">main.apply(undef</span><span class="s2">, </span><span class="s1">args)</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(!hasProp(defined</span><span class="s2">, </span><span class="s1">name) &amp;&amp; !hasProp(defining</span><span class="s2">, </span><span class="s1">name)) {</span>
            <span class="s2">throw new </span><span class="s1">Error(</span><span class="s3">'No ' </span><span class="s1">+ name)</span><span class="s2">;</span>
        <span class="s1">}</span>
        <span class="s2">return </span><span class="s1">defined[name]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s0">//Turns a plugin!resource to [plugin, resource]</span>
    <span class="s0">//with the plugin being undefined if the name</span>
    <span class="s0">//did not have a plugin prefix.</span>
    <span class="s2">function </span><span class="s1">splitPrefix(name) {</span>
        <span class="s2">var </span><span class="s1">prefix</span><span class="s2">,</span>
            <span class="s1">index = name ? name.indexOf(</span><span class="s3">'!'</span><span class="s1">) : -</span><span class="s6">1</span><span class="s2">;</span>
        <span class="s2">if </span><span class="s1">(index &gt; -</span><span class="s6">1</span><span class="s1">) {</span>
            <span class="s1">prefix = name.substring(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">index)</span><span class="s2">;</span>
            <span class="s1">name = name.substring(index + </span><span class="s6">1</span><span class="s2">, </span><span class="s1">name.length)</span><span class="s2">;</span>
        <span class="s1">}</span>
        <span class="s2">return </span><span class="s1">[prefix</span><span class="s2">, </span><span class="s1">name]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s0">//Creates a parts array for a relName where first part is plugin ID,</span>
    <span class="s0">//second part is resource ID. Assumes relName has already been normalized.</span>
    <span class="s2">function </span><span class="s1">makeRelParts(relName) {</span>
        <span class="s2">return </span><span class="s1">relName ? splitPrefix(relName) : []</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s4">/**</span>
     <span class="s4">* Makes a name map, normalizing the name, and using a plugin</span>
     <span class="s4">* for normalization if necessary. Grabs a ref to plugin</span>
     <span class="s4">* too, as an optimization.</span>
     <span class="s4">*/</span>
    <span class="s1">makeMap = </span><span class="s2">function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">relParts) {</span>
        <span class="s2">var </span><span class="s1">plugin</span><span class="s2">,</span>
            <span class="s1">parts = splitPrefix(name)</span><span class="s2">,</span>
            <span class="s1">prefix = parts[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">,</span>
            <span class="s1">relResourceName = relParts[</span><span class="s6">1</span><span class="s1">]</span><span class="s2">;</span>

        <span class="s1">name = parts[</span><span class="s6">1</span><span class="s1">]</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(prefix) {</span>
            <span class="s1">prefix = normalize(prefix</span><span class="s2">, </span><span class="s1">relResourceName)</span><span class="s2">;</span>
            <span class="s1">plugin = callDep(prefix)</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">//Normalize according</span>
        <span class="s2">if </span><span class="s1">(prefix) {</span>
            <span class="s2">if </span><span class="s1">(plugin &amp;&amp; plugin.normalize) {</span>
                <span class="s1">name = plugin.normalize(name</span><span class="s2">, </span><span class="s1">makeNormalize(relResourceName))</span><span class="s2">;</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s1">name = normalize(name</span><span class="s2">, </span><span class="s1">relResourceName)</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
            <span class="s1">name = normalize(name</span><span class="s2">, </span><span class="s1">relResourceName)</span><span class="s2">;</span>
            <span class="s1">parts = splitPrefix(name)</span><span class="s2">;</span>
            <span class="s1">prefix = parts[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">;</span>
            <span class="s1">name = parts[</span><span class="s6">1</span><span class="s1">]</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">(prefix) {</span>
                <span class="s1">plugin = callDep(prefix)</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s0">//Using ridiculous property names for space reasons</span>
        <span class="s2">return </span><span class="s1">{</span>
            <span class="s1">f: prefix ? prefix + </span><span class="s3">'!' </span><span class="s1">+ name : name</span><span class="s2">, </span><span class="s0">//fullName</span>
            <span class="s1">n: name</span><span class="s2">,</span>
            <span class="s1">pr: prefix</span><span class="s2">,</span>
            <span class="s1">p: plugin</span>
        <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">function </span><span class="s1">makeConfig(name) {</span>
        <span class="s2">return function </span><span class="s1">() {</span>
            <span class="s2">return </span><span class="s1">(config &amp;&amp; config.config &amp;&amp; config.config[name]) || {}</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">handlers = {</span>
        <span class="s1">require: </span><span class="s2">function </span><span class="s1">(name) {</span>
            <span class="s2">return </span><span class="s1">makeRequire(name)</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">,</span>
        <span class="s1">exports: </span><span class="s2">function </span><span class="s1">(name) {</span>
            <span class="s2">var </span><span class="s1">e = defined[name]</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">e !== </span><span class="s3">'undefined'</span><span class="s1">) {</span>
                <span class="s2">return </span><span class="s1">e</span><span class="s2">;</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s2">return </span><span class="s1">(defined[name] = {})</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span><span class="s2">,</span>
        <span class="s1">module: </span><span class="s2">function </span><span class="s1">(name) {</span>
            <span class="s2">return </span><span class="s1">{</span>
                <span class="s1">id: name</span><span class="s2">,</span>
                <span class="s1">uri: </span><span class="s3">''</span><span class="s2">,</span>
                <span class="s1">exports: defined[name]</span><span class="s2">,</span>
                <span class="s1">config: makeConfig(name)</span>
            <span class="s1">}</span><span class="s2">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s1">main = </span><span class="s2">function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">deps</span><span class="s2">, </span><span class="s1">callback</span><span class="s2">, </span><span class="s1">relName) {</span>
        <span class="s2">var </span><span class="s1">cjsModule</span><span class="s2">, </span><span class="s1">depName</span><span class="s2">, </span><span class="s1">ret</span><span class="s2">, </span><span class="s1">map</span><span class="s2">, </span><span class="s1">i</span><span class="s2">, </span><span class="s1">relParts</span><span class="s2">,</span>
            <span class="s1">args = []</span><span class="s2">,</span>
            <span class="s1">callbackType = </span><span class="s2">typeof </span><span class="s1">callback</span><span class="s2">,</span>
            <span class="s1">usingExports</span><span class="s2">;</span>

        <span class="s0">//Use name if no relName</span>
        <span class="s1">relName = relName || name</span><span class="s2">;</span>
        <span class="s1">relParts = makeRelParts(relName)</span><span class="s2">;</span>

        <span class="s0">//Call the callback to define the module, if necessary.</span>
        <span class="s2">if </span><span class="s1">(callbackType === </span><span class="s3">'undefined' </span><span class="s1">|| callbackType === </span><span class="s3">'function'</span><span class="s1">) {</span>
            <span class="s0">//Pull out the defined dependencies and pass the ordered</span>
            <span class="s0">//values to the callback.</span>
            <span class="s0">//Default to [require, exports, module] if no deps</span>
            <span class="s1">deps = !deps.length &amp;&amp; callback.length ? [</span><span class="s3">'require'</span><span class="s2">, </span><span class="s3">'exports'</span><span class="s2">, </span><span class="s3">'module'</span><span class="s1">] : deps</span><span class="s2">;</span>
            <span class="s2">for </span><span class="s1">(i = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">i &lt; deps.length</span><span class="s2">; </span><span class="s1">i += </span><span class="s6">1</span><span class="s1">) {</span>
                <span class="s1">map = makeMap(deps[i]</span><span class="s2">, </span><span class="s1">relParts)</span><span class="s2">;</span>
                <span class="s1">depName = map.f</span><span class="s2">;</span>

                <span class="s0">//Fast path CommonJS standard dependencies.</span>
                <span class="s2">if </span><span class="s1">(depName === </span><span class="s3">&quot;require&quot;</span><span class="s1">) {</span>
                    <span class="s1">args[i] = handlers.require(name)</span><span class="s2">;</span>
                <span class="s1">} </span><span class="s2">else if </span><span class="s1">(depName === </span><span class="s3">&quot;exports&quot;</span><span class="s1">) {</span>
                    <span class="s0">//CommonJS module spec 1.1</span>
                    <span class="s1">args[i] = handlers.exports(name)</span><span class="s2">;</span>
                    <span class="s1">usingExports = </span><span class="s2">true;</span>
                <span class="s1">} </span><span class="s2">else if </span><span class="s1">(depName === </span><span class="s3">&quot;module&quot;</span><span class="s1">) {</span>
                    <span class="s0">//CommonJS module spec 1.1</span>
                    <span class="s1">cjsModule = args[i] = handlers.module(name)</span><span class="s2">;</span>
                <span class="s1">} </span><span class="s2">else if </span><span class="s1">(hasProp(defined</span><span class="s2">, </span><span class="s1">depName) ||</span>
                           <span class="s1">hasProp(waiting</span><span class="s2">, </span><span class="s1">depName) ||</span>
                           <span class="s1">hasProp(defining</span><span class="s2">, </span><span class="s1">depName)) {</span>
                    <span class="s1">args[i] = callDep(depName)</span><span class="s2">;</span>
                <span class="s1">} </span><span class="s2">else if </span><span class="s1">(map.p) {</span>
                    <span class="s1">map.p.load(map.n</span><span class="s2">, </span><span class="s1">makeRequire(relName</span><span class="s2">, true</span><span class="s1">)</span><span class="s2">, </span><span class="s1">makeLoad(depName)</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
                    <span class="s1">args[i] = defined[depName]</span><span class="s2">;</span>
                <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                    <span class="s2">throw new </span><span class="s1">Error(name + </span><span class="s3">' missing ' </span><span class="s1">+ depName)</span><span class="s2">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>

            <span class="s1">ret = callback ? callback.apply(defined[name]</span><span class="s2">, </span><span class="s1">args) : undefined</span><span class="s2">;</span>

            <span class="s2">if </span><span class="s1">(name) {</span>
                <span class="s0">//If setting exports via &quot;module&quot; is in play,</span>
                <span class="s0">//favor that over return value and exports. After that,</span>
                <span class="s0">//favor a non-undefined return value over exports use.</span>
                <span class="s2">if </span><span class="s1">(cjsModule &amp;&amp; cjsModule.exports !== undef &amp;&amp;</span>
                        <span class="s1">cjsModule.exports !== defined[name]) {</span>
                    <span class="s1">defined[name] = cjsModule.exports</span><span class="s2">;</span>
                <span class="s1">} </span><span class="s2">else if </span><span class="s1">(ret !== undef || !usingExports) {</span>
                    <span class="s0">//Use the return value from the function.</span>
                    <span class="s1">defined[name] = ret</span><span class="s2">;</span>
                <span class="s1">}</span>
            <span class="s1">}</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(name) {</span>
            <span class="s0">//May just be an object definition for the module. Only</span>
            <span class="s0">//worry about defining if have a module name.</span>
            <span class="s1">defined[name] = callback</span><span class="s2">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s1">requirejs = require = req = </span><span class="s2">function </span><span class="s1">(deps</span><span class="s2">, </span><span class="s1">callback</span><span class="s2">, </span><span class="s1">relName</span><span class="s2">, </span><span class="s1">forceSync</span><span class="s2">, </span><span class="s1">alt) {</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">deps === </span><span class="s3">&quot;string&quot;</span><span class="s1">) {</span>
            <span class="s2">if </span><span class="s1">(handlers[deps]) {</span>
                <span class="s0">//callback in this case is really relName</span>
                <span class="s2">return </span><span class="s1">handlers[deps](callback)</span><span class="s2">;</span>
            <span class="s1">}</span>
            <span class="s0">//Just return the module wanted. In this scenario, the</span>
            <span class="s0">//deps arg is the module name, and second arg (if passed)</span>
            <span class="s0">//is just the relName.</span>
            <span class="s0">//Normalize module name, if it contains . or ..</span>
            <span class="s2">return </span><span class="s1">callDep(makeMap(deps</span><span class="s2">, </span><span class="s1">makeRelParts(callback)).f)</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(!deps.splice) {</span>
            <span class="s0">//deps is a config object, not an array.</span>
            <span class="s1">config = deps</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">(config.deps) {</span>
                <span class="s1">req(config.deps</span><span class="s2">, </span><span class="s1">config.callback)</span><span class="s2">;</span>
            <span class="s1">}</span>
            <span class="s2">if </span><span class="s1">(!callback) {</span>
                <span class="s2">return;</span>
            <span class="s1">}</span>

            <span class="s2">if </span><span class="s1">(callback.splice) {</span>
                <span class="s0">//callback is an array, which means it is a dependency list.</span>
                <span class="s0">//Adjust args if there are dependencies</span>
                <span class="s1">deps = callback</span><span class="s2">;</span>
                <span class="s1">callback = relName</span><span class="s2">;</span>
                <span class="s1">relName = </span><span class="s2">null;</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s1">deps = undef</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s0">//Support require(['a'])</span>
        <span class="s1">callback = callback || </span><span class="s2">function </span><span class="s1">() {}</span><span class="s2">;</span>

        <span class="s0">//If relName is a function, it is an errback handler,</span>
        <span class="s0">//so remove it.</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">relName === </span><span class="s3">'function'</span><span class="s1">) {</span>
            <span class="s1">relName = forceSync</span><span class="s2">;</span>
            <span class="s1">forceSync = alt</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">//Simulate async callback;</span>
        <span class="s2">if </span><span class="s1">(forceSync) {</span>
            <span class="s1">main(undef</span><span class="s2">, </span><span class="s1">deps</span><span class="s2">, </span><span class="s1">callback</span><span class="s2">, </span><span class="s1">relName)</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
            <span class="s0">//Using a non-zero value because of concern for what old browsers</span>
            <span class="s0">//do, and latest browsers &quot;upgrade&quot; to 4 if lower value is used:</span>
            <span class="s0">//http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:</span>
            <span class="s0">//If want a value immediately, use require('id') instead -- something</span>
            <span class="s0">//that works in almond on the global level, but not guaranteed and</span>
            <span class="s0">//unlikely to work in other AMD implementations.</span>
            <span class="s1">setTimeout(</span><span class="s2">function </span><span class="s1">() {</span>
                <span class="s1">main(undef</span><span class="s2">, </span><span class="s1">deps</span><span class="s2">, </span><span class="s1">callback</span><span class="s2">, </span><span class="s1">relName)</span><span class="s2">;</span>
            <span class="s1">}</span><span class="s2">, </span><span class="s6">4</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s2">return </span><span class="s1">req</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s4">/**</span>
     <span class="s4">* Just drops the config on the floor, but returns req in case</span>
     <span class="s4">* the config return value is used.</span>
     <span class="s4">*/</span>
    <span class="s1">req.config = </span><span class="s2">function </span><span class="s1">(cfg) {</span>
        <span class="s2">return </span><span class="s1">req(cfg)</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s4">/**</span>
     <span class="s4">* Expose module registry for debugging and tooling</span>
     <span class="s4">*/</span>
    <span class="s1">requirejs._defined = defined</span><span class="s2">;</span>

    <span class="s1">define = </span><span class="s2">function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">deps</span><span class="s2">, </span><span class="s1">callback) {</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">name !== </span><span class="s3">'string'</span><span class="s1">) {</span>
            <span class="s2">throw new </span><span class="s1">Error(</span><span class="s3">'See almond README: incorrect module build, no module name'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">//This module may not have dependencies</span>
        <span class="s2">if </span><span class="s1">(!deps.splice) {</span>
            <span class="s0">//deps is not an array, so probably means</span>
            <span class="s0">//an object literal or factory function for</span>
            <span class="s0">//the value. Adjust args.</span>
            <span class="s1">callback = deps</span><span class="s2">;</span>
            <span class="s1">deps = []</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(!hasProp(defined</span><span class="s2">, </span><span class="s1">name) &amp;&amp; !hasProp(waiting</span><span class="s2">, </span><span class="s1">name)) {</span>
            <span class="s1">waiting[name] = [name</span><span class="s2">, </span><span class="s1">deps</span><span class="s2">, </span><span class="s1">callback]</span><span class="s2">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s1">define.amd = {</span>
        <span class="s1">jQuery: </span><span class="s2">true</span>
    <span class="s1">}</span><span class="s2">;</span>
<span class="s1">}())</span><span class="s2">;</span>

<span class="s1">S2.requirejs = requirejs</span><span class="s2">;</span><span class="s1">S2.require = require</span><span class="s2">;</span><span class="s1">S2.define = define</span><span class="s2">;</span>
<span class="s1">}</span>
<span class="s1">}())</span><span class="s2">;</span>
<span class="s1">S2.define(</span><span class="s3">&quot;almond&quot;</span><span class="s2">, function</span><span class="s1">(){})</span><span class="s2">;</span>

<span class="s0">/* global jQuery:false, $:false */</span>
<span class="s1">S2.define(</span><span class="s3">'jquery'</span><span class="s2">,</span><span class="s1">[]</span><span class="s2">,function </span><span class="s1">() {</span>
  <span class="s2">var </span><span class="s1">_$ = jQuery || $</span><span class="s2">;</span>

  <span class="s2">if </span><span class="s1">(_$ == </span><span class="s2">null </span><span class="s1">&amp;&amp; console &amp;&amp; console.error) {</span>
    <span class="s1">console.error(</span>
      <span class="s3">'Select2: An instance of jQuery or a jQuery-compatible library was not ' </span><span class="s1">+</span>
      <span class="s3">'found. Make sure that you are including jQuery before Select2 on your ' </span><span class="s1">+</span>
      <span class="s3">'web page.'</span>
    <span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s1">_$</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/utils'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">var </span><span class="s1">Utils = {}</span><span class="s2">;</span>

  <span class="s1">Utils.Extend = </span><span class="s2">function </span><span class="s1">(ChildClass</span><span class="s2">, </span><span class="s1">SuperClass) {</span>
    <span class="s2">var </span><span class="s1">__hasProp = {}.hasOwnProperty</span><span class="s2">;</span>

    <span class="s2">function </span><span class="s1">BaseConstructor () {</span>
      <span class="s2">this</span><span class="s1">.constructor = ChildClass</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">key </span><span class="s2">in </span><span class="s1">SuperClass) {</span>
      <span class="s2">if </span><span class="s1">(__hasProp.call(SuperClass</span><span class="s2">, </span><span class="s1">key)) {</span>
        <span class="s1">ChildClass[key] = SuperClass[key]</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s1">BaseConstructor.prototype = SuperClass.prototype</span><span class="s2">;</span>
    <span class="s1">ChildClass.prototype = </span><span class="s2">new </span><span class="s1">BaseConstructor()</span><span class="s2">;</span>
    <span class="s1">ChildClass.__super__ = SuperClass.prototype</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">ChildClass</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">function </span><span class="s1">getMethods (theClass) {</span>
    <span class="s2">var </span><span class="s1">proto = theClass.prototype</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">methods = []</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">methodName </span><span class="s2">in </span><span class="s1">proto) {</span>
      <span class="s2">var </span><span class="s1">m = proto[methodName]</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">m !== </span><span class="s3">'function'</span><span class="s1">) {</span>
        <span class="s2">continue;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(methodName === </span><span class="s3">'constructor'</span><span class="s1">) {</span>
        <span class="s2">continue;</span>
      <span class="s1">}</span>

      <span class="s1">methods.push(methodName)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">methods</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Decorate = </span><span class="s2">function </span><span class="s1">(SuperClass</span><span class="s2">, </span><span class="s1">DecoratorClass) {</span>
    <span class="s2">var </span><span class="s1">decoratedMethods = getMethods(DecoratorClass)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">superMethods = getMethods(SuperClass)</span><span class="s2">;</span>

    <span class="s2">function </span><span class="s1">DecoratedClass () {</span>
      <span class="s2">var </span><span class="s1">unshift = Array.prototype.unshift</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">argCount = DecoratorClass.prototype.constructor.length</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">calledConstructor = SuperClass.prototype.constructor</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(argCount &gt; </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">unshift.call(arguments</span><span class="s2">, </span><span class="s1">SuperClass.prototype.constructor)</span><span class="s2">;</span>

        <span class="s1">calledConstructor = DecoratorClass.prototype.constructor</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">calledConstructor.apply(</span><span class="s2">this, </span><span class="s1">arguments)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">DecoratorClass.displayName = SuperClass.displayName</span><span class="s2">;</span>

    <span class="s2">function </span><span class="s1">ctr () {</span>
      <span class="s2">this</span><span class="s1">.constructor = DecoratedClass</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">DecoratedClass.prototype = </span><span class="s2">new </span><span class="s1">ctr()</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">m = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">m &lt; superMethods.length</span><span class="s2">; </span><span class="s1">m++) {</span>
      <span class="s2">var </span><span class="s1">superMethod = superMethods[m]</span><span class="s2">;</span>

      <span class="s1">DecoratedClass.prototype[superMethod] =</span>
        <span class="s1">SuperClass.prototype[superMethod]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">calledMethod = </span><span class="s2">function </span><span class="s1">(methodName) {</span>
      <span class="s0">// Stub out the original method if it's not decorating an actual method</span>
      <span class="s2">var </span><span class="s1">originalMethod = </span><span class="s2">function </span><span class="s1">() {}</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(methodName </span><span class="s2">in </span><span class="s1">DecoratedClass.prototype) {</span>
        <span class="s1">originalMethod = DecoratedClass.prototype[methodName]</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">decoratedMethod = DecoratorClass.prototype[methodName]</span><span class="s2">;</span>

      <span class="s2">return function </span><span class="s1">() {</span>
        <span class="s2">var </span><span class="s1">unshift = Array.prototype.unshift</span><span class="s2">;</span>

        <span class="s1">unshift.call(arguments</span><span class="s2">, </span><span class="s1">originalMethod)</span><span class="s2">;</span>

        <span class="s2">return </span><span class="s1">decoratedMethod.apply(</span><span class="s2">this, </span><span class="s1">arguments)</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; decoratedMethods.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s2">var </span><span class="s1">decoratedMethod = decoratedMethods[d]</span><span class="s2">;</span>

      <span class="s1">DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">DecoratedClass</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">var </span><span class="s1">Observable = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.listeners = {}</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Observable.prototype.on = </span><span class="s2">function </span><span class="s1">(event</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">this</span><span class="s1">.listeners = </span><span class="s2">this</span><span class="s1">.listeners || {}</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(event </span><span class="s2">in this</span><span class="s1">.listeners) {</span>
      <span class="s2">this</span><span class="s1">.listeners[event].push(callback)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">this</span><span class="s1">.listeners[event] = [callback]</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Observable.prototype.trigger = </span><span class="s2">function </span><span class="s1">(event) {</span>
    <span class="s2">var </span><span class="s1">slice = Array.prototype.slice</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">params = slice.call(arguments</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.listeners = </span><span class="s2">this</span><span class="s1">.listeners || {}</span><span class="s2">;</span>

    <span class="s0">// Params should always come in as an array</span>
    <span class="s2">if </span><span class="s1">(params == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">params = []</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s0">// If there are no arguments to the event, use a temporary object</span>
    <span class="s2">if </span><span class="s1">(params.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s1">params.push({})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s0">// Set the `_type` of the first object to the event</span>
    <span class="s1">params[</span><span class="s6">0</span><span class="s1">]._type = event</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(event </span><span class="s2">in this</span><span class="s1">.listeners) {</span>
      <span class="s2">this</span><span class="s1">.invoke(</span><span class="s2">this</span><span class="s1">.listeners[event]</span><span class="s2">, </span><span class="s1">slice.call(arguments</span><span class="s2">, </span><span class="s6">1</span><span class="s1">))</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s3">'*' </span><span class="s2">in this</span><span class="s1">.listeners) {</span>
      <span class="s2">this</span><span class="s1">.invoke(</span><span class="s2">this</span><span class="s1">.listeners[</span><span class="s3">'*'</span><span class="s1">]</span><span class="s2">, </span><span class="s1">arguments)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Observable.prototype.invoke = </span><span class="s2">function </span><span class="s1">(listeners</span><span class="s2">, </span><span class="s1">params) {</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">i = </span><span class="s6">0</span><span class="s2">, </span><span class="s1">len = listeners.length</span><span class="s2">; </span><span class="s1">i &lt; len</span><span class="s2">; </span><span class="s1">i++) {</span>
      <span class="s1">listeners[i].apply(</span><span class="s2">this, </span><span class="s1">params)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.Observable = Observable</span><span class="s2">;</span>

  <span class="s1">Utils.generateChars = </span><span class="s2">function </span><span class="s1">(length) {</span>
    <span class="s2">var </span><span class="s1">chars = </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">i = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">i &lt; length</span><span class="s2">; </span><span class="s1">i++) {</span>
      <span class="s2">var </span><span class="s1">randomChar = Math.floor(Math.random() * </span><span class="s6">36</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">chars += randomChar.toString(</span><span class="s6">36</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">chars</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.bind = </span><span class="s2">function </span><span class="s1">(func</span><span class="s2">, </span><span class="s1">context) {</span>
    <span class="s2">return function </span><span class="s1">() {</span>
      <span class="s1">func.apply(context</span><span class="s2">, </span><span class="s1">arguments)</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils._convertData = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">originalKey </span><span class="s2">in </span><span class="s1">data) {</span>
      <span class="s2">var </span><span class="s1">keys = originalKey.split(</span><span class="s3">'-'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">dataLevel = data</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(keys.length === </span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">continue;</span>
      <span class="s1">}</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">k = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">k &lt; keys.length</span><span class="s2">; </span><span class="s1">k++) {</span>
        <span class="s2">var </span><span class="s1">key = keys[k]</span><span class="s2">;</span>

        <span class="s0">// Lowercase the first letter</span>
        <span class="s0">// By default, dash-separated becomes camelCase</span>
        <span class="s1">key = key.substring(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">1</span><span class="s1">).toLowerCase() + key.substring(</span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(!(key </span><span class="s2">in </span><span class="s1">dataLevel)) {</span>
          <span class="s1">dataLevel[key] = {}</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(k == keys.length - </span><span class="s6">1</span><span class="s1">) {</span>
          <span class="s1">dataLevel[key] = data[originalKey]</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s1">dataLevel = dataLevel[key]</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">delete </span><span class="s1">data[originalKey]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">data</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.hasScroll = </span><span class="s2">function </span><span class="s1">(index</span><span class="s2">, </span><span class="s1">el) {</span>
    <span class="s0">// Adapted from the function created by @ShadowScripter</span>
    <span class="s0">// and adapted by @BillBarry on the Stack Exchange Code Review website.</span>
    <span class="s0">// The original code can be found at</span>
    <span class="s0">// http://codereview.stackexchange.com/q/13338</span>
    <span class="s0">// and was designed to be used with the Sizzle selector engine.</span>

    <span class="s2">var </span><span class="s1">$el = $(el)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">overflowX = el.style.overflowX</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">overflowY = el.style.overflowY</span><span class="s2">;</span>

    <span class="s0">//Check both x and y declarations</span>
    <span class="s2">if </span><span class="s1">(overflowX === overflowY &amp;&amp;</span>
        <span class="s1">(overflowY === </span><span class="s3">'hidden' </span><span class="s1">|| overflowY === </span><span class="s3">'visible'</span><span class="s1">)) {</span>
      <span class="s2">return false;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(overflowX === </span><span class="s3">'scroll' </span><span class="s1">|| overflowY === </span><span class="s3">'scroll'</span><span class="s1">) {</span>
      <span class="s2">return true;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">($el.innerHeight() &lt; el.scrollHeight ||</span>
      <span class="s1">$el.innerWidth() &lt; el.scrollWidth)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.escapeMarkup = </span><span class="s2">function </span><span class="s1">(markup) {</span>
    <span class="s2">var </span><span class="s1">replaceMap = {</span>
      <span class="s3">'</span><span class="s2">\\</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'&amp;#92;'</span><span class="s2">,</span>
      <span class="s3">'&amp;'</span><span class="s1">: </span><span class="s3">'&amp;amp;'</span><span class="s2">,</span>
      <span class="s3">'&lt;'</span><span class="s1">: </span><span class="s3">'&amp;lt;'</span><span class="s2">,</span>
      <span class="s3">'&gt;'</span><span class="s1">: </span><span class="s3">'&amp;gt;'</span><span class="s2">,</span>
      <span class="s3">'&quot;'</span><span class="s1">: </span><span class="s3">'&amp;quot;'</span><span class="s2">,</span>
      <span class="s3">'</span><span class="s2">\'</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'&amp;#39;'</span><span class="s2">,</span>
      <span class="s3">'/'</span><span class="s1">: </span><span class="s3">'&amp;#47;'</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s0">// Do not try to escape the markup if it's not a string</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">markup !== </span><span class="s3">'string'</span><span class="s1">) {</span>
      <span class="s2">return </span><span class="s1">markup</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">String(markup).replace(</span><span class="s6">/[&amp;&lt;&gt;&quot;'\/\\]/g</span><span class="s2">, function </span><span class="s1">(match) {</span>
      <span class="s2">return </span><span class="s1">replaceMap[match]</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s0">// Append an array of jQuery nodes to a given element.</span>
  <span class="s1">Utils.appendMany = </span><span class="s2">function </span><span class="s1">($element</span><span class="s2">, </span><span class="s1">$nodes) {</span>
    <span class="s0">// jQuery 1.7.x does not support $.fn.append() with an array</span>
    <span class="s0">// Fall back to a jQuery object collection using $.fn.add()</span>
    <span class="s2">if </span><span class="s1">($.fn.jquery.substr(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">3</span><span class="s1">) === </span><span class="s3">'1.7'</span><span class="s1">) {</span>
      <span class="s2">var </span><span class="s1">$jqNodes = $()</span><span class="s2">;</span>

      <span class="s1">$.map($nodes</span><span class="s2">, function </span><span class="s1">(node) {</span>
        <span class="s1">$jqNodes = $jqNodes.add(node)</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s1">$nodes = $jqNodes</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">$element.append($nodes)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s0">// Cache objects in Utils.__cache instead of $.data (see #4346)</span>
  <span class="s1">Utils.__cache = {}</span><span class="s2">;</span>

  <span class="s2">var </span><span class="s1">id = </span><span class="s6">0</span><span class="s2">;</span>
  <span class="s1">Utils.GetUniqueElementId = </span><span class="s2">function </span><span class="s1">(element) {</span>
    <span class="s0">// Get a unique element Id. If element has no id,</span>
    <span class="s0">// creates a new unique number, stores it in the id</span>
    <span class="s0">// attribute and returns the new id.</span>
    <span class="s0">// If an id already exists, it simply returns it.</span>

    <span class="s2">var </span><span class="s1">select2Id = element.getAttribute(</span><span class="s3">'data-select2-id'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(select2Id == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s0">// If element has id, use it.</span>
      <span class="s2">if </span><span class="s1">(element.id) {</span>
        <span class="s1">select2Id = element.id</span><span class="s2">;</span>
        <span class="s1">element.setAttribute(</span><span class="s3">'data-select2-id'</span><span class="s2">, </span><span class="s1">select2Id)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">element.setAttribute(</span><span class="s3">'data-select2-id'</span><span class="s2">, </span><span class="s1">++id)</span><span class="s2">;</span>
        <span class="s1">select2Id = id.toString()</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">select2Id</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.StoreData = </span><span class="s2">function </span><span class="s1">(element</span><span class="s2">, </span><span class="s1">name</span><span class="s2">, </span><span class="s1">value) {</span>
    <span class="s0">// Stores an item in the cache for a specified element.</span>
    <span class="s0">// name is the cache key.</span>
    <span class="s2">var </span><span class="s1">id = Utils.GetUniqueElementId(element)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(!Utils.__cache[id]) {</span>
      <span class="s1">Utils.__cache[id] = {}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">Utils.__cache[id][name] = value</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.GetData = </span><span class="s2">function </span><span class="s1">(element</span><span class="s2">, </span><span class="s1">name) {</span>
    <span class="s0">// Retrieves a value from the cache by its key (name)</span>
    <span class="s0">// name is optional. If no name specified, return</span>
    <span class="s0">// all cache items for the specified element.</span>
    <span class="s0">// and for a specified element.</span>
    <span class="s2">var </span><span class="s1">id = Utils.GetUniqueElementId(element)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(name) {</span>
      <span class="s2">if </span><span class="s1">(Utils.__cache[id]) {</span>
        <span class="s2">if </span><span class="s1">(Utils.__cache[id][name] != </span><span class="s2">null</span><span class="s1">) {</span>
          <span class="s2">return </span><span class="s1">Utils.__cache[id][name]</span><span class="s2">;</span>
        <span class="s1">}</span>
        <span class="s2">return </span><span class="s1">$(element).data(name)</span><span class="s2">; </span><span class="s0">// Fallback to HTML5 data attribs.</span>
      <span class="s1">}</span>
      <span class="s2">return </span><span class="s1">$(element).data(name)</span><span class="s2">; </span><span class="s0">// Fallback to HTML5 data attribs.</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">return </span><span class="s1">Utils.__cache[id]</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.RemoveData = </span><span class="s2">function </span><span class="s1">(element) {</span>
    <span class="s0">// Removes all cached items for a specified element.</span>
    <span class="s2">var </span><span class="s1">id = Utils.GetUniqueElementId(element)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(Utils.__cache[id] != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">delete </span><span class="s1">Utils.__cache[id]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">element.removeAttribute(</span><span class="s3">'data-select2-id'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Utils</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/results'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">Results ($element</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">dataAdapter) {</span>
    <span class="s2">this</span><span class="s1">.$element = $element</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.data = dataAdapter</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.options = options</span><span class="s2">;</span>

    <span class="s1">Results.__super__.constructor.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(Results</span><span class="s2">, </span><span class="s1">Utils.Observable)</span><span class="s2">;</span>

  <span class="s1">Results.prototype.render = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$results = $(</span>
      <span class="s3">'&lt;ul class=&quot;select2-results__options&quot; role=&quot;listbox&quot;&gt;&lt;/ul&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'multiple'</span><span class="s1">)) {</span>
      <span class="s1">$results.attr(</span><span class="s3">'aria-multiselectable'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$results = $results</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$results</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.clear = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.$results.empty()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.displayMessage = </span><span class="s2">function </span><span class="s1">(params) {</span>
    <span class="s2">var </span><span class="s1">escapeMarkup = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'escapeMarkup'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.clear()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.hideLoading()</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$message = $(</span>
      <span class="s3">'&lt;li role=&quot;alert&quot; aria-live=&quot;assertive&quot;' </span><span class="s1">+</span>
      <span class="s3">' class=&quot;select2-results__option&quot;&gt;&lt;/li&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">message = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'translations'</span><span class="s1">).get(params.message)</span><span class="s2">;</span>

    <span class="s1">$message.append(</span>
      <span class="s1">escapeMarkup(</span>
        <span class="s1">message(params.args)</span>
      <span class="s1">)</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$message[</span><span class="s6">0</span><span class="s1">].className += </span><span class="s3">' select2-results__message'</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$results.append($message)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.hideMessages = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.$results.find(</span><span class="s3">'.select2-results__message'</span><span class="s1">).remove()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.append = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">this</span><span class="s1">.hideLoading()</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$options = []</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(data.results == </span><span class="s2">null </span><span class="s1">|| data.results.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$results.children().length === </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'results:message'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">message: </span><span class="s3">'noResults'</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s1">data.results = </span><span class="s2">this</span><span class="s1">.sort(data.results)</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; data.results.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s2">var </span><span class="s1">item = data.results[d]</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$option = </span><span class="s2">this</span><span class="s1">.option(item)</span><span class="s2">;</span>

      <span class="s1">$options.push($option)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$results.append($options)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.position = </span><span class="s2">function </span><span class="s1">($results</span><span class="s2">, </span><span class="s1">$dropdown) {</span>
    <span class="s2">var </span><span class="s1">$resultsContainer = $dropdown.find(</span><span class="s3">'.select2-results'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$resultsContainer.append($results)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.sort = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">var </span><span class="s1">sorter = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'sorter'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">sorter(data)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.highlightFirstItem = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$options = </span><span class="s2">this</span><span class="s1">.$results</span>
      <span class="s1">.find(</span><span class="s3">'.select2-results__option[aria-selected]'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$selected = $options.filter(</span><span class="s3">'[aria-selected=true]'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s0">// Check if there are any selected options</span>
    <span class="s2">if </span><span class="s1">($selected.length &gt; </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s0">// If there are selected options, highlight the first</span>
      <span class="s1">$selected.first().trigger(</span><span class="s3">'mouseenter'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s0">// If there are no selected options, highlight the first option</span>
      <span class="s0">// in the dropdown</span>
      <span class="s1">$options.first().trigger(</span><span class="s3">'mouseenter'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.ensureHighlightVisible()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.setClasses = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.data.current(</span><span class="s2">function </span><span class="s1">(selected) {</span>
      <span class="s2">var </span><span class="s1">selectedIds = $.map(selected</span><span class="s2">, function </span><span class="s1">(s) {</span>
        <span class="s2">return </span><span class="s1">s.id.toString()</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$options = self.$results</span>
        <span class="s1">.find(</span><span class="s3">'.select2-results__option[aria-selected]'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">$options.each(</span><span class="s2">function </span><span class="s1">() {</span>
        <span class="s2">var </span><span class="s1">$option = $(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">item = Utils.GetData(</span><span class="s2">this, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s0">// id needs to be converted to a string when comparing</span>
        <span class="s2">var </span><span class="s1">id = </span><span class="s3">'' </span><span class="s1">+ item.id</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">((item.element != </span><span class="s2">null </span><span class="s1">&amp;&amp; item.element.selected) ||</span>
            <span class="s1">(item.element == </span><span class="s2">null </span><span class="s1">&amp;&amp; $.inArray(id</span><span class="s2">, </span><span class="s1">selectedIds) &gt; -</span><span class="s6">1</span><span class="s1">)) {</span>
          <span class="s1">$option.attr(</span><span class="s3">'aria-selected'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
          <span class="s1">$option.attr(</span><span class="s3">'aria-selected'</span><span class="s2">, </span><span class="s3">'false'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.showLoading = </span><span class="s2">function </span><span class="s1">(params) {</span>
    <span class="s2">this</span><span class="s1">.hideLoading()</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">loadingMore = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'translations'</span><span class="s1">).get(</span><span class="s3">'searching'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">loading = {</span>
      <span class="s1">disabled: </span><span class="s2">true,</span>
      <span class="s1">loading: </span><span class="s2">true,</span>
      <span class="s1">text: loadingMore(params)</span>
    <span class="s1">}</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">$loading = </span><span class="s2">this</span><span class="s1">.option(loading)</span><span class="s2">;</span>
    <span class="s1">$loading.className += </span><span class="s3">' loading-results'</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$results.prepend($loading)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.hideLoading = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.$results.find(</span><span class="s3">'.loading-results'</span><span class="s1">).remove()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.option = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">var </span><span class="s1">option = document.createElement(</span><span class="s3">'li'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">option.className = </span><span class="s3">'select2-results__option'</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">attrs = {</span>
      <span class="s3">'role'</span><span class="s1">: </span><span class="s3">'option'</span><span class="s2">,</span>
      <span class="s3">'aria-selected'</span><span class="s1">: </span><span class="s3">'false'</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">matches = window.Element.prototype.matches ||</span>
      <span class="s1">window.Element.prototype.msMatchesSelector ||</span>
      <span class="s1">window.Element.prototype.webkitMatchesSelector</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">((data.element != </span><span class="s2">null </span><span class="s1">&amp;&amp; matches.call(data.element</span><span class="s2">, </span><span class="s3">':disabled'</span><span class="s1">)) ||</span>
        <span class="s1">(data.element == </span><span class="s2">null </span><span class="s1">&amp;&amp; data.disabled)) {</span>
      <span class="s2">delete </span><span class="s1">attrs[</span><span class="s3">'aria-selected'</span><span class="s1">]</span><span class="s2">;</span>
      <span class="s1">attrs[</span><span class="s3">'aria-disabled'</span><span class="s1">] = </span><span class="s3">'true'</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.id == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">delete </span><span class="s1">attrs[</span><span class="s3">'aria-selected'</span><span class="s1">]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data._resultId != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">option.id = data._resultId</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.title) {</span>
      <span class="s1">option.title = data.title</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.children) {</span>
      <span class="s1">attrs.role = </span><span class="s3">'group'</span><span class="s2">;</span>
      <span class="s1">attrs[</span><span class="s3">'aria-label'</span><span class="s1">] = data.text</span><span class="s2">;</span>
      <span class="s2">delete </span><span class="s1">attrs[</span><span class="s3">'aria-selected'</span><span class="s1">]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">attr </span><span class="s2">in </span><span class="s1">attrs) {</span>
      <span class="s2">var </span><span class="s1">val = attrs[attr]</span><span class="s2">;</span>

      <span class="s1">option.setAttribute(attr</span><span class="s2">, </span><span class="s1">val)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.children) {</span>
      <span class="s2">var </span><span class="s1">$option = $(option)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">label = document.createElement(</span><span class="s3">'strong'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">label.className = </span><span class="s3">'select2-results__group'</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$label = $(label)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.template(data</span><span class="s2">, </span><span class="s1">label)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$children = []</span><span class="s2">;</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">c = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">c &lt; data.children.length</span><span class="s2">; </span><span class="s1">c++) {</span>
        <span class="s2">var </span><span class="s1">child = data.children[c]</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">$child = </span><span class="s2">this</span><span class="s1">.option(child)</span><span class="s2">;</span>

        <span class="s1">$children.push($child)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">$childrenContainer = $(</span><span class="s3">'&lt;ul&gt;&lt;/ul&gt;'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s3">'class'</span><span class="s1">: </span><span class="s3">'select2-results__options select2-results__options--nested'</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s1">$childrenContainer.append($children)</span><span class="s2">;</span>

      <span class="s1">$option.append(label)</span><span class="s2">;</span>
      <span class="s1">$option.append($childrenContainer)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">this</span><span class="s1">.template(data</span><span class="s2">, </span><span class="s1">option)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">Utils.StoreData(option</span><span class="s2">, </span><span class="s3">'data'</span><span class="s2">, </span><span class="s1">data)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">option</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.bind = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">var </span><span class="s1">id = container.id + </span><span class="s3">'-results'</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$results.attr(</span><span class="s3">'id'</span><span class="s2">, </span><span class="s1">id)</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:all'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.clear()</span><span class="s2">;</span>
      <span class="s1">self.append(params.data)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(container.isOpen()) {</span>
        <span class="s1">self.setClasses()</span><span class="s2">;</span>
        <span class="s1">self.highlightFirstItem()</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:append'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.append(params.data)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(container.isOpen()) {</span>
        <span class="s1">self.setClasses()</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'query'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.hideMessages()</span><span class="s2">;</span>
      <span class="s1">self.showLoading(params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'select'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s2">if </span><span class="s1">(!container.isOpen()) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">self.setClasses()</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(self.options.get(</span><span class="s3">'scrollAfterSelect'</span><span class="s1">)) {</span>
        <span class="s1">self.highlightFirstItem()</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'unselect'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s2">if </span><span class="s1">(!container.isOpen()) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">self.setClasses()</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(self.options.get(</span><span class="s3">'scrollAfterSelect'</span><span class="s1">)) {</span>
        <span class="s1">self.highlightFirstItem()</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'open'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s0">// When the dropdown is open, aria-expended=&quot;true&quot;</span>
      <span class="s1">self.$results.attr(</span><span class="s3">'aria-expanded'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$results.attr(</span><span class="s3">'aria-hidden'</span><span class="s2">, </span><span class="s3">'false'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">self.setClasses()</span><span class="s2">;</span>
      <span class="s1">self.ensureHighlightVisible()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'close'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s0">// When the dropdown is closed, aria-expended=&quot;false&quot;</span>
      <span class="s1">self.$results.attr(</span><span class="s3">'aria-expanded'</span><span class="s2">, </span><span class="s3">'false'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$results.attr(</span><span class="s3">'aria-hidden'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$results.removeAttr(</span><span class="s3">'aria-activedescendant'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:toggle'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s2">var </span><span class="s1">$highlighted = self.getHighlightedResults()</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">($highlighted.length === </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">$highlighted.trigger(</span><span class="s3">'mouseup'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:select'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s2">var </span><span class="s1">$highlighted = self.getHighlightedResults()</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">($highlighted.length === </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">data = Utils.GetData($highlighted[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">($highlighted.attr(</span><span class="s3">'aria-selected'</span><span class="s1">) == </span><span class="s3">'true'</span><span class="s1">) {</span>
        <span class="s1">self.trigger(</span><span class="s3">'close'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">self.trigger(</span><span class="s3">'select'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">data: data</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:previous'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s2">var </span><span class="s1">$highlighted = self.getHighlightedResults()</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$options = self.$results.find(</span><span class="s3">'[aria-selected]'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">currentIndex = $options.index($highlighted)</span><span class="s2">;</span>

      <span class="s0">// If we are already at the top, don't move further</span>
      <span class="s0">// If no options, currentIndex will be -1</span>
      <span class="s2">if </span><span class="s1">(currentIndex &lt;= </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">nextIndex = currentIndex - </span><span class="s6">1</span><span class="s2">;</span>

      <span class="s0">// If none are highlighted, highlight the first</span>
      <span class="s2">if </span><span class="s1">($highlighted.length === </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">nextIndex = </span><span class="s6">0</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">$next = $options.eq(nextIndex)</span><span class="s2">;</span>

      <span class="s1">$next.trigger(</span><span class="s3">'mouseenter'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">currentOffset = self.$results.offset().top</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">nextTop = $next.offset().top</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">nextOffset = self.$results.scrollTop() + (nextTop - currentOffset)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(nextIndex === </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">self.$results.scrollTop(</span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(nextTop - currentOffset &lt; </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">self.$results.scrollTop(nextOffset)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:next'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s2">var </span><span class="s1">$highlighted = self.getHighlightedResults()</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$options = self.$results.find(</span><span class="s3">'[aria-selected]'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">currentIndex = $options.index($highlighted)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">nextIndex = currentIndex + </span><span class="s6">1</span><span class="s2">;</span>

      <span class="s0">// If we are at the last option, stay there</span>
      <span class="s2">if </span><span class="s1">(nextIndex &gt;= $options.length) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">$next = $options.eq(nextIndex)</span><span class="s2">;</span>

      <span class="s1">$next.trigger(</span><span class="s3">'mouseenter'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">currentOffset = self.$results.offset().top +</span>
        <span class="s1">self.$results.outerHeight(</span><span class="s2">false</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">nextBottom = $next.offset().top + $next.outerHeight(</span><span class="s2">false</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">nextOffset = self.$results.scrollTop() + nextBottom - currentOffset</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(nextIndex === </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">self.$results.scrollTop(</span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(nextBottom &gt; currentOffset) {</span>
        <span class="s1">self.$results.scrollTop(nextOffset)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:focus'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">params.element.addClass(</span><span class="s3">'select2-results__option--highlighted'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:message'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.displayMessage(params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($.fn.mousewheel) {</span>
      <span class="s2">this</span><span class="s1">.$results.on(</span><span class="s3">'mousewheel'</span><span class="s2">, function </span><span class="s1">(e) {</span>
        <span class="s2">var </span><span class="s1">top = self.$results.scrollTop()</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">bottom = self.$results.get(</span><span class="s6">0</span><span class="s1">).scrollHeight - top + e.deltaY</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">isAtTop = e.deltaY &gt; </span><span class="s6">0 </span><span class="s1">&amp;&amp; top - e.deltaY &lt;= </span><span class="s6">0</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">isAtBottom = e.deltaY &lt; </span><span class="s6">0 </span><span class="s1">&amp;&amp; bottom &lt;= self.$results.height()</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(isAtTop) {</span>
          <span class="s1">self.$results.scrollTop(</span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>

          <span class="s1">e.preventDefault()</span><span class="s2">;</span>
          <span class="s1">e.stopPropagation()</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(isAtBottom) {</span>
          <span class="s1">self.$results.scrollTop(</span>
            <span class="s1">self.$results.get(</span><span class="s6">0</span><span class="s1">).scrollHeight - self.$results.height()</span>
          <span class="s1">)</span><span class="s2">;</span>

          <span class="s1">e.preventDefault()</span><span class="s2">;</span>
          <span class="s1">e.stopPropagation()</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$results.on(</span><span class="s3">'mouseup'</span><span class="s2">, </span><span class="s3">'.select2-results__option[aria-selected]'</span><span class="s2">,</span>
      <span class="s2">function </span><span class="s1">(evt) {</span>
      <span class="s2">var </span><span class="s1">$this = $(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">data = Utils.GetData(</span><span class="s2">this, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">($this.attr(</span><span class="s3">'aria-selected'</span><span class="s1">) === </span><span class="s3">'true'</span><span class="s1">) {</span>
        <span class="s2">if </span><span class="s1">(self.options.get(</span><span class="s3">'multiple'</span><span class="s1">)) {</span>
          <span class="s1">self.trigger(</span><span class="s3">'unselect'</span><span class="s2">, </span><span class="s1">{</span>
            <span class="s1">originalEvent: evt</span><span class="s2">,</span>
            <span class="s1">data: data</span>
          <span class="s1">})</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
          <span class="s1">self.trigger(</span><span class="s3">'close'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">self.trigger(</span><span class="s3">'select'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">originalEvent: evt</span><span class="s2">,</span>
        <span class="s1">data: data</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$results.on(</span><span class="s3">'mouseenter'</span><span class="s2">, </span><span class="s3">'.select2-results__option[aria-selected]'</span><span class="s2">,</span>
      <span class="s2">function </span><span class="s1">(evt) {</span>
      <span class="s2">var </span><span class="s1">data = Utils.GetData(</span><span class="s2">this, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">self.getHighlightedResults()</span>
          <span class="s1">.removeClass(</span><span class="s3">'select2-results__option--highlighted'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">self.trigger(</span><span class="s3">'results:focus'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">data: data</span><span class="s2">,</span>
        <span class="s1">element: $(</span><span class="s2">this</span><span class="s1">)</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.getHighlightedResults = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$highlighted = </span><span class="s2">this</span><span class="s1">.$results</span>
    <span class="s1">.find(</span><span class="s3">'.select2-results__option--highlighted'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$highlighted</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.destroy = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.$results.remove()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.ensureHighlightVisible = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$highlighted = </span><span class="s2">this</span><span class="s1">.getHighlightedResults()</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($highlighted.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">$options = </span><span class="s2">this</span><span class="s1">.$results.find(</span><span class="s3">'[aria-selected]'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">currentIndex = $options.index($highlighted)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">currentOffset = </span><span class="s2">this</span><span class="s1">.$results.offset().top</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">nextTop = $highlighted.offset().top</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">nextOffset = </span><span class="s2">this</span><span class="s1">.$results.scrollTop() + (nextTop - currentOffset)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">offsetDelta = nextTop - currentOffset</span><span class="s2">;</span>
    <span class="s1">nextOffset -= $highlighted.outerHeight(</span><span class="s2">false</span><span class="s1">) * </span><span class="s6">2</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(currentIndex &lt;= </span><span class="s6">2</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.$results.scrollTop(</span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(offsetDelta &gt; </span><span class="s2">this</span><span class="s1">.$results.outerHeight() || offsetDelta &lt; </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.$results.scrollTop(nextOffset)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Results.prototype.template = </span><span class="s2">function </span><span class="s1">(result</span><span class="s2">, </span><span class="s1">container) {</span>
    <span class="s2">var </span><span class="s1">template = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'templateResult'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">escapeMarkup = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'escapeMarkup'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">content = template(result</span><span class="s2">, </span><span class="s1">container)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(content == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">container.style.display = </span><span class="s3">'none'</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">content === </span><span class="s3">'string'</span><span class="s1">) {</span>
      <span class="s1">container.innerHTML = escapeMarkup(content)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">$(container).append(content)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Results</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/keys'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">var </span><span class="s1">KEYS = {</span>
    <span class="s1">BACKSPACE: </span><span class="s6">8</span><span class="s2">,</span>
    <span class="s1">TAB: </span><span class="s6">9</span><span class="s2">,</span>
    <span class="s1">ENTER: </span><span class="s6">13</span><span class="s2">,</span>
    <span class="s1">SHIFT: </span><span class="s6">16</span><span class="s2">,</span>
    <span class="s1">CTRL: </span><span class="s6">17</span><span class="s2">,</span>
    <span class="s1">ALT: </span><span class="s6">18</span><span class="s2">,</span>
    <span class="s1">ESC: </span><span class="s6">27</span><span class="s2">,</span>
    <span class="s1">SPACE: </span><span class="s6">32</span><span class="s2">,</span>
    <span class="s1">PAGE_UP: </span><span class="s6">33</span><span class="s2">,</span>
    <span class="s1">PAGE_DOWN: </span><span class="s6">34</span><span class="s2">,</span>
    <span class="s1">END: </span><span class="s6">35</span><span class="s2">,</span>
    <span class="s1">HOME: </span><span class="s6">36</span><span class="s2">,</span>
    <span class="s1">LEFT: </span><span class="s6">37</span><span class="s2">,</span>
    <span class="s1">UP: </span><span class="s6">38</span><span class="s2">,</span>
    <span class="s1">RIGHT: </span><span class="s6">39</span><span class="s2">,</span>
    <span class="s1">DOWN: </span><span class="s6">40</span><span class="s2">,</span>
    <span class="s1">DELETE: </span><span class="s6">46</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">KEYS</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/base'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span><span class="s2">,</span>
  <span class="s3">'../keys'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Utils</span><span class="s2">, </span><span class="s1">KEYS) {</span>
  <span class="s2">function </span><span class="s1">BaseSelection ($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.$element = $element</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.options = options</span><span class="s2">;</span>

    <span class="s1">BaseSelection.__super__.constructor.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(BaseSelection</span><span class="s2">, </span><span class="s1">Utils.Observable)</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype.render = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$selection = $(</span>
      <span class="s3">'&lt;span class=&quot;select2-selection&quot; role=&quot;combobox&quot; ' </span><span class="s1">+</span>
      <span class="s3">' aria-haspopup=&quot;true&quot; aria-expanded=&quot;false&quot;&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/span&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">._tabindex = </span><span class="s6">0</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(Utils.GetData(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'old-tabindex'</span><span class="s1">) != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">._tabindex = Utils.GetData(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'old-tabindex'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$element.attr(</span><span class="s3">'tabindex'</span><span class="s1">) != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">._tabindex = </span><span class="s2">this</span><span class="s1">.$element.attr(</span><span class="s3">'tabindex'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">$selection.attr(</span><span class="s3">'title'</span><span class="s2">, this</span><span class="s1">.$element.attr(</span><span class="s3">'title'</span><span class="s1">))</span><span class="s2">;</span>
    <span class="s1">$selection.attr(</span><span class="s3">'tabindex'</span><span class="s2">, this</span><span class="s1">._tabindex)</span><span class="s2">;</span>
    <span class="s1">$selection.attr(</span><span class="s3">'aria-disabled'</span><span class="s2">, </span><span class="s3">'false'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection = $selection</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$selection</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype.bind = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">var </span><span class="s1">resultsId = container.id + </span><span class="s3">'-results'</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.container = container</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'focus'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'focus'</span><span class="s2">, </span><span class="s1">evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'blur'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self._handleBlur(evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'keydown'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'keypress'</span><span class="s2">, </span><span class="s1">evt)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(evt.which === KEYS.SPACE) {</span>
        <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:focus'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'aria-activedescendant'</span><span class="s2">, </span><span class="s1">params.data._resultId)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'selection:update'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.update(params.data)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'open'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s0">// When the dropdown is open, aria-expanded=&quot;true&quot;</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'aria-expanded'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'aria-owns'</span><span class="s2">, </span><span class="s1">resultsId)</span><span class="s2">;</span>

      <span class="s1">self._attachCloseHandler(container)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'close'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s0">// When the dropdown is closed, aria-expanded=&quot;false&quot;</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'aria-expanded'</span><span class="s2">, </span><span class="s3">'false'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$selection.removeAttr(</span><span class="s3">'aria-activedescendant'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$selection.removeAttr(</span><span class="s3">'aria-owns'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">self.$selection.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">self._detachCloseHandler(container)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'enable'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'tabindex'</span><span class="s2">, </span><span class="s1">self._tabindex)</span><span class="s2">;</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'aria-disabled'</span><span class="s2">, </span><span class="s3">'false'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'disable'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'tabindex'</span><span class="s2">, </span><span class="s3">'-1'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$selection.attr(</span><span class="s3">'aria-disabled'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype._handleBlur = </span><span class="s2">function </span><span class="s1">(evt) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s0">// This needs to be delayed as the active element is the body when the tab</span>
    <span class="s0">// key is pressed, possibly along with others.</span>
    <span class="s1">window.setTimeout(</span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s0">// Don't trigger `blur` if the focus is still in the selection</span>
      <span class="s2">if </span><span class="s1">(</span>
        <span class="s1">(document.activeElement == self.$selection[</span><span class="s6">0</span><span class="s1">]) ||</span>
        <span class="s1">($.contains(self.$selection[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">document.activeElement))</span>
      <span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">self.trigger(</span><span class="s3">'blur'</span><span class="s2">, </span><span class="s1">evt)</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype._attachCloseHandler = </span><span class="s2">function </span><span class="s1">(container) {</span>

    <span class="s1">$(document.body).on(</span><span class="s3">'mousedown.select2.' </span><span class="s1">+ container.id</span><span class="s2">, function </span><span class="s1">(e) {</span>
      <span class="s2">var </span><span class="s1">$target = $(e.target)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$select = $target.closest(</span><span class="s3">'.select2'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$all = $(</span><span class="s3">'.select2.select2-container--open'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">$all.each(</span><span class="s2">function </span><span class="s1">() {</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">this </span><span class="s1">== $select[</span><span class="s6">0</span><span class="s1">]) {</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s2">var </span><span class="s1">$element = Utils.GetData(</span><span class="s2">this, </span><span class="s3">'element'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">$element.select2(</span><span class="s3">'close'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype._detachCloseHandler = </span><span class="s2">function </span><span class="s1">(container) {</span>
    <span class="s1">$(document.body).off(</span><span class="s3">'mousedown.select2.' </span><span class="s1">+ container.id)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype.position = </span><span class="s2">function </span><span class="s1">($selection</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">$selectionContainer = $container.find(</span><span class="s3">'.selection'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$selectionContainer.append($selection)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype.destroy = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">._detachCloseHandler(</span><span class="s2">this</span><span class="s1">.container)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseSelection.prototype.update = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">throw new </span><span class="s1">Error(</span><span class="s3">'The `update` method must be defined in child classes.'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s4">/**</span>
   <span class="s4">* Helper method to abstract the &quot;enabled&quot; (not &quot;disabled&quot;) state of this</span>
   <span class="s4">* object.</span>
   <span class="s4">*</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{true} if the instance is not disabled.</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{false} if the instance is disabled.</span>
   <span class="s4">*/</span>
  <span class="s1">BaseSelection.prototype.isEnabled = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return </span><span class="s1">!</span><span class="s2">this</span><span class="s1">.isDisabled()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s4">/**</span>
   <span class="s4">* Helper method to abstract the &quot;disabled&quot; state of this object.</span>
   <span class="s4">*</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{true} if the disabled option is true.</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{false} if the disabled option is false.</span>
   <span class="s4">*/</span>
  <span class="s1">BaseSelection.prototype.isDisabled = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return this</span><span class="s1">.options.get(</span><span class="s3">'disabled'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">BaseSelection</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/single'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./base'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span><span class="s2">,</span>
  <span class="s3">'../keys'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">BaseSelection</span><span class="s2">, </span><span class="s1">Utils</span><span class="s2">, </span><span class="s1">KEYS) {</span>
  <span class="s2">function </span><span class="s1">SingleSelection () {</span>
    <span class="s1">SingleSelection.__super__.constructor.apply(</span><span class="s2">this, </span><span class="s1">arguments)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(SingleSelection</span><span class="s2">, </span><span class="s1">BaseSelection)</span><span class="s2">;</span>

  <span class="s1">SingleSelection.prototype.render = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$selection = SingleSelection.__super__.render.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$selection.addClass(</span><span class="s3">'select2-selection--single'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$selection.html(</span>
      <span class="s3">'&lt;span class=&quot;select2-selection__rendered&quot;&gt;&lt;/span&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;span class=&quot;select2-selection__arrow&quot; role=&quot;presentation&quot;&gt;' </span><span class="s1">+</span>
        <span class="s3">'&lt;b role=&quot;presentation&quot;&gt;&lt;/b&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/span&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$selection</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SingleSelection.prototype.bind = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">SingleSelection.__super__.bind.apply(</span><span class="s2">this, </span><span class="s1">arguments)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">id = container.id + </span><span class="s3">'-container'</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">)</span>
      <span class="s1">.attr(</span><span class="s3">'id'</span><span class="s2">, </span><span class="s1">id)</span>
      <span class="s1">.attr(</span><span class="s3">'role'</span><span class="s2">, </span><span class="s3">'textbox'</span><span class="s1">)</span>
      <span class="s1">.attr(</span><span class="s3">'aria-readonly'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$selection.attr(</span><span class="s3">'aria-labelledby'</span><span class="s2">, </span><span class="s1">id)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'mousedown'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s0">// Only respond to left clicks</span>
      <span class="s2">if </span><span class="s1">(evt.which !== </span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">self.trigger(</span><span class="s3">'toggle'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">originalEvent: evt</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'focus'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s0">// User focuses on the container</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'blur'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s0">// User exits the container</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'focus'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s2">if </span><span class="s1">(!container.isOpen()) {</span>
        <span class="s1">self.$selection.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SingleSelection.prototype.clear = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$rendered = </span><span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$rendered.empty()</span><span class="s2">;</span>
    <span class="s1">$rendered.removeAttr(</span><span class="s3">'title'</span><span class="s1">)</span><span class="s2">; </span><span class="s0">// clear tooltip on empty</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SingleSelection.prototype.display = </span><span class="s2">function </span><span class="s1">(data</span><span class="s2">, </span><span class="s1">container) {</span>
    <span class="s2">var </span><span class="s1">template = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'templateSelection'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">escapeMarkup = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'escapeMarkup'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">escapeMarkup(template(data</span><span class="s2">, </span><span class="s1">container))</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SingleSelection.prototype.selectionContainer = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return </span><span class="s1">$(</span><span class="s3">'&lt;span&gt;&lt;/span&gt;'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SingleSelection.prototype.update = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">if </span><span class="s1">(data.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.clear()</span><span class="s2">;</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">selection = data[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$rendered = </span><span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">formatted = </span><span class="s2">this</span><span class="s1">.display(selection</span><span class="s2">, </span><span class="s1">$rendered)</span><span class="s2">;</span>

    <span class="s1">$rendered.empty().append(formatted)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">title = selection.title || selection.text</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(title) {</span>
      <span class="s1">$rendered.attr(</span><span class="s3">'title'</span><span class="s2">, </span><span class="s1">title)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">$rendered.removeAttr(</span><span class="s3">'title'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">SingleSelection</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/multiple'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./base'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">BaseSelection</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">MultipleSelection ($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s1">MultipleSelection.__super__.constructor.apply(</span><span class="s2">this, </span><span class="s1">arguments)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(MultipleSelection</span><span class="s2">, </span><span class="s1">BaseSelection)</span><span class="s2">;</span>

  <span class="s1">MultipleSelection.prototype.render = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$selection = MultipleSelection.__super__.render.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$selection.addClass(</span><span class="s3">'select2-selection--multiple'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$selection.html(</span>
      <span class="s3">'&lt;ul class=&quot;select2-selection__rendered&quot;&gt;&lt;/ul&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$selection</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">MultipleSelection.prototype.bind = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">MultipleSelection.__super__.bind.apply(</span><span class="s2">this, </span><span class="s1">arguments)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'click'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'toggle'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">originalEvent: evt</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span>
      <span class="s3">'click'</span><span class="s2">,</span>
      <span class="s3">'.select2-selection__choice__remove'</span><span class="s2">,</span>
      <span class="s2">function </span><span class="s1">(evt) {</span>
        <span class="s0">// Ignore the event if it is disabled</span>
        <span class="s2">if </span><span class="s1">(self.isDisabled()) {</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s2">var </span><span class="s1">$remove = $(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">$selection = $remove.parent()</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">data = Utils.GetData($selection[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">self.trigger(</span><span class="s3">'unselect'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">originalEvent: evt</span><span class="s2">,</span>
          <span class="s1">data: data</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">MultipleSelection.prototype.clear = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$rendered = </span><span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$rendered.empty()</span><span class="s2">;</span>
    <span class="s1">$rendered.removeAttr(</span><span class="s3">'title'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">MultipleSelection.prototype.display = </span><span class="s2">function </span><span class="s1">(data</span><span class="s2">, </span><span class="s1">container) {</span>
    <span class="s2">var </span><span class="s1">template = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'templateSelection'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">escapeMarkup = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'escapeMarkup'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">escapeMarkup(template(data</span><span class="s2">, </span><span class="s1">container))</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">MultipleSelection.prototype.selectionContainer = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$container = $(</span>
      <span class="s3">'&lt;li class=&quot;select2-selection__choice&quot;&gt;' </span><span class="s1">+</span>
        <span class="s3">'&lt;span class=&quot;select2-selection__choice__remove&quot; role=&quot;presentation&quot;&gt;' </span><span class="s1">+</span>
          <span class="s3">'&amp;times;' </span><span class="s1">+</span>
        <span class="s3">'&lt;/span&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/li&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$container</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">MultipleSelection.prototype.update = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">this</span><span class="s1">.clear()</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(data.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">$selections = []</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; data.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s2">var </span><span class="s1">selection = data[d]</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$selection = </span><span class="s2">this</span><span class="s1">.selectionContainer()</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">formatted = </span><span class="s2">this</span><span class="s1">.display(selection</span><span class="s2">, </span><span class="s1">$selection)</span><span class="s2">;</span>

      <span class="s1">$selection.append(formatted)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">title = selection.title || selection.text</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(title) {</span>
        <span class="s1">$selection.attr(</span><span class="s3">'title'</span><span class="s2">, </span><span class="s1">title)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">Utils.StoreData($selection[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s2">, </span><span class="s1">selection)</span><span class="s2">;</span>

      <span class="s1">$selections.push($selection)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">$rendered = </span><span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">Utils.appendMany($rendered</span><span class="s2">, </span><span class="s1">$selections)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">MultipleSelection</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/placeholder'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">(Utils) {</span>
  <span class="s2">function </span><span class="s1">Placeholder (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.placeholder = </span><span class="s2">this</span><span class="s1">.normalizePlaceholder(options.get(</span><span class="s3">'placeholder'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Placeholder.prototype.normalizePlaceholder = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">placeholder) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">placeholder === </span><span class="s3">'string'</span><span class="s1">) {</span>
      <span class="s1">placeholder = {</span>
        <span class="s1">id: </span><span class="s3">''</span><span class="s2">,</span>
        <span class="s1">text: placeholder</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">placeholder</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Placeholder.prototype.createPlaceholder = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">placeholder) {</span>
    <span class="s2">var </span><span class="s1">$placeholder = </span><span class="s2">this</span><span class="s1">.selectionContainer()</span><span class="s2">;</span>

    <span class="s1">$placeholder.html(</span><span class="s2">this</span><span class="s1">.display(placeholder))</span><span class="s2">;</span>
    <span class="s1">$placeholder.addClass(</span><span class="s3">'select2-selection__placeholder'</span><span class="s1">)</span>
                <span class="s1">.removeClass(</span><span class="s3">'select2-selection__choice'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$placeholder</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Placeholder.prototype.update = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">var </span><span class="s1">singlePlaceholder = (</span>
      <span class="s1">data.length == </span><span class="s6">1 </span><span class="s1">&amp;&amp; data[</span><span class="s6">0</span><span class="s1">].id != </span><span class="s2">this</span><span class="s1">.placeholder.id</span>
    <span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">multipleSelections = data.length &gt; </span><span class="s6">1</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(multipleSelections || singlePlaceholder) {</span>
      <span class="s2">return </span><span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">data)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.clear()</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$placeholder = </span><span class="s2">this</span><span class="s1">.createPlaceholder(</span><span class="s2">this</span><span class="s1">.placeholder)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">).append($placeholder)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Placeholder</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/allowClear'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'../keys'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">KEYS</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">AllowClear () { }</span>

  <span class="s1">AllowClear.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.placeholder == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp; window.console &amp;&amp; console.error) {</span>
        <span class="s1">console.error(</span>
          <span class="s3">'Select2: The `allowClear` option should be used in combination ' </span><span class="s1">+</span>
          <span class="s3">'with the `placeholder` option.'</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'mousedown'</span><span class="s2">, </span><span class="s3">'.select2-selection__clear'</span><span class="s2">,</span>
      <span class="s2">function </span><span class="s1">(evt) {</span>
        <span class="s1">self._handleClear(evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'keypress'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self._handleKeyboardClear(evt</span><span class="s2">, </span><span class="s1">container)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AllowClear.prototype._handleClear = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">evt) {</span>
    <span class="s0">// Ignore the event if it is disabled</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isDisabled()) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">$clear = </span><span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__clear'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s0">// Ignore the event if nothing has been selected</span>
    <span class="s2">if </span><span class="s1">($clear.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s1">evt.stopPropagation()</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">data = Utils.GetData($clear[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">previousVal = </span><span class="s2">this</span><span class="s1">.$element.val()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$element.val(</span><span class="s2">this</span><span class="s1">.placeholder.id)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">unselectData = {</span>
      <span class="s1">data: data</span>
    <span class="s1">}</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'clear'</span><span class="s2">, </span><span class="s1">unselectData)</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(unselectData.prevented) {</span>
      <span class="s2">this</span><span class="s1">.$element.val(previousVal)</span><span class="s2">;</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; data.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s1">unselectData = {</span>
        <span class="s1">data: data[d]</span>
      <span class="s1">}</span><span class="s2">;</span>

      <span class="s0">// Trigger the `unselect` event, so people can prevent it from being</span>
      <span class="s0">// cleared.</span>
      <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'unselect'</span><span class="s2">, </span><span class="s1">unselectData)</span><span class="s2">;</span>

      <span class="s0">// If the event was prevented, don't clear it out.</span>
      <span class="s2">if </span><span class="s1">(unselectData.prevented) {</span>
        <span class="s2">this</span><span class="s1">.$element.val(previousVal)</span><span class="s2">;</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'toggle'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AllowClear.prototype._handleKeyboardClear = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">evt</span><span class="s2">, </span><span class="s1">container) {</span>
    <span class="s2">if </span><span class="s1">(container.isOpen()) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {</span>
      <span class="s2">this</span><span class="s1">._handleClear(evt)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AllowClear.prototype.update = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">data)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__placeholder'</span><span class="s1">).length &gt; </span><span class="s6">0 </span><span class="s1">||</span>
        <span class="s1">data.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">removeAll = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'translations'</span><span class="s1">).get(</span><span class="s3">'removeAllItems'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$remove = $(</span>
      <span class="s3">'&lt;span class=&quot;select2-selection__clear&quot; title=&quot;' </span><span class="s1">+ removeAll() +</span><span class="s3">'&quot;&gt;' </span><span class="s1">+</span>
        <span class="s3">'&amp;times;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/span&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">Utils.StoreData($remove[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s2">, </span><span class="s1">data)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">).prepend($remove)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">AllowClear</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/search'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span><span class="s2">,</span>
  <span class="s3">'../keys'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Utils</span><span class="s2">, </span><span class="s1">KEYS) {</span>
  <span class="s2">function </span><span class="s1">Search (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Search.prototype.render = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">var </span><span class="s1">$search = $(</span>
      <span class="s3">'&lt;li class=&quot;select2-search select2-search--inline&quot;&gt;' </span><span class="s1">+</span>
        <span class="s3">'&lt;input class=&quot;select2-search__field&quot; type=&quot;search&quot; tabindex=&quot;-1&quot;' </span><span class="s1">+</span>
        <span class="s3">' autocomplete=&quot;off&quot; autocorrect=&quot;off&quot; autocapitalize=&quot;none&quot;' </span><span class="s1">+</span>
        <span class="s3">' spellcheck=&quot;false&quot; role=&quot;searchbox&quot; aria-autocomplete=&quot;list&quot; /&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/li&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$searchContainer = $search</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$search = $search.find(</span><span class="s3">'input'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$rendered = decorated.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">._transferTabIndex()</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$rendered</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">var </span><span class="s1">resultsId = container.id + </span><span class="s3">'-results'</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'open'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$search.attr(</span><span class="s3">'aria-controls'</span><span class="s2">, </span><span class="s1">resultsId)</span><span class="s2">;</span>
      <span class="s1">self.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'close'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$search.val(</span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$search.removeAttr(</span><span class="s3">'aria-controls'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$search.removeAttr(</span><span class="s3">'aria-activedescendant'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'enable'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$search.prop(</span><span class="s3">'disabled'</span><span class="s2">, false</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">self._transferTabIndex()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'disable'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$search.prop(</span><span class="s3">'disabled'</span><span class="s2">, true</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'focus'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:focus'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s2">if </span><span class="s1">(params.data._resultId) {</span>
        <span class="s1">self.$search.attr(</span><span class="s3">'aria-activedescendant'</span><span class="s2">, </span><span class="s1">params.data._resultId)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">self.$search.removeAttr(</span><span class="s3">'aria-activedescendant'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'focusin'</span><span class="s2">, </span><span class="s3">'.select2-search--inline'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'focus'</span><span class="s2">, </span><span class="s1">evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'focusout'</span><span class="s2">, </span><span class="s3">'.select2-search--inline'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self._handleBlur(evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'keydown'</span><span class="s2">, </span><span class="s3">'.select2-search--inline'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">evt.stopPropagation()</span><span class="s2">;</span>

      <span class="s1">self.trigger(</span><span class="s3">'keypress'</span><span class="s2">, </span><span class="s1">evt)</span><span class="s2">;</span>

      <span class="s1">self._keyUpPrevented = evt.isDefaultPrevented()</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">key = evt.which</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(key === KEYS.BACKSPACE &amp;&amp; self.$search.val() === </span><span class="s3">''</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">$previousChoice = self.$searchContainer</span>
          <span class="s1">.prev(</span><span class="s3">'.select2-selection__choice'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">($previousChoice.length &gt; </span><span class="s6">0</span><span class="s1">) {</span>
          <span class="s2">var </span><span class="s1">item = Utils.GetData($previousChoice[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

          <span class="s1">self.searchRemoveChoice(item)</span><span class="s2">;</span>

          <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span><span class="s3">'click'</span><span class="s2">, </span><span class="s3">'.select2-search--inline'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s2">if </span><span class="s1">(self.$search.val()) {</span>
        <span class="s1">evt.stopPropagation()</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s0">// Try to detect the IE version should the `documentMode` property that</span>
    <span class="s0">// is stored on the document. This is only implemented in IE and is</span>
    <span class="s0">// slightly cleaner than doing a user agent check.</span>
    <span class="s0">// This property is not available in Edge, but Edge also doesn't have</span>
    <span class="s0">// this bug.</span>
    <span class="s2">var </span><span class="s1">msie = document.documentMode</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">disableInputEvents = msie &amp;&amp; msie &lt;= </span><span class="s6">11</span><span class="s2">;</span>

    <span class="s0">// Workaround for browsers which do not support the `input` event</span>
    <span class="s0">// This will prevent double-triggering of events for browsers which support</span>
    <span class="s0">// both the `keyup` and `input` events.</span>
    <span class="s2">this</span><span class="s1">.$selection.on(</span>
      <span class="s3">'input.searchcheck'</span><span class="s2">,</span>
      <span class="s3">'.select2-search--inline'</span><span class="s2">,</span>
      <span class="s2">function </span><span class="s1">(evt) {</span>
        <span class="s0">// IE will trigger the `input` event when a placeholder is used on a</span>
        <span class="s0">// search box. To get around this issue, we are forced to ignore all</span>
        <span class="s0">// `input` events in IE and keep using `keyup`.</span>
        <span class="s2">if </span><span class="s1">(disableInputEvents) {</span>
          <span class="s1">self.$selection.off(</span><span class="s3">'input.search input.searchcheck'</span><span class="s1">)</span><span class="s2">;</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s0">// Unbind the duplicated `keyup` event</span>
        <span class="s1">self.$selection.off(</span><span class="s3">'keyup.search'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(</span>
      <span class="s3">'keyup.search input.search'</span><span class="s2">,</span>
      <span class="s3">'.select2-search--inline'</span><span class="s2">,</span>
      <span class="s2">function </span><span class="s1">(evt) {</span>
        <span class="s0">// IE will trigger the `input` event when a placeholder is used on a</span>
        <span class="s0">// search box. To get around this issue, we are forced to ignore all</span>
        <span class="s0">// `input` events in IE and keep using `keyup`.</span>
        <span class="s2">if </span><span class="s1">(disableInputEvents &amp;&amp; evt.type === </span><span class="s3">'input'</span><span class="s1">) {</span>
          <span class="s1">self.$selection.off(</span><span class="s3">'input.search input.searchcheck'</span><span class="s1">)</span><span class="s2">;</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s2">var </span><span class="s1">key = evt.which</span><span class="s2">;</span>

        <span class="s0">// We can freely ignore events from modifier keys</span>
        <span class="s2">if </span><span class="s1">(key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s0">// Tabbing will be handled during the `keydown` phase</span>
        <span class="s2">if </span><span class="s1">(key == KEYS.TAB) {</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s1">self.handleSearch(evt)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s4">/**</span>
   <span class="s4">* This method will transfer the tabindex attribute from the rendered</span>
   <span class="s4">* selection to the search box. This allows for the search box to be used as</span>
   <span class="s4">* the primary focus instead of the selection container.</span>
   <span class="s4">*</span>
   <span class="s4">* </span><span class="s5">@private</span>
   <span class="s4">*/</span>
  <span class="s1">Search.prototype._transferTabIndex = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">this</span><span class="s1">.$search.attr(</span><span class="s3">'tabindex'</span><span class="s2">, this</span><span class="s1">.$selection.attr(</span><span class="s3">'tabindex'</span><span class="s1">))</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$selection.attr(</span><span class="s3">'tabindex'</span><span class="s2">, </span><span class="s3">'-1'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.createPlaceholder = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">placeholder) {</span>
    <span class="s2">this</span><span class="s1">.$search.attr(</span><span class="s3">'placeholder'</span><span class="s2">, </span><span class="s1">placeholder.text)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.update = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">var </span><span class="s1">searchHadFocus = </span><span class="s2">this</span><span class="s1">.$search[</span><span class="s6">0</span><span class="s1">] == document.activeElement</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$search.attr(</span><span class="s3">'placeholder'</span><span class="s2">, </span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">data)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">)</span>
                   <span class="s1">.append(</span><span class="s2">this</span><span class="s1">.$searchContainer)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.resizeSearch()</span><span class="s2">;</span>
    <span class="s2">if </span><span class="s1">(searchHadFocus) {</span>
      <span class="s2">this</span><span class="s1">.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.handleSearch = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.resizeSearch()</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(!</span><span class="s2">this</span><span class="s1">._keyUpPrevented) {</span>
      <span class="s2">var </span><span class="s1">input = </span><span class="s2">this</span><span class="s1">.$search.val()</span><span class="s2">;</span>

      <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'query'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">term: input</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">._keyUpPrevented = </span><span class="s2">false;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.searchRemoveChoice = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">item) {</span>
    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'unselect'</span><span class="s2">, </span><span class="s1">{</span>
      <span class="s1">data: item</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$search.val(item.text)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.handleSearch()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.resizeSearch = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.$search.css(</span><span class="s3">'width'</span><span class="s2">, </span><span class="s3">'25px'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">width = </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$search.attr(</span><span class="s3">'placeholder'</span><span class="s1">) !== </span><span class="s3">''</span><span class="s1">) {</span>
      <span class="s1">width = </span><span class="s2">this</span><span class="s1">.$selection.find(</span><span class="s3">'.select2-selection__rendered'</span><span class="s1">).width()</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">var </span><span class="s1">minimumWidth = </span><span class="s2">this</span><span class="s1">.$search.val().length + </span><span class="s6">1</span><span class="s2">;</span>

      <span class="s1">width = (minimumWidth * </span><span class="s6">0.75</span><span class="s1">) + </span><span class="s3">'em'</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$search.css(</span><span class="s3">'width'</span><span class="s2">, </span><span class="s1">width)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Search</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/eventRelay'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">function </span><span class="s1">EventRelay () { }</span>

  <span class="s1">EventRelay.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>
    <span class="s2">var </span><span class="s1">relayEvents = [</span>
      <span class="s3">'open'</span><span class="s2">, </span><span class="s3">'opening'</span><span class="s2">,</span>
      <span class="s3">'close'</span><span class="s2">, </span><span class="s3">'closing'</span><span class="s2">,</span>
      <span class="s3">'select'</span><span class="s2">, </span><span class="s3">'selecting'</span><span class="s2">,</span>
      <span class="s3">'unselect'</span><span class="s2">, </span><span class="s3">'unselecting'</span><span class="s2">,</span>
      <span class="s3">'clear'</span><span class="s2">, </span><span class="s3">'clearing'</span>
    <span class="s1">]</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">preventableEvents = [</span>
      <span class="s3">'opening'</span><span class="s2">, </span><span class="s3">'closing'</span><span class="s2">, </span><span class="s3">'selecting'</span><span class="s2">, </span><span class="s3">'unselecting'</span><span class="s2">, </span><span class="s3">'clearing'</span>
    <span class="s1">]</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'*'</span><span class="s2">, function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">params) {</span>
      <span class="s0">// Ignore events that should not be relayed</span>
      <span class="s2">if </span><span class="s1">($.inArray(name</span><span class="s2">, </span><span class="s1">relayEvents) === -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s0">// The parameters should always be an object</span>
      <span class="s1">params = params || {}</span><span class="s2">;</span>

      <span class="s0">// Generate the jQuery event for the Select2 event</span>
      <span class="s2">var </span><span class="s1">evt = $.Event(</span><span class="s3">'select2:' </span><span class="s1">+ name</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">params: params</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s1">self.$element.trigger(evt)</span><span class="s2">;</span>

      <span class="s0">// Only handle preventable events if it was one</span>
      <span class="s2">if </span><span class="s1">($.inArray(name</span><span class="s2">, </span><span class="s1">preventableEvents) === -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">params.prevented = evt.isDefaultPrevented()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">EventRelay</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/translation'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'require'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">require) {</span>
  <span class="s2">function </span><span class="s1">Translation (dict) {</span>
    <span class="s2">this</span><span class="s1">.dict = dict || {}</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Translation.prototype.all = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return this</span><span class="s1">.dict</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Translation.prototype.get = </span><span class="s2">function </span><span class="s1">(key) {</span>
    <span class="s2">return this</span><span class="s1">.dict[key]</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Translation.prototype.extend = </span><span class="s2">function </span><span class="s1">(translation) {</span>
    <span class="s2">this</span><span class="s1">.dict = $.extend({}</span><span class="s2">, </span><span class="s1">translation.all()</span><span class="s2">, this</span><span class="s1">.dict)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s0">// Static functions</span>

  <span class="s1">Translation._cache = {}</span><span class="s2">;</span>

  <span class="s1">Translation.loadPath = </span><span class="s2">function </span><span class="s1">(path) {</span>
    <span class="s2">if </span><span class="s1">(!(path </span><span class="s2">in </span><span class="s1">Translation._cache)) {</span>
      <span class="s2">var </span><span class="s1">translations = require(path)</span><span class="s2">;</span>

      <span class="s1">Translation._cache[path] = translations</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return new </span><span class="s1">Translation(Translation._cache[path])</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Translation</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/diacritics'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">var </span><span class="s1">diacritics = {</span>
    <span class="s3">'</span><span class="s2">\u24B6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF21</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EAA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0100</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0102</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EAE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0226</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01DE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01FA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01CD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0200</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0202</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EAC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E00</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0104</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u023A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C6F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'A'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA732</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AA'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AE'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01FC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AE'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AE'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA734</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AO'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA736</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AU'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA738</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AV'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA73A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AV'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA73C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'AY'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24B7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF22</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E02</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E04</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E06</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0243</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0182</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0181</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'B'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24B8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF23</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0106</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0108</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u010A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u010C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E08</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0187</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u023B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA73E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'C'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24B9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF24</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E0A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u010E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E0C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E10</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E12</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E0E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0110</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u018B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u018A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0189</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA779</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'D'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'DZ'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01C4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'DZ'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Dz'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01C5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Dz'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24BA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF25</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00C9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00CA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EBE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EBC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0112</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E14</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E16</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0114</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0116</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00CB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EBA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u011A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0204</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0206</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0228</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E1C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0118</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E18</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E1A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0190</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u018E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'E'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24BB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'F'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF26</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'F'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E1E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'F'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0191</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'F'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA77B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'F'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24BC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF27</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u011C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E20</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u011E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0120</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0122</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0193</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA77D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA77E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'G'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24BD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF28</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0124</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E22</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E26</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u021E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E24</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E28</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E2A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0126</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C67</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C75</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA78D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'H'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24BE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF29</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00CC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00CD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00CE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0128</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u012A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u012C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0130</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00CF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E2E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01CF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0208</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u020A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ECA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u012E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E2C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0197</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'I'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24BF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'J'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF2A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'J'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0134</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'J'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0248</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'J'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF2B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E30</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E32</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0136</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E34</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0198</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C69</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA740</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA742</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA744</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'K'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF2C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u013F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0139</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u013D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E36</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E38</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u013B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E3C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E3A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0141</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u023D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C62</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C60</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA748</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA746</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA780</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'L'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01C7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'LJ'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01C8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Lj'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'M'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF2D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'M'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E3E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'M'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E40</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'M'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E42</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'M'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C6E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'M'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u019C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'M'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF2E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0143</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E44</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0147</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E46</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0145</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E4A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E48</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0220</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u019D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA790</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'N'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01CA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'NJ'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01CB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Nj'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF2F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E4C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u022C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E4E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u014C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E50</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E52</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u014E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u022E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0230</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u022A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ECE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0150</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u020C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u020E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01A0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EDC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EDA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EDE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ECC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01EA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01EC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01FE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0186</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u019F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA74A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA74C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'O'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0152</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'OE'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01A2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'OI'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA74E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'OO'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0222</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'OU'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF30</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E54</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E56</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01A4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C63</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA750</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA752</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA754</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'P'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF31</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA756</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA758</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u024A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF32</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0154</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E58</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0158</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0210</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0212</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E5A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E5C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0156</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E5E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u024C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C64</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA75A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA782</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'R'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF33</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E9E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u015A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E64</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u015C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E60</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0160</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E66</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E62</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E68</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0218</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u015E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C7E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA784</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'S'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24C9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF34</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E6A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0164</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E6C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u021A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0162</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E70</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E6E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0166</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01AC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01AE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u023E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA786</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'T'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA728</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'TZ'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24CA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF35</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00D9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00DA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00DB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0168</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E78</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u016A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E7A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u016C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00DC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01DB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u016E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0170</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0214</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0216</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01AF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EEA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EEE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EEC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E72</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0172</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E76</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E74</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0244</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'U'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24CB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'V'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF36</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'V'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E7C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'V'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E7E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'V'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01B2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'V'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA75E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'V'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0245</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'V'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA760</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'VY'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24CC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF37</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E80</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E82</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0174</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E86</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E84</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E88</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C72</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'W'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24CD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'X'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF38</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'X'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E8A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'X'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E8C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'X'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24CE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF39</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00DD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0176</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0232</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E8E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0178</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01B3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u024E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EFE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24CF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF3A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0179</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E90</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u017B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u017D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E92</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E94</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01B5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0224</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C7F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C6B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA762</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'Z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF41</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E9A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EAB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0101</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0103</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EAF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0227</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01DF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01FB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01CE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0201</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0203</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EA1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EAD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E01</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0105</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C65</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0250</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'a'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA733</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'aa'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'ae'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01FD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'ae'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'ae'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA735</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'ao'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA737</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'au'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA739</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'av'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA73B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'av'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA73D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'ay'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF42</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E03</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E05</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E07</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0180</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0183</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0253</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'b'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF43</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0107</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0109</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u010B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u010D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E09</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0188</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u023C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA73F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2184</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'c'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF44</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E0B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u010F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E0D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E11</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E13</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E0F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0111</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u018C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0256</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0257</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA77A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'d'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'dz'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01C6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'dz'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF45</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00E9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00EA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EBF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EBD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0113</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E15</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E17</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0115</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0117</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00EB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EBB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u011B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0205</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0207</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EB9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0229</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E1D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0119</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E19</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E1B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0247</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u025B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01DD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'e'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'f'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF46</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'f'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E1F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'f'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0192</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'f'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA77C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'f'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF47</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u011D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E21</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u011F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0121</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0123</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0260</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1D79</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA77F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'g'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF48</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0125</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E23</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E27</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u021F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E25</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E29</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E2B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E96</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0127</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C68</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C76</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0265</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'h'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0195</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'hv'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF49</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00EC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00ED</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00EE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0129</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u012B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u012D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00EF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E2F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EC9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0209</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u020B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ECB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u012F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E2D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0268</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0131</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'i'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24D9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'j'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF4A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'j'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0135</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'j'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'j'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0249</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'j'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24DA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF4B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E31</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01E9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E33</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0137</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E35</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0199</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C6A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA741</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA743</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA745</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'k'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24DB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF4C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0140</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u013A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u013E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E37</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E39</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u013C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E3D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E3B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u017F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0142</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u019A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u026B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C61</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA749</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA781</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA747</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'l'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01C9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'lj'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24DC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'m'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF4D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'m'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E3F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'m'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E41</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'m'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E43</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'m'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0271</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'m'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u026F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'m'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24DD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF4E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01F9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0144</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E45</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0148</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E47</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0146</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E4B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E49</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u019E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0272</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0149</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA791</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'n'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01CC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'nj'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24DE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF4F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E4D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u022D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E4F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u014D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E51</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E53</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u014F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u022F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0231</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u022B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ECF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0151</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u020D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u020F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01A1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EDD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EDB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EDF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ECD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1ED9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01EB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01ED</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01FF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0254</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA74B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA74D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0275</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'o'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0153</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'oe'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01A3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'oi'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0223</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'ou'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA74F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'oo'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24DF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF50</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E55</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E57</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01A5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1D7D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA751</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA753</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA755</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'p'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF51</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u024B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA757</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA759</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'q'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF52</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0155</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E59</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0159</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0211</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0213</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E5B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E5D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0157</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E5F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u024D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u027D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA75B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA783</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'r'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF53</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00DF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u015B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E65</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u015D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E61</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0161</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E67</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E63</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E69</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0219</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u015F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u023F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA7A9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA785</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E9B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'s'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF54</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E6B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E97</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0165</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E6D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u021B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0163</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E71</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E6F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0167</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01AD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0288</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C66</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA787</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'t'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA729</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'tz'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF55</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00F9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00FA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00FB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0169</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E79</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u016B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E7B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u016D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00FC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01DC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01DA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u016F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0171</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01D4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0215</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0217</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01B0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EEB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EEF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EED</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF1</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EE5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E73</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0173</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E77</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E75</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0289</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'u'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'v'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF56</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'v'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E7D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'v'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E7F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'v'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u028B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'v'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA75F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'v'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u028C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'v'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA761</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'vy'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF57</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E81</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E83</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0175</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E87</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E85</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E98</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E89</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C73</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'w'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'x'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF58</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'x'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E8B</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'x'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E8D</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'x'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E8</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF59</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF3</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00FD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0177</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0233</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E8F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u00FF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF7</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E99</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EF5</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01B4</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u024F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1EFF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'y'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u24E9</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uFF5A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u017A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E91</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u017C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u017E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E93</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u1E95</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u01B6</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0225</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0240</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2C6C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\uA763</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'z'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0386</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u0391</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0388</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u0395</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0389</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u0397</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u038A</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u0399</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03AA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u0399</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u038C</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u039F</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u038E</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03A5</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03AB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03A5</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u038F</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03A9</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03AC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03B1</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03AD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03B5</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03AE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03B7</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03AF</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03B9</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03CA</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03B9</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u0390</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03B9</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03CC</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03BF</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03CD</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03C5</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03CB</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03C5</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03B0</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03C5</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03CE</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03C9</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u03C2</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\u03C3</span><span class="s3">'</span><span class="s2">,</span>
    <span class="s3">'</span><span class="s2">\u2019</span><span class="s3">'</span><span class="s1">: </span><span class="s3">'</span><span class="s2">\'</span><span class="s3">'</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">diacritics</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/base'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">(Utils) {</span>
  <span class="s2">function </span><span class="s1">BaseAdapter ($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s1">BaseAdapter.__super__.constructor.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(BaseAdapter</span><span class="s2">, </span><span class="s1">Utils.Observable)</span><span class="s2">;</span>

  <span class="s1">BaseAdapter.prototype.current = </span><span class="s2">function </span><span class="s1">(callback) {</span>
    <span class="s2">throw new </span><span class="s1">Error(</span><span class="s3">'The `current` method must be defined in child classes.'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseAdapter.prototype.query = </span><span class="s2">function </span><span class="s1">(params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">throw new </span><span class="s1">Error(</span><span class="s3">'The `query` method must be defined in child classes.'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseAdapter.prototype.bind = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s0">// Can be implemented in subclasses</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseAdapter.prototype.destroy = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s0">// Can be implemented in subclasses</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">BaseAdapter.prototype.generateResultId = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">var </span><span class="s1">id = container.id + </span><span class="s3">'-result-'</span><span class="s2">;</span>

    <span class="s1">id += Utils.generateChars(</span><span class="s6">4</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(data.id != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">id += </span><span class="s3">'-' </span><span class="s1">+ data.id.toString()</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">id += </span><span class="s3">'-' </span><span class="s1">+ Utils.generateChars(</span><span class="s6">4</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">id</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">BaseAdapter</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/select'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'./base'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span><span class="s2">,</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">(BaseAdapter</span><span class="s2">, </span><span class="s1">Utils</span><span class="s2">, </span><span class="s1">$) {</span>
  <span class="s2">function </span><span class="s1">SelectAdapter ($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.$element = $element</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.options = options</span><span class="s2">;</span>

    <span class="s1">SelectAdapter.__super__.constructor.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(SelectAdapter</span><span class="s2">, </span><span class="s1">BaseAdapter)</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.current = </span><span class="s2">function </span><span class="s1">(callback) {</span>
    <span class="s2">var </span><span class="s1">data = []</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.$element.find(</span><span class="s3">':selected'</span><span class="s1">).each(</span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">var </span><span class="s1">$option = $(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">option = self.item($option)</span><span class="s2">;</span>

      <span class="s1">data.push(option)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">callback(data)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.select = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">data.selected = </span><span class="s2">true;</span>

    <span class="s0">// If data.element is a DOM node, use it instead</span>
    <span class="s2">if </span><span class="s1">($(data.element).is(</span><span class="s3">'option'</span><span class="s1">)) {</span>
      <span class="s1">data.element.selected = </span><span class="s2">true;</span>

      <span class="s2">this</span><span class="s1">.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$element.prop(</span><span class="s3">'multiple'</span><span class="s1">)) {</span>
      <span class="s2">this</span><span class="s1">.current(</span><span class="s2">function </span><span class="s1">(currentData) {</span>
        <span class="s2">var </span><span class="s1">val = []</span><span class="s2">;</span>

        <span class="s1">data = [data]</span><span class="s2">;</span>
        <span class="s1">data.push.apply(data</span><span class="s2">, </span><span class="s1">currentData)</span><span class="s2">;</span>

        <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; data.length</span><span class="s2">; </span><span class="s1">d++) {</span>
          <span class="s2">var </span><span class="s1">id = data[d].id</span><span class="s2">;</span>

          <span class="s2">if </span><span class="s1">($.inArray(id</span><span class="s2">, </span><span class="s1">val) === -</span><span class="s6">1</span><span class="s1">) {</span>
            <span class="s1">val.push(id)</span><span class="s2">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s1">self.$element.val(val)</span><span class="s2">;</span>
        <span class="s1">self.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">var </span><span class="s1">val = data.id</span><span class="s2">;</span>

      <span class="s2">this</span><span class="s1">.$element.val(val)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.unselect = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">if </span><span class="s1">(!</span><span class="s2">this</span><span class="s1">.$element.prop(</span><span class="s3">'multiple'</span><span class="s1">)) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s1">data.selected = </span><span class="s2">false;</span>

    <span class="s2">if </span><span class="s1">($(data.element).is(</span><span class="s3">'option'</span><span class="s1">)) {</span>
      <span class="s1">data.element.selected = </span><span class="s2">false;</span>

      <span class="s2">this</span><span class="s1">.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.current(</span><span class="s2">function </span><span class="s1">(currentData) {</span>
      <span class="s2">var </span><span class="s1">val = []</span><span class="s2">;</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; currentData.length</span><span class="s2">; </span><span class="s1">d++) {</span>
        <span class="s2">var </span><span class="s1">id = currentData[d].id</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(id !== data.id &amp;&amp; $.inArray(id</span><span class="s2">, </span><span class="s1">val) === -</span><span class="s6">1</span><span class="s1">) {</span>
          <span class="s1">val.push(id)</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>

      <span class="s1">self.$element.val(val)</span><span class="s2">;</span>

      <span class="s1">self.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.bind = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.container = container</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'select'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.select(params.data)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'unselect'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.unselect(params.data)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.destroy = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s0">// Remove anything added to child elements</span>
    <span class="s2">this</span><span class="s1">.$element.find(</span><span class="s3">'*'</span><span class="s1">).each(</span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s0">// Remove any custom data set by Select2</span>
      <span class="s1">Utils.RemoveData(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.query = </span><span class="s2">function </span><span class="s1">(params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">var </span><span class="s1">data = []</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">var </span><span class="s1">$options = </span><span class="s2">this</span><span class="s1">.$element.children()</span><span class="s2">;</span>

    <span class="s1">$options.each(</span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">var </span><span class="s1">$option = $(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(!$option.is(</span><span class="s3">'option'</span><span class="s1">) &amp;&amp; !$option.is(</span><span class="s3">'optgroup'</span><span class="s1">)) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">option = self.item($option)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">matches = self.matches(params</span><span class="s2">, </span><span class="s1">option)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(matches !== </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">data.push(matches)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">callback({</span>
      <span class="s1">results: data</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.addOptions = </span><span class="s2">function </span><span class="s1">($options) {</span>
    <span class="s1">Utils.appendMany(</span><span class="s2">this</span><span class="s1">.$element</span><span class="s2">, </span><span class="s1">$options)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.option = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">var </span><span class="s1">option</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(data.children) {</span>
      <span class="s1">option = document.createElement(</span><span class="s3">'optgroup'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">option.label = data.text</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">option = document.createElement(</span><span class="s3">'option'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(option.textContent !== undefined) {</span>
        <span class="s1">option.textContent = data.text</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">option.innerText = data.text</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.id !== undefined) {</span>
      <span class="s1">option.value = data.id</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.disabled) {</span>
      <span class="s1">option.disabled = </span><span class="s2">true;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.selected) {</span>
      <span class="s1">option.selected = </span><span class="s2">true;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(data.title) {</span>
      <span class="s1">option.title = data.title</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">$option = $(option)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">normalizedData = </span><span class="s2">this</span><span class="s1">._normalizeItem(data)</span><span class="s2">;</span>
    <span class="s1">normalizedData.element = option</span><span class="s2">;</span>

    <span class="s0">// Override the option's data with the combined data</span>
    <span class="s1">Utils.StoreData(option</span><span class="s2">, </span><span class="s3">'data'</span><span class="s2">, </span><span class="s1">normalizedData)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$option</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.item = </span><span class="s2">function </span><span class="s1">($option) {</span>
    <span class="s2">var </span><span class="s1">data = {}</span><span class="s2">;</span>

    <span class="s1">data = Utils.GetData($option[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(data != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">return </span><span class="s1">data</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">($option.is(</span><span class="s3">'option'</span><span class="s1">)) {</span>
      <span class="s1">data = {</span>
        <span class="s1">id: $option.val()</span><span class="s2">,</span>
        <span class="s1">text: $option.text()</span><span class="s2">,</span>
        <span class="s1">disabled: $option.prop(</span><span class="s3">'disabled'</span><span class="s1">)</span><span class="s2">,</span>
        <span class="s1">selected: $option.prop(</span><span class="s3">'selected'</span><span class="s1">)</span><span class="s2">,</span>
        <span class="s1">title: $option.prop(</span><span class="s3">'title'</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">($option.is(</span><span class="s3">'optgroup'</span><span class="s1">)) {</span>
      <span class="s1">data = {</span>
        <span class="s1">text: $option.prop(</span><span class="s3">'label'</span><span class="s1">)</span><span class="s2">,</span>
        <span class="s1">children: []</span><span class="s2">,</span>
        <span class="s1">title: $option.prop(</span><span class="s3">'title'</span><span class="s1">)</span>
      <span class="s1">}</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">$children = $option.children(</span><span class="s3">'option'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">children = []</span><span class="s2">;</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">c = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">c &lt; $children.length</span><span class="s2">; </span><span class="s1">c++) {</span>
        <span class="s2">var </span><span class="s1">$child = $($children[c])</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">child = </span><span class="s2">this</span><span class="s1">.item($child)</span><span class="s2">;</span>

        <span class="s1">children.push(child)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">data.children = children</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">data = </span><span class="s2">this</span><span class="s1">._normalizeItem(data)</span><span class="s2">;</span>
    <span class="s1">data.element = $option[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">;</span>

    <span class="s1">Utils.StoreData($option[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s2">, </span><span class="s1">data)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">data</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype._normalizeItem = </span><span class="s2">function </span><span class="s1">(item) {</span>
    <span class="s2">if </span><span class="s1">(item !== Object(item)) {</span>
      <span class="s1">item = {</span>
        <span class="s1">id: item</span><span class="s2">,</span>
        <span class="s1">text: item</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">item = $.extend({}</span><span class="s2">, </span><span class="s1">{</span>
      <span class="s1">text: </span><span class="s3">''</span>
    <span class="s1">}</span><span class="s2">, </span><span class="s1">item)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">defaults = {</span>
      <span class="s1">selected: </span><span class="s2">false,</span>
      <span class="s1">disabled: </span><span class="s2">false</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(item.id != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">item.id = item.id.toString()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(item.text != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">item.text = item.text.toString()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(item._resultId == </span><span class="s2">null </span><span class="s1">&amp;&amp; item.id &amp;&amp; </span><span class="s2">this</span><span class="s1">.container != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">item._resultId = </span><span class="s2">this</span><span class="s1">.generateResultId(</span><span class="s2">this</span><span class="s1">.container</span><span class="s2">, </span><span class="s1">item)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">$.extend({}</span><span class="s2">, </span><span class="s1">defaults</span><span class="s2">, </span><span class="s1">item)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectAdapter.prototype.matches = </span><span class="s2">function </span><span class="s1">(params</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">var </span><span class="s1">matcher = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'matcher'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">matcher(params</span><span class="s2">, </span><span class="s1">data)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">SelectAdapter</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/array'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'./select'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span><span class="s2">,</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">(SelectAdapter</span><span class="s2">, </span><span class="s1">Utils</span><span class="s2">, </span><span class="s1">$) {</span>
  <span class="s2">function </span><span class="s1">ArrayAdapter ($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">._dataToConvert = options.get(</span><span class="s3">'data'</span><span class="s1">) || []</span><span class="s2">;</span>

    <span class="s1">ArrayAdapter.__super__.constructor.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(ArrayAdapter</span><span class="s2">, </span><span class="s1">SelectAdapter)</span><span class="s2">;</span>

  <span class="s1">ArrayAdapter.prototype.bind = </span><span class="s2">function </span><span class="s1">(container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s1">ArrayAdapter.__super__.bind.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.addOptions(</span><span class="s2">this</span><span class="s1">.convertToOptions(</span><span class="s2">this</span><span class="s1">._dataToConvert))</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">ArrayAdapter.prototype.select = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">var </span><span class="s1">$option = </span><span class="s2">this</span><span class="s1">.$element.find(</span><span class="s3">'option'</span><span class="s1">).filter(</span><span class="s2">function </span><span class="s1">(i</span><span class="s2">, </span><span class="s1">elm) {</span>
      <span class="s2">return </span><span class="s1">elm.value == data.id.toString()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($option.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s1">$option = </span><span class="s2">this</span><span class="s1">.option(data)</span><span class="s2">;</span>

      <span class="s2">this</span><span class="s1">.addOptions($option)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">ArrayAdapter.__super__.select.call(</span><span class="s2">this, </span><span class="s1">data)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">ArrayAdapter.prototype.convertToOptions = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">var </span><span class="s1">$existing = </span><span class="s2">this</span><span class="s1">.$element.find(</span><span class="s3">'option'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">existingIds = $existing.map(</span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">return </span><span class="s1">self.item($(</span><span class="s2">this</span><span class="s1">)).id</span><span class="s2">;</span>
    <span class="s1">}).get()</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$options = []</span><span class="s2">;</span>

    <span class="s0">// Filter out all items except for the one passed in the argument</span>
    <span class="s2">function </span><span class="s1">onlyItem (item) {</span>
      <span class="s2">return function </span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">$(</span><span class="s2">this</span><span class="s1">).val() == item.id</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; data.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s2">var </span><span class="s1">item = </span><span class="s2">this</span><span class="s1">._normalizeItem(data[d])</span><span class="s2">;</span>

      <span class="s0">// Skip items which were pre-loaded, only merge the data</span>
      <span class="s2">if </span><span class="s1">($.inArray(item.id</span><span class="s2">, </span><span class="s1">existingIds) &gt;= </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">$existingOption = $existing.filter(onlyItem(item))</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">existingData = </span><span class="s2">this</span><span class="s1">.item($existingOption)</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">newData = $.extend(</span><span class="s2">true, </span><span class="s1">{}</span><span class="s2">, </span><span class="s1">item</span><span class="s2">, </span><span class="s1">existingData)</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">$newOption = </span><span class="s2">this</span><span class="s1">.option(newData)</span><span class="s2">;</span>

        <span class="s1">$existingOption.replaceWith($newOption)</span><span class="s2">;</span>

        <span class="s2">continue;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">$option = </span><span class="s2">this</span><span class="s1">.option(item)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(item.children) {</span>
        <span class="s2">var </span><span class="s1">$children = </span><span class="s2">this</span><span class="s1">.convertToOptions(item.children)</span><span class="s2">;</span>

        <span class="s1">Utils.appendMany($option</span><span class="s2">, </span><span class="s1">$children)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">$options.push($option)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">$options</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">ArrayAdapter</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/ajax'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'./array'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span><span class="s2">,</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">(ArrayAdapter</span><span class="s2">, </span><span class="s1">Utils</span><span class="s2">, </span><span class="s1">$) {</span>
  <span class="s2">function </span><span class="s1">AjaxAdapter ($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.ajaxOptions = </span><span class="s2">this</span><span class="s1">._applyDefaults(options.get(</span><span class="s3">'ajax'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.ajaxOptions.processResults != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.processResults = </span><span class="s2">this</span><span class="s1">.ajaxOptions.processResults</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">AjaxAdapter.__super__.constructor.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(AjaxAdapter</span><span class="s2">, </span><span class="s1">ArrayAdapter)</span><span class="s2">;</span>

  <span class="s1">AjaxAdapter.prototype._applyDefaults = </span><span class="s2">function </span><span class="s1">(options) {</span>
    <span class="s2">var </span><span class="s1">defaults = {</span>
      <span class="s1">data: </span><span class="s2">function </span><span class="s1">(params) {</span>
        <span class="s2">return </span><span class="s1">$.extend({}</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">q: params.term</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">,</span>
      <span class="s1">transport: </span><span class="s2">function </span><span class="s1">(params</span><span class="s2">, </span><span class="s1">success</span><span class="s2">, </span><span class="s1">failure) {</span>
        <span class="s2">var </span><span class="s1">$request = $.ajax(params)</span><span class="s2">;</span>

        <span class="s1">$request.then(success)</span><span class="s2">;</span>
        <span class="s1">$request.fail(failure)</span><span class="s2">;</span>

        <span class="s2">return </span><span class="s1">$request</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$.extend({}</span><span class="s2">, </span><span class="s1">defaults</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, true</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AjaxAdapter.prototype.processResults = </span><span class="s2">function </span><span class="s1">(results) {</span>
    <span class="s2">return </span><span class="s1">results</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AjaxAdapter.prototype.query = </span><span class="s2">function </span><span class="s1">(params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">var </span><span class="s1">matches = []</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">._request != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s0">// JSONP requests cannot always be aborted</span>
      <span class="s2">if </span><span class="s1">($.isFunction(</span><span class="s2">this</span><span class="s1">._request.abort)) {</span>
        <span class="s2">this</span><span class="s1">._request.abort()</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">this</span><span class="s1">._request = </span><span class="s2">null;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">options = $.extend({</span>
      <span class="s1">type: </span><span class="s3">'GET'</span>
    <span class="s1">}</span><span class="s2">, this</span><span class="s1">.ajaxOptions)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">options.url === </span><span class="s3">'function'</span><span class="s1">) {</span>
      <span class="s1">options.url = options.url.call(</span><span class="s2">this</span><span class="s1">.$element</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">options.data === </span><span class="s3">'function'</span><span class="s1">) {</span>
      <span class="s1">options.data = options.data.call(</span><span class="s2">this</span><span class="s1">.$element</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">request () {</span>
      <span class="s2">var </span><span class="s1">$request = options.transport(options</span><span class="s2">, function </span><span class="s1">(data) {</span>
        <span class="s2">var </span><span class="s1">results = self.processResults(data</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(self.options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp; window.console &amp;&amp; console.error) {</span>
          <span class="s0">// Check to make sure that the response included a `results` key.</span>
          <span class="s2">if </span><span class="s1">(!results || !results.results || !$.isArray(results.results)) {</span>
            <span class="s1">console.error(</span>
              <span class="s3">'Select2: The AJAX results did not return an array in the ' </span><span class="s1">+</span>
              <span class="s3">'`results` key of the response.'</span>
            <span class="s1">)</span><span class="s2">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s1">callback(results)</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">, function </span><span class="s1">() {</span>
        <span class="s0">// Attempt to detect if a request was aborted</span>
        <span class="s0">// Only works if the transport exposes a status property</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s3">'status' </span><span class="s2">in </span><span class="s1">$request &amp;&amp;</span>
            <span class="s1">($request.status === </span><span class="s6">0 </span><span class="s1">|| $request.status === </span><span class="s3">'0'</span><span class="s1">)) {</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s1">self.trigger(</span><span class="s3">'results:message'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">message: </span><span class="s3">'errorLoading'</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s1">self._request = $request</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.ajaxOptions.delay &amp;&amp; params.term != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">._queryTimeout) {</span>
        <span class="s1">window.clearTimeout(</span><span class="s2">this</span><span class="s1">._queryTimeout)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">this</span><span class="s1">._queryTimeout = window.setTimeout(request</span><span class="s2">, this</span><span class="s1">.ajaxOptions.delay)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">request()</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">AjaxAdapter</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/tags'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">function </span><span class="s1">Tags (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">var </span><span class="s1">tags = options.get(</span><span class="s3">'tags'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">createTag = options.get(</span><span class="s3">'createTag'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(createTag !== undefined) {</span>
      <span class="s2">this</span><span class="s1">.createTag = createTag</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">insertTag = options.get(</span><span class="s3">'insertTag'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(insertTag !== undefined) {</span>
        <span class="s2">this</span><span class="s1">.insertTag = insertTag</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($.isArray(tags)) {</span>
      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">t = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">t &lt; tags.length</span><span class="s2">; </span><span class="s1">t++) {</span>
        <span class="s2">var </span><span class="s1">tag = tags[t]</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">item = </span><span class="s2">this</span><span class="s1">._normalizeItem(tag)</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">$option = </span><span class="s2">this</span><span class="s1">.option(item)</span><span class="s2">;</span>

        <span class="s2">this</span><span class="s1">.$element.append($option)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s1">Tags.prototype.query = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">._removeOldTags()</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(params.term == </span><span class="s2">null </span><span class="s1">|| params.page != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback)</span><span class="s2">;</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">wrapper (obj</span><span class="s2">, </span><span class="s1">child) {</span>
      <span class="s2">var </span><span class="s1">data = obj.results</span><span class="s2">;</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">i = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">i &lt; data.length</span><span class="s2">; </span><span class="s1">i++) {</span>
        <span class="s2">var </span><span class="s1">option = data[i]</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">checkChildren = (</span>
          <span class="s1">option.children != </span><span class="s2">null </span><span class="s1">&amp;&amp;</span>
          <span class="s1">!wrapper({</span>
            <span class="s1">results: option.children</span>
          <span class="s1">}</span><span class="s2">, true</span><span class="s1">)</span>
        <span class="s1">)</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">optionText = (option.text || </span><span class="s3">''</span><span class="s1">).toUpperCase()</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">paramsTerm = (params.term || </span><span class="s3">''</span><span class="s1">).toUpperCase()</span><span class="s2">;</span>

        <span class="s2">var </span><span class="s1">checkText = optionText === paramsTerm</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(checkText || checkChildren) {</span>
          <span class="s2">if </span><span class="s1">(child) {</span>
            <span class="s2">return false;</span>
          <span class="s1">}</span>

          <span class="s1">obj.data = data</span><span class="s2">;</span>
          <span class="s1">callback(obj)</span><span class="s2">;</span>

          <span class="s2">return;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(child) {</span>
        <span class="s2">return true;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">tag = self.createTag(params)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(tag != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">$option = self.option(tag)</span><span class="s2">;</span>
        <span class="s1">$option.attr(</span><span class="s3">'data-select2-tag'</span><span class="s2">, true</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">self.addOptions([$option])</span><span class="s2">;</span>

        <span class="s1">self.insertTag(data</span><span class="s2">, </span><span class="s1">tag)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">obj.results = data</span><span class="s2">;</span>

      <span class="s1">callback(obj)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">wrapper)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Tags.prototype.createTag = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">params) {</span>
    <span class="s2">var </span><span class="s1">term = $.trim(params.term)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(term === </span><span class="s3">''</span><span class="s1">) {</span>
      <span class="s2">return null;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">{</span>
      <span class="s1">id: term</span><span class="s2">,</span>
      <span class="s1">text: term</span>
    <span class="s1">}</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Tags.prototype.insertTag = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">data</span><span class="s2">, </span><span class="s1">tag) {</span>
    <span class="s1">data.unshift(tag)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Tags.prototype._removeOldTags = </span><span class="s2">function </span><span class="s1">(_) {</span>
    <span class="s2">var </span><span class="s1">$options = </span><span class="s2">this</span><span class="s1">.$element.find(</span><span class="s3">'option[data-select2-tag]'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$options.each(</span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.selected) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">$(</span><span class="s2">this</span><span class="s1">).remove()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Tags</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/tokenizer'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">function </span><span class="s1">Tokenizer (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">var </span><span class="s1">tokenizer = options.get(</span><span class="s3">'tokenizer'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(tokenizer !== undefined) {</span>
      <span class="s2">this</span><span class="s1">.tokenizer = tokenizer</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Tokenizer.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$search =  container.dropdown.$search || container.selection.$search ||</span>
      <span class="s1">$container.find(</span><span class="s3">'.select2-search__field'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Tokenizer.prototype.query = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">function </span><span class="s1">createAndSelect (data) {</span>
      <span class="s0">// Normalize the data object so we can use it for checks</span>
      <span class="s2">var </span><span class="s1">item = self._normalizeItem(data)</span><span class="s2">;</span>

      <span class="s0">// Check if the data object already exists as a tag</span>
      <span class="s0">// Select it if it doesn't</span>
      <span class="s2">var </span><span class="s1">$existingOptions = self.$element.find(</span><span class="s3">'option'</span><span class="s1">).filter(</span><span class="s2">function </span><span class="s1">() {</span>
        <span class="s2">return </span><span class="s1">$(</span><span class="s2">this</span><span class="s1">).val() === item.id</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s0">// If an existing option wasn't found for it, create the option</span>
      <span class="s2">if </span><span class="s1">(!$existingOptions.length) {</span>
        <span class="s2">var </span><span class="s1">$option = self.option(item)</span><span class="s2">;</span>
        <span class="s1">$option.attr(</span><span class="s3">'data-select2-tag'</span><span class="s2">, true</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">self._removeOldTags()</span><span class="s2">;</span>
        <span class="s1">self.addOptions([$option])</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s0">// Select the item, now that we know there is an option for it</span>
      <span class="s1">select(item)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">select (data) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'select'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">data: data</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">params.term = params.term || </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">tokenData = </span><span class="s2">this</span><span class="s1">.tokenizer(params</span><span class="s2">, this</span><span class="s1">.options</span><span class="s2">, </span><span class="s1">createAndSelect)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(tokenData.term !== params.term) {</span>
      <span class="s0">// Replace the search term if we have the search box</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$search.length) {</span>
        <span class="s2">this</span><span class="s1">.$search.val(tokenData.term)</span><span class="s2">;</span>
        <span class="s2">this</span><span class="s1">.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">params.term = tokenData.term</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Tokenizer.prototype.tokenizer = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">var </span><span class="s1">separators = options.get(</span><span class="s3">'tokenSeparators'</span><span class="s1">) || []</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">term = params.term</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">i = </span><span class="s6">0</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">createTag = </span><span class="s2">this</span><span class="s1">.createTag || </span><span class="s2">function </span><span class="s1">(params) {</span>
      <span class="s2">return </span><span class="s1">{</span>
        <span class="s1">id: params.term</span><span class="s2">,</span>
        <span class="s1">text: params.term</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">while </span><span class="s1">(i &lt; term.length) {</span>
      <span class="s2">var </span><span class="s1">termChar = term[i]</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">($.inArray(termChar</span><span class="s2">, </span><span class="s1">separators) === -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s1">i++</span><span class="s2">;</span>

        <span class="s2">continue;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">part = term.substr(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">i)</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">partParams = $.extend({}</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">term: part</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">data = createTag(partParams)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(data == </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">i++</span><span class="s2">;</span>
        <span class="s2">continue;</span>
      <span class="s1">}</span>

      <span class="s1">callback(data)</span><span class="s2">;</span>

      <span class="s0">// Reset the term to not include the tokenized portion</span>
      <span class="s1">term = term.substr(i + </span><span class="s6">1</span><span class="s1">) || </span><span class="s3">''</span><span class="s2">;</span>
      <span class="s1">i = </span><span class="s6">0</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">{</span>
      <span class="s1">term: term</span>
    <span class="s1">}</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Tokenizer</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/minimumInputLength'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">MinimumInputLength (decorated</span><span class="s2">, </span><span class="s1">$e</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.minimumInputLength = options.get(</span><span class="s3">'minimumInputLength'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$e</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">MinimumInputLength.prototype.query = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s1">params.term = params.term || </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(params.term.length &lt; </span><span class="s2">this</span><span class="s1">.minimumInputLength) {</span>
      <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'results:message'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">message: </span><span class="s3">'inputTooShort'</span><span class="s2">,</span>
        <span class="s1">args: {</span>
          <span class="s1">minimum: </span><span class="s2">this</span><span class="s1">.minimumInputLength</span><span class="s2">,</span>
          <span class="s1">input: params.term</span><span class="s2">,</span>
          <span class="s1">params: params</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">MinimumInputLength</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/maximumInputLength'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">MaximumInputLength (decorated</span><span class="s2">, </span><span class="s1">$e</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.maximumInputLength = options.get(</span><span class="s3">'maximumInputLength'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$e</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">MaximumInputLength.prototype.query = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s1">params.term = params.term || </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.maximumInputLength &gt; </span><span class="s6">0 </span><span class="s1">&amp;&amp;</span>
        <span class="s1">params.term.length &gt; </span><span class="s2">this</span><span class="s1">.maximumInputLength) {</span>
      <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'results:message'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">message: </span><span class="s3">'inputTooLong'</span><span class="s2">,</span>
        <span class="s1">args: {</span>
          <span class="s1">maximum: </span><span class="s2">this</span><span class="s1">.maximumInputLength</span><span class="s2">,</span>
          <span class="s1">input: params.term</span><span class="s2">,</span>
          <span class="s1">params: params</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">MaximumInputLength</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/data/maximumSelectionLength'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">(){</span>
  <span class="s2">function </span><span class="s1">MaximumSelectionLength (decorated</span><span class="s2">, </span><span class="s1">$e</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.maximumSelectionLength = options.get(</span><span class="s3">'maximumSelectionLength'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$e</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">MaximumSelectionLength.prototype.bind =</span>
    <span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
      <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

      <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

      <span class="s1">container.on(</span><span class="s3">'select'</span><span class="s2">, function </span><span class="s1">() {</span>
        <span class="s1">self._checkIfMaximumSelected()</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">MaximumSelectionLength.prototype.query =</span>
    <span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback) {</span>
      <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

      <span class="s2">this</span><span class="s1">._checkIfMaximumSelected(</span><span class="s2">function </span><span class="s1">() {</span>
        <span class="s1">decorated.call(self</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback)</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">MaximumSelectionLength.prototype._checkIfMaximumSelected =</span>
    <span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">successCallback) {</span>
      <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

      <span class="s2">this</span><span class="s1">.current(</span><span class="s2">function </span><span class="s1">(currentData) {</span>
        <span class="s2">var </span><span class="s1">count = currentData != </span><span class="s2">null </span><span class="s1">? currentData.length : </span><span class="s6">0</span><span class="s2">;</span>
        <span class="s2">if </span><span class="s1">(self.maximumSelectionLength &gt; </span><span class="s6">0 </span><span class="s1">&amp;&amp;</span>
          <span class="s1">count &gt;= self.maximumSelectionLength) {</span>
          <span class="s1">self.trigger(</span><span class="s3">'results:message'</span><span class="s2">, </span><span class="s1">{</span>
            <span class="s1">message: </span><span class="s3">'maximumSelected'</span><span class="s2">,</span>
            <span class="s1">args: {</span>
              <span class="s1">maximum: self.maximumSelectionLength</span>
            <span class="s1">}</span>
          <span class="s1">})</span><span class="s2">;</span>
          <span class="s2">return;</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(successCallback) {</span>
          <span class="s1">successCallback()</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">MaximumSelectionLength</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">Dropdown ($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.$element = $element</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.options = options</span><span class="s2">;</span>

    <span class="s1">Dropdown.__super__.constructor.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Utils.Extend(Dropdown</span><span class="s2">, </span><span class="s1">Utils.Observable)</span><span class="s2">;</span>

  <span class="s1">Dropdown.prototype.render = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$dropdown = $(</span>
      <span class="s3">'&lt;span class=&quot;select2-dropdown&quot;&gt;' </span><span class="s1">+</span>
        <span class="s3">'&lt;span class=&quot;select2-results&quot;&gt;&lt;/span&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/span&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$dropdown.attr(</span><span class="s3">'dir'</span><span class="s2">, this</span><span class="s1">.options.get(</span><span class="s3">'dir'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$dropdown = $dropdown</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$dropdown</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Dropdown.prototype.bind = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s0">// Should be implemented in subclasses</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Dropdown.prototype.position = </span><span class="s2">function </span><span class="s1">($dropdown</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s0">// Should be implemented in subclasses</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Dropdown.prototype.destroy = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s0">// Remove the dropdown from the DOM</span>
    <span class="s2">this</span><span class="s1">.$dropdown.remove()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Dropdown</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/search'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">Search () { }</span>

  <span class="s1">Search.prototype.render = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">var </span><span class="s1">$rendered = decorated.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$search = $(</span>
      <span class="s3">'&lt;span class=&quot;select2-search select2-search--dropdown&quot;&gt;' </span><span class="s1">+</span>
        <span class="s3">'&lt;input class=&quot;select2-search__field&quot; type=&quot;search&quot; tabindex=&quot;-1&quot;' </span><span class="s1">+</span>
        <span class="s3">' autocomplete=&quot;off&quot; autocorrect=&quot;off&quot; autocapitalize=&quot;none&quot;' </span><span class="s1">+</span>
        <span class="s3">' spellcheck=&quot;false&quot; role=&quot;searchbox&quot; aria-autocomplete=&quot;list&quot; /&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/span&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$searchContainer = $search</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$search = $search.find(</span><span class="s3">'input'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$rendered.prepend($search)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$rendered</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">var </span><span class="s1">resultsId = container.id + </span><span class="s3">'-results'</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$search.on(</span><span class="s3">'keydown'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'keypress'</span><span class="s2">, </span><span class="s1">evt)</span><span class="s2">;</span>

      <span class="s1">self._keyUpPrevented = evt.isDefaultPrevented()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s0">// Workaround for browsers which do not support the `input` event</span>
    <span class="s0">// This will prevent double-triggering of events for browsers which support</span>
    <span class="s0">// both the `keyup` and `input` events.</span>
    <span class="s2">this</span><span class="s1">.$search.on(</span><span class="s3">'input'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s0">// Unbind the duplicated `keyup` event</span>
      <span class="s1">$(</span><span class="s2">this</span><span class="s1">).off(</span><span class="s3">'keyup'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$search.on(</span><span class="s3">'keyup input'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.handleSearch(evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'open'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$search.attr(</span><span class="s3">'tabindex'</span><span class="s2">, </span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$search.attr(</span><span class="s3">'aria-controls'</span><span class="s2">, </span><span class="s1">resultsId)</span><span class="s2">;</span>

      <span class="s1">self.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">window.setTimeout(</span><span class="s2">function </span><span class="s1">() {</span>
        <span class="s1">self.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">, </span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'close'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$search.attr(</span><span class="s3">'tabindex'</span><span class="s2">, </span><span class="s1">-</span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$search.removeAttr(</span><span class="s3">'aria-controls'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$search.removeAttr(</span><span class="s3">'aria-activedescendant'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s1">self.$search.val(</span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">self.$search.trigger(</span><span class="s3">'blur'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'focus'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s2">if </span><span class="s1">(!container.isOpen()) {</span>
        <span class="s1">self.$search.trigger(</span><span class="s3">'focus'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:all'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s2">if </span><span class="s1">(params.query.term == </span><span class="s2">null </span><span class="s1">|| params.query.term === </span><span class="s3">''</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">showSearch = self.showSearch(params)</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(showSearch) {</span>
          <span class="s1">self.$searchContainer.removeClass(</span><span class="s3">'select2-search--hide'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
          <span class="s1">self.$searchContainer.addClass(</span><span class="s3">'select2-search--hide'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:focus'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s2">if </span><span class="s1">(params.data._resultId) {</span>
        <span class="s1">self.$search.attr(</span><span class="s3">'aria-activedescendant'</span><span class="s2">, </span><span class="s1">params.data._resultId)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">self.$search.removeAttr(</span><span class="s3">'aria-activedescendant'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.handleSearch = </span><span class="s2">function </span><span class="s1">(evt) {</span>
    <span class="s2">if </span><span class="s1">(!</span><span class="s2">this</span><span class="s1">._keyUpPrevented) {</span>
      <span class="s2">var </span><span class="s1">input = </span><span class="s2">this</span><span class="s1">.$search.val()</span><span class="s2">;</span>

      <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'query'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">term: input</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">._keyUpPrevented = </span><span class="s2">false;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Search.prototype.showSearch = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">params) {</span>
    <span class="s2">return true;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Search</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/hidePlaceholder'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">HidePlaceholder (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">dataAdapter) {</span>
    <span class="s2">this</span><span class="s1">.placeholder = </span><span class="s2">this</span><span class="s1">.normalizePlaceholder(options.get(</span><span class="s3">'placeholder'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">dataAdapter)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">HidePlaceholder.prototype.append = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s1">data.results = </span><span class="s2">this</span><span class="s1">.removePlaceholder(data.results)</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">data)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">HidePlaceholder.prototype.normalizePlaceholder = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">placeholder) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">placeholder === </span><span class="s3">'string'</span><span class="s1">) {</span>
      <span class="s1">placeholder = {</span>
        <span class="s1">id: </span><span class="s3">''</span><span class="s2">,</span>
        <span class="s1">text: placeholder</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">placeholder</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">HidePlaceholder.prototype.removePlaceholder = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">var </span><span class="s1">modifiedData = data.slice(</span><span class="s6">0</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = data.length - </span><span class="s6">1</span><span class="s2">; </span><span class="s1">d &gt;= </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d--) {</span>
      <span class="s2">var </span><span class="s1">item = data[d]</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.placeholder.id === item.id) {</span>
        <span class="s1">modifiedData.splice(d</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">modifiedData</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">HidePlaceholder</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/infiniteScroll'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">function </span><span class="s1">InfiniteScroll (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">dataAdapter) {</span>
    <span class="s2">this</span><span class="s1">.lastParams = {}</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">dataAdapter)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$loadingMore = </span><span class="s2">this</span><span class="s1">.createLoadingMore()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.loading = </span><span class="s2">false;</span>
  <span class="s1">}</span>

  <span class="s1">InfiniteScroll.prototype.append = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">this</span><span class="s1">.$loadingMore.remove()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.loading = </span><span class="s2">false;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">data)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.showLoadingMore(data)) {</span>
      <span class="s2">this</span><span class="s1">.$results.append(</span><span class="s2">this</span><span class="s1">.$loadingMore)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.loadMoreIfNeeded()</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InfiniteScroll.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'query'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.lastParams = params</span><span class="s2">;</span>
      <span class="s1">self.loading = </span><span class="s2">true;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'query:append'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.lastParams = params</span><span class="s2">;</span>
      <span class="s1">self.loading = </span><span class="s2">true;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$results.on(</span><span class="s3">'scroll'</span><span class="s2">, this</span><span class="s1">.loadMoreIfNeeded.bind(</span><span class="s2">this</span><span class="s1">))</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InfiniteScroll.prototype.loadMoreIfNeeded = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">isLoadMoreVisible = $.contains(</span>
      <span class="s1">document.documentElement</span><span class="s2">,</span>
      <span class="s2">this</span><span class="s1">.$loadingMore[</span><span class="s6">0</span><span class="s1">]</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.loading || !isLoadMoreVisible) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">currentOffset = </span><span class="s2">this</span><span class="s1">.$results.offset().top +</span>
      <span class="s2">this</span><span class="s1">.$results.outerHeight(</span><span class="s2">false</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">loadingMoreOffset = </span><span class="s2">this</span><span class="s1">.$loadingMore.offset().top +</span>
      <span class="s2">this</span><span class="s1">.$loadingMore.outerHeight(</span><span class="s2">false</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(currentOffset + </span><span class="s6">50 </span><span class="s1">&gt;= loadingMoreOffset) {</span>
      <span class="s2">this</span><span class="s1">.loadMore()</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InfiniteScroll.prototype.loadMore = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.loading = </span><span class="s2">true;</span>

    <span class="s2">var </span><span class="s1">params = $.extend({}</span><span class="s2">, </span><span class="s1">{page: </span><span class="s6">1</span><span class="s1">}</span><span class="s2">, this</span><span class="s1">.lastParams)</span><span class="s2">;</span>

    <span class="s1">params.page++</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'query:append'</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InfiniteScroll.prototype.showLoadingMore = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">return </span><span class="s1">data.pagination &amp;&amp; data.pagination.more</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InfiniteScroll.prototype.createLoadingMore = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$option = $(</span>
      <span class="s3">'&lt;li ' </span><span class="s1">+</span>
      <span class="s3">'class=&quot;select2-results__option select2-results__option--load-more&quot;' </span><span class="s1">+</span>
      <span class="s3">'role=&quot;option&quot; aria-disabled=&quot;true&quot;&gt;&lt;/li&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">message = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'translations'</span><span class="s1">).get(</span><span class="s3">'loadingMore'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$option.html(message(</span><span class="s2">this</span><span class="s1">.lastParams))</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$option</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">InfiniteScroll</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/attachBody'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">AttachBody (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">.$dropdownParent = $(options.get(</span><span class="s3">'dropdownParent'</span><span class="s1">) || document.body)</span><span class="s2">;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">AttachBody.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'open'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self._showDropdown()</span><span class="s2">;</span>
      <span class="s1">self._attachPositioningHandler(container)</span><span class="s2">;</span>

      <span class="s0">// Must bind after the results handlers to ensure correct sizing</span>
      <span class="s1">self._bindContainerResultHandlers(container)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'close'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self._hideDropdown()</span><span class="s2">;</span>
      <span class="s1">self._detachPositioningHandler(container)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$dropdownContainer.on(</span><span class="s3">'mousedown'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">evt.stopPropagation()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype.destroy = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s1">decorated.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$dropdownContainer.remove()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype.position = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">$dropdown</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s0">// Clone all of the container classes</span>
    <span class="s1">$dropdown.attr(</span><span class="s3">'class'</span><span class="s2">, </span><span class="s1">$container.attr(</span><span class="s3">'class'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s1">$dropdown.removeClass(</span><span class="s3">'select2'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$dropdown.addClass(</span><span class="s3">'select2-container--open'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$dropdown.css({</span>
      <span class="s1">position: </span><span class="s3">'absolute'</span><span class="s2">,</span>
      <span class="s1">top: -</span><span class="s6">999999</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$container = $container</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype.render = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">var </span><span class="s1">$container = $(</span><span class="s3">'&lt;span&gt;&lt;/span&gt;'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$dropdown = decorated.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$container.append($dropdown)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$dropdownContainer = $container</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$container</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype._hideDropdown = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">this</span><span class="s1">.$dropdownContainer.detach()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype._bindContainerResultHandlers =</span>
      <span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container) {</span>

    <span class="s0">// These should only be bound once</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">._containerResultsHandlersBound) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">container.on(</span><span class="s3">'results:all'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self._positionDropdown()</span><span class="s2">;</span>
      <span class="s1">self._resizeDropdown()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:append'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self._positionDropdown()</span><span class="s2">;</span>
      <span class="s1">self._resizeDropdown()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'results:message'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self._positionDropdown()</span><span class="s2">;</span>
      <span class="s1">self._resizeDropdown()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'select'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self._positionDropdown()</span><span class="s2">;</span>
      <span class="s1">self._resizeDropdown()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'unselect'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self._positionDropdown()</span><span class="s2">;</span>
      <span class="s1">self._resizeDropdown()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">._containerResultsHandlersBound = </span><span class="s2">true;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype._attachPositioningHandler =</span>
      <span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">var </span><span class="s1">scrollEvent = </span><span class="s3">'scroll.select2.' </span><span class="s1">+ container.id</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">resizeEvent = </span><span class="s3">'resize.select2.' </span><span class="s1">+ container.id</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">orientationEvent = </span><span class="s3">'orientationchange.select2.' </span><span class="s1">+ container.id</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$watchers = </span><span class="s2">this</span><span class="s1">.$container.parents().filter(Utils.hasScroll)</span><span class="s2">;</span>
    <span class="s1">$watchers.each(</span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s1">Utils.StoreData(</span><span class="s2">this, </span><span class="s3">'select2-scroll-position'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">x: $(</span><span class="s2">this</span><span class="s1">).scrollLeft()</span><span class="s2">,</span>
        <span class="s1">y: $(</span><span class="s2">this</span><span class="s1">).scrollTop()</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">$watchers.on(scrollEvent</span><span class="s2">, function </span><span class="s1">(ev) {</span>
      <span class="s2">var </span><span class="s1">position = Utils.GetData(</span><span class="s2">this, </span><span class="s3">'select2-scroll-position'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">$(</span><span class="s2">this</span><span class="s1">).scrollTop(position.y)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">$(window).on(scrollEvent + </span><span class="s3">' ' </span><span class="s1">+ resizeEvent + </span><span class="s3">' ' </span><span class="s1">+ orientationEvent</span><span class="s2">,</span>
      <span class="s2">function </span><span class="s1">(e) {</span>
      <span class="s1">self._positionDropdown()</span><span class="s2">;</span>
      <span class="s1">self._resizeDropdown()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype._detachPositioningHandler =</span>
      <span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container) {</span>
    <span class="s2">var </span><span class="s1">scrollEvent = </span><span class="s3">'scroll.select2.' </span><span class="s1">+ container.id</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">resizeEvent = </span><span class="s3">'resize.select2.' </span><span class="s1">+ container.id</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">orientationEvent = </span><span class="s3">'orientationchange.select2.' </span><span class="s1">+ container.id</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$watchers = </span><span class="s2">this</span><span class="s1">.$container.parents().filter(Utils.hasScroll)</span><span class="s2">;</span>
    <span class="s1">$watchers.off(scrollEvent)</span><span class="s2">;</span>

    <span class="s1">$(window).off(scrollEvent + </span><span class="s3">' ' </span><span class="s1">+ resizeEvent + </span><span class="s3">' ' </span><span class="s1">+ orientationEvent)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype._positionDropdown = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$window = $(window)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">isCurrentlyAbove = </span><span class="s2">this</span><span class="s1">.$dropdown.hasClass(</span><span class="s3">'select2-dropdown--above'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">isCurrentlyBelow = </span><span class="s2">this</span><span class="s1">.$dropdown.hasClass(</span><span class="s3">'select2-dropdown--below'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">newDirection = </span><span class="s2">null;</span>

    <span class="s2">var </span><span class="s1">offset = </span><span class="s2">this</span><span class="s1">.$container.offset()</span><span class="s2">;</span>

    <span class="s1">offset.bottom = offset.top + </span><span class="s2">this</span><span class="s1">.$container.outerHeight(</span><span class="s2">false</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">container = {</span>
      <span class="s1">height: </span><span class="s2">this</span><span class="s1">.$container.outerHeight(</span><span class="s2">false</span><span class="s1">)</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s1">container.top = offset.top</span><span class="s2">;</span>
    <span class="s1">container.bottom = offset.top + container.height</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">dropdown = {</span>
      <span class="s1">height: </span><span class="s2">this</span><span class="s1">.$dropdown.outerHeight(</span><span class="s2">false</span><span class="s1">)</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">viewport = {</span>
      <span class="s1">top: $window.scrollTop()</span><span class="s2">,</span>
      <span class="s1">bottom: $window.scrollTop() + $window.height()</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">enoughRoomAbove = viewport.top &lt; (offset.top - dropdown.height)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">enoughRoomBelow = viewport.bottom &gt; (offset.bottom + dropdown.height)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">css = {</span>
      <span class="s1">left: offset.left</span><span class="s2">,</span>
      <span class="s1">top: container.bottom</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s0">// Determine what the parent element is to use for calculating the offset</span>
    <span class="s2">var </span><span class="s1">$offsetParent = </span><span class="s2">this</span><span class="s1">.$dropdownParent</span><span class="s2">;</span>

    <span class="s0">// For statically positioned elements, we need to get the element</span>
    <span class="s0">// that is determining the offset</span>
    <span class="s2">if </span><span class="s1">($offsetParent.css(</span><span class="s3">'position'</span><span class="s1">) === </span><span class="s3">'static'</span><span class="s1">) {</span>
      <span class="s1">$offsetParent = $offsetParent.offsetParent()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">parentOffset = {</span>
      <span class="s1">top: </span><span class="s6">0</span><span class="s2">,</span>
      <span class="s1">left: </span><span class="s6">0</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span>
      <span class="s1">$.contains(document.body</span><span class="s2">, </span><span class="s1">$offsetParent[</span><span class="s6">0</span><span class="s1">]) ||</span>
      <span class="s1">$offsetParent[</span><span class="s6">0</span><span class="s1">].isConnected</span>
      <span class="s1">) {</span>
      <span class="s1">parentOffset = $offsetParent.offset()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">css.top -= parentOffset.top</span><span class="s2">;</span>
    <span class="s1">css.left -= parentOffset.left</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(!isCurrentlyAbove &amp;&amp; !isCurrentlyBelow) {</span>
      <span class="s1">newDirection = </span><span class="s3">'below'</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(!enoughRoomBelow &amp;&amp; enoughRoomAbove &amp;&amp; !isCurrentlyAbove) {</span>
      <span class="s1">newDirection = </span><span class="s3">'above'</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(!enoughRoomAbove &amp;&amp; enoughRoomBelow &amp;&amp; isCurrentlyAbove) {</span>
      <span class="s1">newDirection = </span><span class="s3">'below'</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(newDirection == </span><span class="s3">'above' </span><span class="s1">||</span>
      <span class="s1">(isCurrentlyAbove &amp;&amp; newDirection !== </span><span class="s3">'below'</span><span class="s1">)) {</span>
      <span class="s1">css.top = container.top - parentOffset.top - dropdown.height</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(newDirection != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.$dropdown</span>
        <span class="s1">.removeClass(</span><span class="s3">'select2-dropdown--below select2-dropdown--above'</span><span class="s1">)</span>
        <span class="s1">.addClass(</span><span class="s3">'select2-dropdown--' </span><span class="s1">+ newDirection)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$container</span>
        <span class="s1">.removeClass(</span><span class="s3">'select2-container--below select2-container--above'</span><span class="s1">)</span>
        <span class="s1">.addClass(</span><span class="s3">'select2-container--' </span><span class="s1">+ newDirection)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$dropdownContainer.css(css)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype._resizeDropdown = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">css = {</span>
      <span class="s1">width: </span><span class="s2">this</span><span class="s1">.$container.outerWidth(</span><span class="s2">false</span><span class="s1">) + </span><span class="s3">'px'</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'dropdownAutoWidth'</span><span class="s1">)) {</span>
      <span class="s1">css.minWidth = css.width</span><span class="s2">;</span>
      <span class="s1">css.position = </span><span class="s3">'relative'</span><span class="s2">;</span>
      <span class="s1">css.width = </span><span class="s3">'auto'</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$dropdown.css(css)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">AttachBody.prototype._showDropdown = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">this</span><span class="s1">.$dropdownContainer.appendTo(</span><span class="s2">this</span><span class="s1">.$dropdownParent)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">._positionDropdown()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._resizeDropdown()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">AttachBody</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/minimumResultsForSearch'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">countResults (data) {</span>
    <span class="s2">var </span><span class="s1">count = </span><span class="s6">0</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; data.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s2">var </span><span class="s1">item = data[d]</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(item.children) {</span>
        <span class="s1">count += countResults(item.children)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">count++</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">count</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s1">MinimumResultsForSearch (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">dataAdapter) {</span>
    <span class="s2">this</span><span class="s1">.minimumResultsForSearch = options.get(</span><span class="s3">'minimumResultsForSearch'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.minimumResultsForSearch &lt; </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.minimumResultsForSearch = Infinity</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options</span><span class="s2">, </span><span class="s1">dataAdapter)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">MinimumResultsForSearch.prototype.showSearch = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">params) {</span>
    <span class="s2">if </span><span class="s1">(countResults(params.data.results) &lt; </span><span class="s2">this</span><span class="s1">.minimumResultsForSearch) {</span>
      <span class="s2">return false;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">params)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">MinimumResultsForSearch</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/selectOnClose'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">(Utils) {</span>
  <span class="s2">function </span><span class="s1">SelectOnClose () { }</span>

  <span class="s1">SelectOnClose.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'close'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self._handleSelectOnClose(params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">SelectOnClose.prototype._handleSelectOnClose = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">params) {</span>
    <span class="s2">if </span><span class="s1">(params &amp;&amp; params.originalSelect2Event != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">var </span><span class="s1">event = params.originalSelect2Event</span><span class="s2">;</span>

      <span class="s0">// Don't select an item if the close event was triggered from a select or</span>
      <span class="s0">// unselect event</span>
      <span class="s2">if </span><span class="s1">(event._type === </span><span class="s3">'select' </span><span class="s1">|| event._type === </span><span class="s3">'unselect'</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">$highlightedResults = </span><span class="s2">this</span><span class="s1">.getHighlightedResults()</span><span class="s2">;</span>

    <span class="s0">// Only select highlighted results</span>
    <span class="s2">if </span><span class="s1">($highlightedResults.length &lt; </span><span class="s6">1</span><span class="s1">) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">data = Utils.GetData($highlightedResults[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s0">// Don't re-select already selected resulte</span>
    <span class="s2">if </span><span class="s1">(</span>
      <span class="s1">(data.element != </span><span class="s2">null </span><span class="s1">&amp;&amp; data.element.selected) ||</span>
      <span class="s1">(data.element == </span><span class="s2">null </span><span class="s1">&amp;&amp; data.selected)</span>
    <span class="s1">) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'select'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">data: data</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">SelectOnClose</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/closeOnSelect'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">CloseOnSelect () { }</span>

  <span class="s1">CloseOnSelect.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'select'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self._selectTriggered(evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s1">container.on(</span><span class="s3">'unselect'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self._selectTriggered(evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">CloseOnSelect.prototype._selectTriggered = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">evt) {</span>
    <span class="s2">var </span><span class="s1">originalEvent = evt.originalEvent</span><span class="s2">;</span>

    <span class="s0">// Don't close if the control key is being held</span>
    <span class="s2">if </span><span class="s1">(originalEvent &amp;&amp; (originalEvent.ctrlKey || originalEvent.metaKey)) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'close'</span><span class="s2">, </span><span class="s1">{</span>
      <span class="s1">originalEvent: originalEvent</span><span class="s2">,</span>
      <span class="s1">originalSelect2Event: evt</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">CloseOnSelect</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/i18n/en'</span><span class="s2">,</span><span class="s1">[]</span><span class="s2">,function </span><span class="s1">() {</span>
  <span class="s0">// English</span>
  <span class="s2">return </span><span class="s1">{</span>
    <span class="s1">errorLoading: </span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">return </span><span class="s3">'The results could not be loaded.'</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">,</span>
    <span class="s1">inputTooLong: </span><span class="s2">function </span><span class="s1">(args) {</span>
      <span class="s2">var </span><span class="s1">overChars = args.input.length - args.maximum</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">message = </span><span class="s3">'Please delete ' </span><span class="s1">+ overChars + </span><span class="s3">' character'</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(overChars != </span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s1">message += </span><span class="s3">'s'</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return </span><span class="s1">message</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">,</span>
    <span class="s1">inputTooShort: </span><span class="s2">function </span><span class="s1">(args) {</span>
      <span class="s2">var </span><span class="s1">remainingChars = args.minimum - args.input.length</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">message = </span><span class="s3">'Please enter ' </span><span class="s1">+ remainingChars + </span><span class="s3">' or more characters'</span><span class="s2">;</span>

      <span class="s2">return </span><span class="s1">message</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">,</span>
    <span class="s1">loadingMore: </span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">return </span><span class="s3">'Loading more results'</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">,</span>
    <span class="s1">maximumSelected: </span><span class="s2">function </span><span class="s1">(args) {</span>
      <span class="s2">var </span><span class="s1">message = </span><span class="s3">'You can only select ' </span><span class="s1">+ args.maximum + </span><span class="s3">' item'</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(args.maximum != </span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s1">message += </span><span class="s3">'s'</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return </span><span class="s1">message</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">,</span>
    <span class="s1">noResults: </span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">return </span><span class="s3">'No results found'</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">,</span>
    <span class="s1">searching: </span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">return </span><span class="s3">'Searching'</span><span class="s2">;</span>
    <span class="s1">}</span><span class="s2">,</span>
    <span class="s1">removeAllItems: </span><span class="s2">function </span><span class="s1">() {</span>
      <span class="s2">return </span><span class="s3">'Remove all items'</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/defaults'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'require'</span><span class="s2">,</span>

  <span class="s3">'./results'</span><span class="s2">,</span>

  <span class="s3">'./selection/single'</span><span class="s2">,</span>
  <span class="s3">'./selection/multiple'</span><span class="s2">,</span>
  <span class="s3">'./selection/placeholder'</span><span class="s2">,</span>
  <span class="s3">'./selection/allowClear'</span><span class="s2">,</span>
  <span class="s3">'./selection/search'</span><span class="s2">,</span>
  <span class="s3">'./selection/eventRelay'</span><span class="s2">,</span>

  <span class="s3">'./utils'</span><span class="s2">,</span>
  <span class="s3">'./translation'</span><span class="s2">,</span>
  <span class="s3">'./diacritics'</span><span class="s2">,</span>

  <span class="s3">'./data/select'</span><span class="s2">,</span>
  <span class="s3">'./data/array'</span><span class="s2">,</span>
  <span class="s3">'./data/ajax'</span><span class="s2">,</span>
  <span class="s3">'./data/tags'</span><span class="s2">,</span>
  <span class="s3">'./data/tokenizer'</span><span class="s2">,</span>
  <span class="s3">'./data/minimumInputLength'</span><span class="s2">,</span>
  <span class="s3">'./data/maximumInputLength'</span><span class="s2">,</span>
  <span class="s3">'./data/maximumSelectionLength'</span><span class="s2">,</span>

  <span class="s3">'./dropdown'</span><span class="s2">,</span>
  <span class="s3">'./dropdown/search'</span><span class="s2">,</span>
  <span class="s3">'./dropdown/hidePlaceholder'</span><span class="s2">,</span>
  <span class="s3">'./dropdown/infiniteScroll'</span><span class="s2">,</span>
  <span class="s3">'./dropdown/attachBody'</span><span class="s2">,</span>
  <span class="s3">'./dropdown/minimumResultsForSearch'</span><span class="s2">,</span>
  <span class="s3">'./dropdown/selectOnClose'</span><span class="s2">,</span>
  <span class="s3">'./dropdown/closeOnSelect'</span><span class="s2">,</span>

  <span class="s3">'./i18n/en'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">require</span><span class="s2">,</span>

             <span class="s1">ResultsList</span><span class="s2">,</span>

             <span class="s1">SingleSelection</span><span class="s2">, </span><span class="s1">MultipleSelection</span><span class="s2">, </span><span class="s1">Placeholder</span><span class="s2">, </span><span class="s1">AllowClear</span><span class="s2">,</span>
             <span class="s1">SelectionSearch</span><span class="s2">, </span><span class="s1">EventRelay</span><span class="s2">,</span>

             <span class="s1">Utils</span><span class="s2">, </span><span class="s1">Translation</span><span class="s2">, </span><span class="s1">DIACRITICS</span><span class="s2">,</span>

             <span class="s1">SelectData</span><span class="s2">, </span><span class="s1">ArrayData</span><span class="s2">, </span><span class="s1">AjaxData</span><span class="s2">, </span><span class="s1">Tags</span><span class="s2">, </span><span class="s1">Tokenizer</span><span class="s2">,</span>
             <span class="s1">MinimumInputLength</span><span class="s2">, </span><span class="s1">MaximumInputLength</span><span class="s2">, </span><span class="s1">MaximumSelectionLength</span><span class="s2">,</span>

             <span class="s1">Dropdown</span><span class="s2">, </span><span class="s1">DropdownSearch</span><span class="s2">, </span><span class="s1">HidePlaceholder</span><span class="s2">, </span><span class="s1">InfiniteScroll</span><span class="s2">,</span>
             <span class="s1">AttachBody</span><span class="s2">, </span><span class="s1">MinimumResultsForSearch</span><span class="s2">, </span><span class="s1">SelectOnClose</span><span class="s2">, </span><span class="s1">CloseOnSelect</span><span class="s2">,</span>

             <span class="s1">EnglishTranslation) {</span>
  <span class="s2">function </span><span class="s1">Defaults () {</span>
    <span class="s2">this</span><span class="s1">.reset()</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Defaults.prototype.apply = </span><span class="s2">function </span><span class="s1">(options) {</span>
    <span class="s1">options = $.extend(</span><span class="s2">true, </span><span class="s1">{}</span><span class="s2">, this</span><span class="s1">.defaults</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(options.dataAdapter == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(options.ajax != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">options.dataAdapter = AjaxData</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(options.data != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">options.dataAdapter = ArrayData</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">options.dataAdapter = SelectData</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.minimumInputLength &gt; </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">options.dataAdapter = Utils.Decorate(</span>
          <span class="s1">options.dataAdapter</span><span class="s2">,</span>
          <span class="s1">MinimumInputLength</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.maximumInputLength &gt; </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">options.dataAdapter = Utils.Decorate(</span>
          <span class="s1">options.dataAdapter</span><span class="s2">,</span>
          <span class="s1">MaximumInputLength</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.maximumSelectionLength &gt; </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">options.dataAdapter = Utils.Decorate(</span>
          <span class="s1">options.dataAdapter</span><span class="s2">,</span>
          <span class="s1">MaximumSelectionLength</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.tags) {</span>
        <span class="s1">options.dataAdapter = Utils.Decorate(options.dataAdapter</span><span class="s2">, </span><span class="s1">Tags)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.tokenSeparators != </span><span class="s2">null </span><span class="s1">|| options.tokenizer != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">options.dataAdapter = Utils.Decorate(</span>
          <span class="s1">options.dataAdapter</span><span class="s2">,</span>
          <span class="s1">Tokenizer</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.query != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">Query = require(options.amdBase + </span><span class="s3">'compat/query'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">options.dataAdapter = Utils.Decorate(</span>
          <span class="s1">options.dataAdapter</span><span class="s2">,</span>
          <span class="s1">Query</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.initSelection != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">InitSelection = require(options.amdBase + </span><span class="s3">'compat/initSelection'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">options.dataAdapter = Utils.Decorate(</span>
          <span class="s1">options.dataAdapter</span><span class="s2">,</span>
          <span class="s1">InitSelection</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(options.resultsAdapter == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">options.resultsAdapter = ResultsList</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(options.ajax != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">options.resultsAdapter = Utils.Decorate(</span>
          <span class="s1">options.resultsAdapter</span><span class="s2">,</span>
          <span class="s1">InfiniteScroll</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.placeholder != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">options.resultsAdapter = Utils.Decorate(</span>
          <span class="s1">options.resultsAdapter</span><span class="s2">,</span>
          <span class="s1">HidePlaceholder</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.selectOnClose) {</span>
        <span class="s1">options.resultsAdapter = Utils.Decorate(</span>
          <span class="s1">options.resultsAdapter</span><span class="s2">,</span>
          <span class="s1">SelectOnClose</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(options.dropdownAdapter == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(options.multiple) {</span>
        <span class="s1">options.dropdownAdapter = Dropdown</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s2">var </span><span class="s1">SearchableDropdown = Utils.Decorate(Dropdown</span><span class="s2">, </span><span class="s1">DropdownSearch)</span><span class="s2">;</span>

        <span class="s1">options.dropdownAdapter = SearchableDropdown</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.minimumResultsForSearch !== </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s1">options.dropdownAdapter = Utils.Decorate(</span>
          <span class="s1">options.dropdownAdapter</span><span class="s2">,</span>
          <span class="s1">MinimumResultsForSearch</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.closeOnSelect) {</span>
        <span class="s1">options.dropdownAdapter = Utils.Decorate(</span>
          <span class="s1">options.dropdownAdapter</span><span class="s2">,</span>
          <span class="s1">CloseOnSelect</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(</span>
        <span class="s1">options.dropdownCssClass != </span><span class="s2">null </span><span class="s1">||</span>
        <span class="s1">options.dropdownCss != </span><span class="s2">null </span><span class="s1">||</span>
        <span class="s1">options.adaptDropdownCssClass != </span><span class="s2">null</span>
      <span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">DropdownCSS = require(options.amdBase + </span><span class="s3">'compat/dropdownCss'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">options.dropdownAdapter = Utils.Decorate(</span>
          <span class="s1">options.dropdownAdapter</span><span class="s2">,</span>
          <span class="s1">DropdownCSS</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">options.dropdownAdapter = Utils.Decorate(</span>
        <span class="s1">options.dropdownAdapter</span><span class="s2">,</span>
        <span class="s1">AttachBody</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(options.selectionAdapter == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(options.multiple) {</span>
        <span class="s1">options.selectionAdapter = MultipleSelection</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">options.selectionAdapter = SingleSelection</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s0">// Add the placeholder mixin if a placeholder was specified</span>
      <span class="s2">if </span><span class="s1">(options.placeholder != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">options.selectionAdapter = Utils.Decorate(</span>
          <span class="s1">options.selectionAdapter</span><span class="s2">,</span>
          <span class="s1">Placeholder</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.allowClear) {</span>
        <span class="s1">options.selectionAdapter = Utils.Decorate(</span>
          <span class="s1">options.selectionAdapter</span><span class="s2">,</span>
          <span class="s1">AllowClear</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(options.multiple) {</span>
        <span class="s1">options.selectionAdapter = Utils.Decorate(</span>
          <span class="s1">options.selectionAdapter</span><span class="s2">,</span>
          <span class="s1">SelectionSearch</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(</span>
        <span class="s1">options.containerCssClass != </span><span class="s2">null </span><span class="s1">||</span>
        <span class="s1">options.containerCss != </span><span class="s2">null </span><span class="s1">||</span>
        <span class="s1">options.adaptContainerCssClass != </span><span class="s2">null</span>
      <span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">ContainerCSS = require(options.amdBase + </span><span class="s3">'compat/containerCss'</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s1">options.selectionAdapter = Utils.Decorate(</span>
          <span class="s1">options.selectionAdapter</span><span class="s2">,</span>
          <span class="s1">ContainerCSS</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">options.selectionAdapter = Utils.Decorate(</span>
        <span class="s1">options.selectionAdapter</span><span class="s2">,</span>
        <span class="s1">EventRelay</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s0">// If the defaults were not previously applied from an element, it is</span>
    <span class="s0">// possible for the language option to have not been resolved</span>
    <span class="s1">options.language = </span><span class="s2">this</span><span class="s1">._resolveLanguage(options.language)</span><span class="s2">;</span>

    <span class="s0">// Always fall back to English since it will always be complete</span>
    <span class="s1">options.language.push(</span><span class="s3">'en'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">uniqueLanguages = []</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">l = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">l &lt; options.language.length</span><span class="s2">; </span><span class="s1">l++) {</span>
      <span class="s2">var </span><span class="s1">language = options.language[l]</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(uniqueLanguages.indexOf(language) === -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s1">uniqueLanguages.push(language)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s1">options.language = uniqueLanguages</span><span class="s2">;</span>

    <span class="s1">options.translations = </span><span class="s2">this</span><span class="s1">._processTranslations(</span>
      <span class="s1">options.language</span><span class="s2">,</span>
      <span class="s1">options.debug</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">options</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Defaults.prototype.reset = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">function </span><span class="s1">stripDiacritics (text) {</span>
      <span class="s0">// Used 'uni range + named function' from http://jsperf.com/diacritics/18</span>
      <span class="s2">function </span><span class="s1">match(a) {</span>
        <span class="s2">return </span><span class="s1">DIACRITICS[a] || a</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return </span><span class="s1">text.replace(</span><span class="s6">/[^\u0000-\u007E]/g</span><span class="s2">, </span><span class="s1">match)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">matcher (params</span><span class="s2">, </span><span class="s1">data) {</span>
      <span class="s0">// Always return the object if there is nothing to compare</span>
      <span class="s2">if </span><span class="s1">($.trim(params.term) === </span><span class="s3">''</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">data</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s0">// Do a recursive check for options with children</span>
      <span class="s2">if </span><span class="s1">(data.children &amp;&amp; data.children.length &gt; </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s0">// Clone the data object if there are children</span>
        <span class="s0">// This is required as we modify the object to remove any non-matches</span>
        <span class="s2">var </span><span class="s1">match = $.extend(</span><span class="s2">true, </span><span class="s1">{}</span><span class="s2">, </span><span class="s1">data)</span><span class="s2">;</span>

        <span class="s0">// Check each child of the option</span>
        <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">c = data.children.length - </span><span class="s6">1</span><span class="s2">; </span><span class="s1">c &gt;= </span><span class="s6">0</span><span class="s2">; </span><span class="s1">c--) {</span>
          <span class="s2">var </span><span class="s1">child = data.children[c]</span><span class="s2">;</span>

          <span class="s2">var </span><span class="s1">matches = matcher(params</span><span class="s2">, </span><span class="s1">child)</span><span class="s2">;</span>

          <span class="s0">// If there wasn't a match, remove the object in the array</span>
          <span class="s2">if </span><span class="s1">(matches == </span><span class="s2">null</span><span class="s1">) {</span>
            <span class="s1">match.children.splice(c</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s0">// If any children matched, return the new object</span>
        <span class="s2">if </span><span class="s1">(match.children.length &gt; </span><span class="s6">0</span><span class="s1">) {</span>
          <span class="s2">return </span><span class="s1">match</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">// If there were no matching children, check just the plain object</span>
        <span class="s2">return </span><span class="s1">matcher(params</span><span class="s2">, </span><span class="s1">match)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">original = stripDiacritics(data.text).toUpperCase()</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">term = stripDiacritics(params.term).toUpperCase()</span><span class="s2">;</span>

      <span class="s0">// Check if the text contains the term</span>
      <span class="s2">if </span><span class="s1">(original.indexOf(term) &gt; -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">data</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s0">// If it doesn't contain the term, don't return anything</span>
      <span class="s2">return null;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.defaults = {</span>
      <span class="s1">amdBase: </span><span class="s3">'./'</span><span class="s2">,</span>
      <span class="s1">amdLanguageBase: </span><span class="s3">'./i18n/'</span><span class="s2">,</span>
      <span class="s1">closeOnSelect: </span><span class="s2">true,</span>
      <span class="s1">debug: </span><span class="s2">false,</span>
      <span class="s1">dropdownAutoWidth: </span><span class="s2">false,</span>
      <span class="s1">escapeMarkup: Utils.escapeMarkup</span><span class="s2">,</span>
      <span class="s1">language: {}</span><span class="s2">,</span>
      <span class="s1">matcher: matcher</span><span class="s2">,</span>
      <span class="s1">minimumInputLength: </span><span class="s6">0</span><span class="s2">,</span>
      <span class="s1">maximumInputLength: </span><span class="s6">0</span><span class="s2">,</span>
      <span class="s1">maximumSelectionLength: </span><span class="s6">0</span><span class="s2">,</span>
      <span class="s1">minimumResultsForSearch: </span><span class="s6">0</span><span class="s2">,</span>
      <span class="s1">selectOnClose: </span><span class="s2">false,</span>
      <span class="s1">scrollAfterSelect: </span><span class="s2">false,</span>
      <span class="s1">sorter: </span><span class="s2">function </span><span class="s1">(data) {</span>
        <span class="s2">return </span><span class="s1">data</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">,</span>
      <span class="s1">templateResult: </span><span class="s2">function </span><span class="s1">(result) {</span>
        <span class="s2">return </span><span class="s1">result.text</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">,</span>
      <span class="s1">templateSelection: </span><span class="s2">function </span><span class="s1">(selection) {</span>
        <span class="s2">return </span><span class="s1">selection.text</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">,</span>
      <span class="s1">theme: </span><span class="s3">'default'</span><span class="s2">,</span>
      <span class="s1">width: </span><span class="s3">'resolve'</span>
    <span class="s1">}</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Defaults.prototype.applyFromElement = </span><span class="s2">function </span><span class="s1">(options</span><span class="s2">, </span><span class="s1">$element) {</span>
    <span class="s2">var </span><span class="s1">optionLanguage = options.language</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">defaultLanguage = </span><span class="s2">this</span><span class="s1">.defaults.language</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">elementLanguage = $element.prop(</span><span class="s3">'lang'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">parentLanguage = $element.closest(</span><span class="s3">'[lang]'</span><span class="s1">).prop(</span><span class="s3">'lang'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">languages = Array.prototype.concat.call(</span>
      <span class="s2">this</span><span class="s1">._resolveLanguage(elementLanguage)</span><span class="s2">,</span>
      <span class="s2">this</span><span class="s1">._resolveLanguage(optionLanguage)</span><span class="s2">,</span>
      <span class="s2">this</span><span class="s1">._resolveLanguage(defaultLanguage)</span><span class="s2">,</span>
      <span class="s2">this</span><span class="s1">._resolveLanguage(parentLanguage)</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s1">options.language = languages</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">options</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Defaults.prototype._resolveLanguage = </span><span class="s2">function </span><span class="s1">(language) {</span>
    <span class="s2">if </span><span class="s1">(!language) {</span>
      <span class="s2">return </span><span class="s1">[]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">($.isEmptyObject(language)) {</span>
      <span class="s2">return </span><span class="s1">[]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">($.isPlainObject(language)) {</span>
      <span class="s2">return </span><span class="s1">[language]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">languages</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(!$.isArray(language)) {</span>
      <span class="s1">languages = [language]</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">languages = language</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">resolvedLanguages = []</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">l = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">l &lt; languages.length</span><span class="s2">; </span><span class="s1">l++) {</span>
      <span class="s1">resolvedLanguages.push(languages[l])</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">languages[l] === </span><span class="s3">'string' </span><span class="s1">&amp;&amp; languages[l].indexOf(</span><span class="s3">'-'</span><span class="s1">) &gt; </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s0">// Extract the region information if it is included</span>
        <span class="s2">var </span><span class="s1">languageParts = languages[l].split(</span><span class="s3">'-'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">baseLanguage = languageParts[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">;</span>

        <span class="s1">resolvedLanguages.push(baseLanguage)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">resolvedLanguages</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Defaults.prototype._processTranslations = </span><span class="s2">function </span><span class="s1">(languages</span><span class="s2">, </span><span class="s1">debug) {</span>
    <span class="s2">var </span><span class="s1">translations = </span><span class="s2">new </span><span class="s1">Translation()</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">l = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">l &lt; languages.length</span><span class="s2">; </span><span class="s1">l++) {</span>
      <span class="s2">var </span><span class="s1">languageData = </span><span class="s2">new </span><span class="s1">Translation()</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">language = languages[l]</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">language === </span><span class="s3">'string'</span><span class="s1">) {</span>
        <span class="s2">try </span><span class="s1">{</span>
          <span class="s0">// Try to load it with the original name</span>
          <span class="s1">languageData = Translation.loadPath(language)</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">catch </span><span class="s1">(e) {</span>
          <span class="s2">try </span><span class="s1">{</span>
            <span class="s0">// If we couldn't load it, check if it wasn't the full path</span>
            <span class="s1">language = </span><span class="s2">this</span><span class="s1">.defaults.amdLanguageBase + language</span><span class="s2">;</span>
            <span class="s1">languageData = Translation.loadPath(language)</span><span class="s2">;</span>
          <span class="s1">} </span><span class="s2">catch </span><span class="s1">(ex) {</span>
            <span class="s0">// The translation could not be loaded at all. Sometimes this is</span>
            <span class="s0">// because of a configuration problem, other times this can be</span>
            <span class="s0">// because of how Select2 helps load all possible translation files</span>
            <span class="s2">if </span><span class="s1">(debug &amp;&amp; window.console &amp;&amp; console.warn) {</span>
              <span class="s1">console.warn(</span>
                <span class="s3">'Select2: The language file for &quot;' </span><span class="s1">+ language + </span><span class="s3">'&quot; could ' </span><span class="s1">+</span>
                <span class="s3">'not be automatically loaded. A fallback will be used instead.'</span>
              <span class="s1">)</span><span class="s2">;</span>
            <span class="s1">}</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">($.isPlainObject(language)) {</span>
        <span class="s1">languageData = </span><span class="s2">new </span><span class="s1">Translation(language)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">languageData = language</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">translations.extend(languageData)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">translations</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Defaults.prototype.set = </span><span class="s2">function </span><span class="s1">(key</span><span class="s2">, </span><span class="s1">value) {</span>
    <span class="s2">var </span><span class="s1">camelKey = $.camelCase(key)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">data = {}</span><span class="s2">;</span>
    <span class="s1">data[camelKey] = value</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">convertedData = Utils._convertData(data)</span><span class="s2">;</span>

    <span class="s1">$.extend(</span><span class="s2">true, this</span><span class="s1">.defaults</span><span class="s2">, </span><span class="s1">convertedData)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">var </span><span class="s1">defaults = </span><span class="s2">new </span><span class="s1">Defaults()</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">defaults</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/options'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'require'</span><span class="s2">,</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./defaults'</span><span class="s2">,</span>
  <span class="s3">'./utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">(require</span><span class="s2">, </span><span class="s1">$</span><span class="s2">, </span><span class="s1">Defaults</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">Options (options</span><span class="s2">, </span><span class="s1">$element) {</span>
    <span class="s2">this</span><span class="s1">.options = options</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($element != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.fromElement($element)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">($element != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.options = Defaults.applyFromElement(</span><span class="s2">this</span><span class="s1">.options</span><span class="s2">, </span><span class="s1">$element)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.options = Defaults.apply(</span><span class="s2">this</span><span class="s1">.options)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($element &amp;&amp; $element.is(</span><span class="s3">'input'</span><span class="s1">)) {</span>
      <span class="s2">var </span><span class="s1">InputCompat = require(</span><span class="s2">this</span><span class="s1">.get(</span><span class="s3">'amdBase'</span><span class="s1">) + </span><span class="s3">'compat/inputData'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">this</span><span class="s1">.options.dataAdapter = Utils.Decorate(</span>
        <span class="s2">this</span><span class="s1">.options.dataAdapter</span><span class="s2">,</span>
        <span class="s1">InputCompat</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span>

  <span class="s1">Options.prototype.fromElement = </span><span class="s2">function </span><span class="s1">($e) {</span>
    <span class="s2">var </span><span class="s1">excludedData = [</span><span class="s3">'select2'</span><span class="s1">]</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.multiple == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.options.multiple = $e.prop(</span><span class="s3">'multiple'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.disabled == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">.options.disabled = $e.prop(</span><span class="s3">'disabled'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.dir == </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">($e.prop(</span><span class="s3">'dir'</span><span class="s1">)) {</span>
        <span class="s2">this</span><span class="s1">.options.dir = $e.prop(</span><span class="s3">'dir'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">($e.closest(</span><span class="s3">'[dir]'</span><span class="s1">).prop(</span><span class="s3">'dir'</span><span class="s1">)) {</span>
        <span class="s2">this</span><span class="s1">.options.dir = $e.closest(</span><span class="s3">'[dir]'</span><span class="s1">).prop(</span><span class="s3">'dir'</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s2">this</span><span class="s1">.options.dir = </span><span class="s3">'ltr'</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s1">$e.prop(</span><span class="s3">'disabled'</span><span class="s2">, this</span><span class="s1">.options.disabled)</span><span class="s2">;</span>
    <span class="s1">$e.prop(</span><span class="s3">'multiple'</span><span class="s2">, this</span><span class="s1">.options.multiple)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(Utils.GetData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'select2Tags'</span><span class="s1">)) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.debug &amp;&amp; window.console &amp;&amp; console.warn) {</span>
        <span class="s1">console.warn(</span>
          <span class="s3">'Select2: The `data-select2-tags` attribute has been changed to ' </span><span class="s1">+</span>
          <span class="s3">'use the `data-data` and `data-tags=&quot;true&quot;` attributes and will be ' </span><span class="s1">+</span>
          <span class="s3">'removed in future versions of Select2.'</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">Utils.StoreData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s2">, </span><span class="s1">Utils.GetData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'select2Tags'</span><span class="s1">))</span><span class="s2">;</span>
      <span class="s1">Utils.StoreData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'tags'</span><span class="s2">, true</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(Utils.GetData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ajaxUrl'</span><span class="s1">)) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.debug &amp;&amp; window.console &amp;&amp; console.warn) {</span>
        <span class="s1">console.warn(</span>
          <span class="s3">'Select2: The `data-ajax-url` attribute has been changed to ' </span><span class="s1">+</span>
          <span class="s3">'`data-ajax--url` and support for the old attribute will be removed' </span><span class="s1">+</span>
          <span class="s3">' in future versions of Select2.'</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">$e.attr(</span><span class="s3">'ajax--url'</span><span class="s2">, </span><span class="s1">Utils.GetData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ajaxUrl'</span><span class="s1">))</span><span class="s2">;</span>
      <span class="s1">Utils.StoreData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ajax-Url'</span><span class="s2">, </span><span class="s1">Utils.GetData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'ajaxUrl'</span><span class="s1">))</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">dataset = {}</span><span class="s2">;</span>

    <span class="s2">function </span><span class="s1">upperCaseLetter(_</span><span class="s2">, </span><span class="s1">letter) {</span>
      <span class="s2">return </span><span class="s1">letter.toUpperCase()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s0">// Pre-load all of the attributes which are prefixed with `data-`</span>
    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">attr = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">attr &lt; $e[</span><span class="s6">0</span><span class="s1">].attributes.length</span><span class="s2">; </span><span class="s1">attr++) {</span>
      <span class="s2">var </span><span class="s1">attributeName = $e[</span><span class="s6">0</span><span class="s1">].attributes[attr].name</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">prefix = </span><span class="s3">'data-'</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(attributeName.substr(</span><span class="s6">0</span><span class="s2">, </span><span class="s1">prefix.length) == prefix) {</span>
        <span class="s0">// Get the contents of the attribute after `data-`</span>
        <span class="s2">var </span><span class="s1">dataName = attributeName.substring(prefix.length)</span><span class="s2">;</span>

        <span class="s0">// Get the data contents from the consistent source</span>
        <span class="s0">// This is more than likely the jQuery data helper</span>
        <span class="s2">var </span><span class="s1">dataValue = Utils.GetData($e[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">dataName)</span><span class="s2">;</span>

        <span class="s0">// camelCase the attribute name to match the spec</span>
        <span class="s2">var </span><span class="s1">camelDataName = dataName.replace(</span><span class="s6">/-([a-z])/g</span><span class="s2">, </span><span class="s1">upperCaseLetter)</span><span class="s2">;</span>

        <span class="s0">// Store the data attribute contents into the dataset since</span>
        <span class="s1">dataset[camelDataName] = dataValue</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s0">// Prefer the element's `dataset` attribute if it exists</span>
    <span class="s0">// jQuery 1.x does not correctly handle data attributes with multiple dashes</span>
    <span class="s2">if </span><span class="s1">($.fn.jquery &amp;&amp; $.fn.jquery.substr(</span><span class="s6">0</span><span class="s2">, </span><span class="s6">2</span><span class="s1">) == </span><span class="s3">'1.' </span><span class="s1">&amp;&amp; $e[</span><span class="s6">0</span><span class="s1">].dataset) {</span>
      <span class="s1">dataset = $.extend(</span><span class="s2">true, </span><span class="s1">{}</span><span class="s2">, </span><span class="s1">$e[</span><span class="s6">0</span><span class="s1">].dataset</span><span class="s2">, </span><span class="s1">dataset)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s0">// Prefer our internal data cache if it exists</span>
    <span class="s2">var </span><span class="s1">data = $.extend(</span><span class="s2">true, </span><span class="s1">{}</span><span class="s2">, </span><span class="s1">Utils.GetData($e[</span><span class="s6">0</span><span class="s1">])</span><span class="s2">, </span><span class="s1">dataset)</span><span class="s2">;</span>

    <span class="s1">data = Utils._convertData(data)</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">key </span><span class="s2">in </span><span class="s1">data) {</span>
      <span class="s2">if </span><span class="s1">($.inArray(key</span><span class="s2">, </span><span class="s1">excludedData) &gt; -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">continue;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">($.isPlainObject(</span><span class="s2">this</span><span class="s1">.options[key])) {</span>
        <span class="s1">$.extend(</span><span class="s2">this</span><span class="s1">.options[key]</span><span class="s2">, </span><span class="s1">data[key])</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s2">this</span><span class="s1">.options[key] = data[key]</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">return this;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Options.prototype.get = </span><span class="s2">function </span><span class="s1">(key) {</span>
    <span class="s2">return this</span><span class="s1">.options[key]</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Options.prototype.set = </span><span class="s2">function </span><span class="s1">(key</span><span class="s2">, </span><span class="s1">val) {</span>
    <span class="s2">this</span><span class="s1">.options[key] = val</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Options</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/core'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./options'</span><span class="s2">,</span>
  <span class="s3">'./utils'</span><span class="s2">,</span>
  <span class="s3">'./keys'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Options</span><span class="s2">, </span><span class="s1">Utils</span><span class="s2">, </span><span class="s1">KEYS) {</span>
  <span class="s2">var </span><span class="s1">Select2 = </span><span class="s2">function </span><span class="s1">($element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">if </span><span class="s1">(Utils.GetData($element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'select2'</span><span class="s1">) != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">Utils.GetData($element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'select2'</span><span class="s1">).destroy()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$element = $element</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.id = </span><span class="s2">this</span><span class="s1">._generateId($element)</span><span class="s2">;</span>

    <span class="s1">options = options || {}</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.options = </span><span class="s2">new </span><span class="s1">Options(options</span><span class="s2">, </span><span class="s1">$element)</span><span class="s2">;</span>

    <span class="s1">Select2.__super__.constructor.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s0">// Set up the tabindex</span>

    <span class="s2">var </span><span class="s1">tabindex = $element.attr(</span><span class="s3">'tabindex'</span><span class="s1">) || </span><span class="s6">0</span><span class="s2">;</span>
    <span class="s1">Utils.StoreData($element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'old-tabindex'</span><span class="s2">, </span><span class="s1">tabindex)</span><span class="s2">;</span>
    <span class="s1">$element.attr(</span><span class="s3">'tabindex'</span><span class="s2">, </span><span class="s3">'-1'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s0">// Set up containers and adapters</span>

    <span class="s2">var </span><span class="s1">DataAdapter = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'dataAdapter'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.dataAdapter = </span><span class="s2">new </span><span class="s1">DataAdapter($element</span><span class="s2">, this</span><span class="s1">.options)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">$container = </span><span class="s2">this</span><span class="s1">.render()</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">._placeContainer($container)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">SelectionAdapter = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'selectionAdapter'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.selection = </span><span class="s2">new </span><span class="s1">SelectionAdapter($element</span><span class="s2">, this</span><span class="s1">.options)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$selection = </span><span class="s2">this</span><span class="s1">.selection.render()</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.selection.position(</span><span class="s2">this</span><span class="s1">.$selection</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">DropdownAdapter = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'dropdownAdapter'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.dropdown = </span><span class="s2">new </span><span class="s1">DropdownAdapter($element</span><span class="s2">, this</span><span class="s1">.options)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$dropdown = </span><span class="s2">this</span><span class="s1">.dropdown.render()</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.dropdown.position(</span><span class="s2">this</span><span class="s1">.$dropdown</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">ResultsAdapter = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'resultsAdapter'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.results = </span><span class="s2">new </span><span class="s1">ResultsAdapter($element</span><span class="s2">, this</span><span class="s1">.options</span><span class="s2">, this</span><span class="s1">.dataAdapter)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$results = </span><span class="s2">this</span><span class="s1">.results.render()</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.results.position(</span><span class="s2">this</span><span class="s1">.$results</span><span class="s2">, this</span><span class="s1">.$dropdown)</span><span class="s2">;</span>

    <span class="s0">// Bind events</span>

    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s0">// Bind the container to all of the adapters</span>
    <span class="s2">this</span><span class="s1">._bindAdapters()</span><span class="s2">;</span>

    <span class="s0">// Register any DOM event handlers</span>
    <span class="s2">this</span><span class="s1">._registerDomEvents()</span><span class="s2">;</span>

    <span class="s0">// Register any internal event handlers</span>
    <span class="s2">this</span><span class="s1">._registerDataEvents()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._registerSelectionEvents()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._registerDropdownEvents()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._registerResultsEvents()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._registerEvents()</span><span class="s2">;</span>

    <span class="s0">// Set the initial state</span>
    <span class="s2">this</span><span class="s1">.dataAdapter.current(</span><span class="s2">function </span><span class="s1">(initialData) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'selection:update'</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">data: initialData</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s0">// Hide the original select</span>
    <span class="s1">$element.addClass(</span><span class="s3">'select2-hidden-accessible'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$element.attr(</span><span class="s3">'aria-hidden'</span><span class="s2">, </span><span class="s3">'true'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s0">// Synchronize any monitored attributes</span>
    <span class="s2">this</span><span class="s1">._syncAttributes()</span><span class="s2">;</span>

    <span class="s1">Utils.StoreData($element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'select2'</span><span class="s2">, this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s0">// Ensure backwards compatibility with $element.data('select2').</span>
    <span class="s1">$element.data(</span><span class="s3">'select2'</span><span class="s2">, this</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Utils.Extend(Select2</span><span class="s2">, </span><span class="s1">Utils.Observable)</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._generateId = </span><span class="s2">function </span><span class="s1">($element) {</span>
    <span class="s2">var </span><span class="s1">id = </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($element.attr(</span><span class="s3">'id'</span><span class="s1">) != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">id = $element.attr(</span><span class="s3">'id'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">($element.attr(</span><span class="s3">'name'</span><span class="s1">) != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">id = $element.attr(</span><span class="s3">'name'</span><span class="s1">) + </span><span class="s3">'-' </span><span class="s1">+ Utils.generateChars(</span><span class="s6">2</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s1">id = Utils.generateChars(</span><span class="s6">4</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">id = id.replace(</span><span class="s6">/(:|\.|\[|\]|,)/g</span><span class="s2">, </span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">id = </span><span class="s3">'select2-' </span><span class="s1">+ id</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">id</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._placeContainer = </span><span class="s2">function </span><span class="s1">($container) {</span>
    <span class="s1">$container.insertAfter(</span><span class="s2">this</span><span class="s1">.$element)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">width = </span><span class="s2">this</span><span class="s1">._resolveWidth(</span><span class="s2">this</span><span class="s1">.$element</span><span class="s2">, this</span><span class="s1">.options.get(</span><span class="s3">'width'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(width != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s1">$container.css(</span><span class="s3">'width'</span><span class="s2">, </span><span class="s1">width)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._resolveWidth = </span><span class="s2">function </span><span class="s1">($element</span><span class="s2">, </span><span class="s1">method) {</span>
    <span class="s2">var </span><span class="s1">WIDTH = </span><span class="s6">/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(method == </span><span class="s3">'resolve'</span><span class="s1">) {</span>
      <span class="s2">var </span><span class="s1">styleWidth = </span><span class="s2">this</span><span class="s1">._resolveWidth($element</span><span class="s2">, </span><span class="s3">'style'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(styleWidth != </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">styleWidth</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return this</span><span class="s1">._resolveWidth($element</span><span class="s2">, </span><span class="s3">'element'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(method == </span><span class="s3">'element'</span><span class="s1">) {</span>
      <span class="s2">var </span><span class="s1">elementWidth = $element.outerWidth(</span><span class="s2">false</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(elementWidth &lt;= </span><span class="s6">0</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s3">'auto'</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return </span><span class="s1">elementWidth + </span><span class="s3">'px'</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(method == </span><span class="s3">'style'</span><span class="s1">) {</span>
      <span class="s2">var </span><span class="s1">style = $element.attr(</span><span class="s3">'style'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof</span><span class="s1">(style) !== </span><span class="s3">'string'</span><span class="s1">) {</span>
        <span class="s2">return null;</span>
      <span class="s1">}</span>

      <span class="s2">var </span><span class="s1">attrs = style.split(</span><span class="s3">';'</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">i = </span><span class="s6">0</span><span class="s2">, </span><span class="s1">l = attrs.length</span><span class="s2">; </span><span class="s1">i &lt; l</span><span class="s2">; </span><span class="s1">i = i + </span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">attr = attrs[i].replace(</span><span class="s6">/\s/g</span><span class="s2">, </span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">matches = attr.match(WIDTH)</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(matches !== </span><span class="s2">null </span><span class="s1">&amp;&amp; matches.length &gt;= </span><span class="s6">1</span><span class="s1">) {</span>
          <span class="s2">return </span><span class="s1">matches[</span><span class="s6">1</span><span class="s1">]</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>

      <span class="s2">return null;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(method == </span><span class="s3">'computedstyle'</span><span class="s1">) {</span>
      <span class="s2">var </span><span class="s1">computedStyle = window.getComputedStyle($element[</span><span class="s6">0</span><span class="s1">])</span><span class="s2">;</span>

      <span class="s2">return </span><span class="s1">computedStyle.width</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">method</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._bindAdapters = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.dataAdapter.bind(</span><span class="s2">this, this</span><span class="s1">.$container)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.selection.bind(</span><span class="s2">this, this</span><span class="s1">.$container)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.dropdown.bind(</span><span class="s2">this, this</span><span class="s1">.$container)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.results.bind(</span><span class="s2">this, this</span><span class="s1">.$container)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._registerDomEvents = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.$element.on(</span><span class="s3">'change.select2'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.dataAdapter.current(</span><span class="s2">function </span><span class="s1">(data) {</span>
        <span class="s1">self.trigger(</span><span class="s3">'selection:update'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">data: data</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$element.on(</span><span class="s3">'focus.select2'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">self.trigger(</span><span class="s3">'focus'</span><span class="s2">, </span><span class="s1">evt)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">._syncA = Utils.bind(</span><span class="s2">this</span><span class="s1">._syncAttributes</span><span class="s2">, this</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._syncS = Utils.bind(</span><span class="s2">this</span><span class="s1">._syncSubtree</span><span class="s2">, this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].attachEvent) {</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].attachEvent(</span><span class="s3">'onpropertychange'</span><span class="s2">, this</span><span class="s1">._syncA)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">observer = window.MutationObserver ||</span>
      <span class="s1">window.WebKitMutationObserver ||</span>
      <span class="s1">window.MozMutationObserver</span>
    <span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(observer != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">._observer = </span><span class="s2">new </span><span class="s1">observer(</span><span class="s2">function </span><span class="s1">(mutations) {</span>
        <span class="s1">self._syncA()</span><span class="s2">;</span>
        <span class="s1">self._syncS(</span><span class="s2">null, </span><span class="s1">mutations)</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">._observer.observe(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s1">{</span>
        <span class="s1">attributes: </span><span class="s2">true,</span>
        <span class="s1">childList: </span><span class="s2">true,</span>
        <span class="s1">subtree: </span><span class="s2">false</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].addEventListener) {</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].addEventListener(</span>
        <span class="s3">'DOMAttrModified'</span><span class="s2">,</span>
        <span class="s1">self._syncA</span><span class="s2">,</span>
        <span class="s2">false</span>
      <span class="s1">)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].addEventListener(</span>
        <span class="s3">'DOMNodeInserted'</span><span class="s2">,</span>
        <span class="s1">self._syncS</span><span class="s2">,</span>
        <span class="s2">false</span>
      <span class="s1">)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].addEventListener(</span>
        <span class="s3">'DOMNodeRemoved'</span><span class="s2">,</span>
        <span class="s1">self._syncS</span><span class="s2">,</span>
        <span class="s2">false</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._registerDataEvents = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.dataAdapter.on(</span><span class="s3">'*'</span><span class="s2">, function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">params) {</span>
      <span class="s1">self.trigger(name</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._registerSelectionEvents = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>
    <span class="s2">var </span><span class="s1">nonRelayEvents = [</span><span class="s3">'toggle'</span><span class="s2">, </span><span class="s3">'focus'</span><span class="s1">]</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.selection.on(</span><span class="s3">'toggle'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.toggleDropdown()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.selection.on(</span><span class="s3">'focus'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s1">self.focus(params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.selection.on(</span><span class="s3">'*'</span><span class="s2">, function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">params) {</span>
      <span class="s2">if </span><span class="s1">($.inArray(name</span><span class="s2">, </span><span class="s1">nonRelayEvents) !== -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s2">return;</span>
      <span class="s1">}</span>

      <span class="s1">self.trigger(name</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._registerDropdownEvents = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.dropdown.on(</span><span class="s3">'*'</span><span class="s2">, function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">params) {</span>
      <span class="s1">self.trigger(name</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._registerResultsEvents = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.results.on(</span><span class="s3">'*'</span><span class="s2">, function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">params) {</span>
      <span class="s1">self.trigger(name</span><span class="s2">, </span><span class="s1">params)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._registerEvents = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'open'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$container.addClass(</span><span class="s3">'select2-container--open'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'close'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$container.removeClass(</span><span class="s3">'select2-container--open'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'enable'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$container.removeClass(</span><span class="s3">'select2-container--disabled'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'disable'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$container.addClass(</span><span class="s3">'select2-container--disabled'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'blur'</span><span class="s2">, function </span><span class="s1">() {</span>
      <span class="s1">self.$container.removeClass(</span><span class="s3">'select2-container--focus'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'query'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s2">if </span><span class="s1">(!self.isOpen()) {</span>
        <span class="s1">self.trigger(</span><span class="s3">'open'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">this</span><span class="s1">.dataAdapter.query(params</span><span class="s2">, function </span><span class="s1">(data) {</span>
        <span class="s1">self.trigger(</span><span class="s3">'results:all'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">data: data</span><span class="s2">,</span>
          <span class="s1">query: params</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'query:append'</span><span class="s2">, function </span><span class="s1">(params) {</span>
      <span class="s2">this</span><span class="s1">.dataAdapter.query(params</span><span class="s2">, function </span><span class="s1">(data) {</span>
        <span class="s1">self.trigger(</span><span class="s3">'results:append'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">data: data</span><span class="s2">,</span>
          <span class="s1">query: params</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.on(</span><span class="s3">'keypress'</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s2">var </span><span class="s1">key = evt.which</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(self.isOpen()) {</span>
        <span class="s2">if </span><span class="s1">(key === KEYS.ESC || key === KEYS.TAB ||</span>
            <span class="s1">(key === KEYS.UP &amp;&amp; evt.altKey)) {</span>
          <span class="s1">self.close(evt)</span><span class="s2">;</span>

          <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(key === KEYS.ENTER) {</span>
          <span class="s1">self.trigger(</span><span class="s3">'results:select'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>

          <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">((key === KEYS.SPACE &amp;&amp; evt.ctrlKey)) {</span>
          <span class="s1">self.trigger(</span><span class="s3">'results:toggle'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>

          <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(key === KEYS.UP) {</span>
          <span class="s1">self.trigger(</span><span class="s3">'results:previous'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>

          <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">(key === KEYS.DOWN) {</span>
          <span class="s1">self.trigger(</span><span class="s3">'results:next'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>

          <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s2">if </span><span class="s1">(key === KEYS.ENTER || key === KEYS.SPACE ||</span>
            <span class="s1">(key === KEYS.DOWN &amp;&amp; evt.altKey)) {</span>
          <span class="s1">self.open()</span><span class="s2">;</span>

          <span class="s1">evt.preventDefault()</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._syncAttributes = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.options.set(</span><span class="s3">'disabled'</span><span class="s2">, this</span><span class="s1">.$element.prop(</span><span class="s3">'disabled'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isDisabled()) {</span>
      <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isOpen()) {</span>
        <span class="s2">this</span><span class="s1">.close()</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'disable'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'enable'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._isChangeMutation = </span><span class="s2">function </span><span class="s1">(evt</span><span class="s2">, </span><span class="s1">mutations) {</span>
    <span class="s2">var </span><span class="s1">changed = </span><span class="s2">false;</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s0">// Ignore any mutation events raised for elements that aren't options or</span>
    <span class="s0">// optgroups. This handles the case when the select element is destroyed</span>
    <span class="s2">if </span><span class="s1">(</span>
      <span class="s1">evt &amp;&amp; evt.target &amp;&amp; (</span>
        <span class="s1">evt.target.nodeName !== </span><span class="s3">'OPTION' </span><span class="s1">&amp;&amp; evt.target.nodeName !== </span><span class="s3">'OPTGROUP'</span>
      <span class="s1">)</span>
    <span class="s1">) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(!mutations) {</span>
      <span class="s0">// If mutation events aren't supported, then we can only assume that the</span>
      <span class="s0">// change affected the selections</span>
      <span class="s1">changed = </span><span class="s2">true;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(mutations.addedNodes &amp;&amp; mutations.addedNodes.length &gt; </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">n = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">n &lt; mutations.addedNodes.length</span><span class="s2">; </span><span class="s1">n++) {</span>
        <span class="s2">var </span><span class="s1">node = mutations.addedNodes[n]</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(node.selected) {</span>
          <span class="s1">changed = </span><span class="s2">true;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(mutations.removedNodes &amp;&amp; mutations.removedNodes.length &gt; </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s1">changed = </span><span class="s2">true;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">($.isArray(mutations)) {</span>
      <span class="s1">$.each(mutations</span><span class="s2">, function</span><span class="s1">(evt</span><span class="s2">, </span><span class="s1">mutation) {</span>
        <span class="s2">if </span><span class="s1">(self._isChangeMutation(evt</span><span class="s2">, </span><span class="s1">mutation)) {</span>
          <span class="s0">// We've found a change mutation.</span>
          <span class="s0">// Let's escape from the loop and continue</span>
          <span class="s1">changed = </span><span class="s2">true;</span>
          <span class="s2">return false;</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>
    <span class="s2">return </span><span class="s1">changed</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype._syncSubtree = </span><span class="s2">function </span><span class="s1">(evt</span><span class="s2">, </span><span class="s1">mutations) {</span>
    <span class="s2">var </span><span class="s1">changed = </span><span class="s2">this</span><span class="s1">._isChangeMutation(evt</span><span class="s2">, </span><span class="s1">mutations)</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s0">// Only re-pull the data if we think there is a change</span>
    <span class="s2">if </span><span class="s1">(changed) {</span>
      <span class="s2">this</span><span class="s1">.dataAdapter.current(</span><span class="s2">function </span><span class="s1">(currentData) {</span>
        <span class="s1">self.trigger(</span><span class="s3">'selection:update'</span><span class="s2">, </span><span class="s1">{</span>
          <span class="s1">data: currentData</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s4">/**</span>
   <span class="s4">* Override the trigger method to automatically trigger pre-events when</span>
   <span class="s4">* there are events that can be prevented.</span>
   <span class="s4">*/</span>
  <span class="s1">Select2.prototype.trigger = </span><span class="s2">function </span><span class="s1">(name</span><span class="s2">, </span><span class="s1">args) {</span>
    <span class="s2">var </span><span class="s1">actualTrigger = Select2.__super__.trigger</span><span class="s2">;</span>
    <span class="s2">var </span><span class="s1">preTriggerMap = {</span>
      <span class="s3">'open'</span><span class="s1">: </span><span class="s3">'opening'</span><span class="s2">,</span>
      <span class="s3">'close'</span><span class="s1">: </span><span class="s3">'closing'</span><span class="s2">,</span>
      <span class="s3">'select'</span><span class="s1">: </span><span class="s3">'selecting'</span><span class="s2">,</span>
      <span class="s3">'unselect'</span><span class="s1">: </span><span class="s3">'unselecting'</span><span class="s2">,</span>
      <span class="s3">'clear'</span><span class="s1">: </span><span class="s3">'clearing'</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(args === undefined) {</span>
      <span class="s1">args = {}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(name </span><span class="s2">in </span><span class="s1">preTriggerMap) {</span>
      <span class="s2">var </span><span class="s1">preTriggerName = preTriggerMap[name]</span><span class="s2">;</span>
      <span class="s2">var </span><span class="s1">preTriggerArgs = {</span>
        <span class="s1">prevented: </span><span class="s2">false,</span>
        <span class="s1">name: name</span><span class="s2">,</span>
        <span class="s1">args: args</span>
      <span class="s1">}</span><span class="s2">;</span>

      <span class="s1">actualTrigger.call(</span><span class="s2">this, </span><span class="s1">preTriggerName</span><span class="s2">, </span><span class="s1">preTriggerArgs)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(preTriggerArgs.prevented) {</span>
        <span class="s1">args.prevented = </span><span class="s2">true;</span>

        <span class="s2">return;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s1">actualTrigger.call(</span><span class="s2">this, </span><span class="s1">name</span><span class="s2">, </span><span class="s1">args)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.toggleDropdown = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isDisabled()) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isOpen()) {</span>
      <span class="s2">this</span><span class="s1">.close()</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">this</span><span class="s1">.open()</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.open = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isOpen()) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.isDisabled()) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'query'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.close = </span><span class="s2">function </span><span class="s1">(evt) {</span>
    <span class="s2">if </span><span class="s1">(!</span><span class="s2">this</span><span class="s1">.isOpen()) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'close'</span><span class="s2">, </span><span class="s1">{ originalEvent : evt })</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s4">/**</span>
   <span class="s4">* Helper method to abstract the &quot;enabled&quot; (not &quot;disabled&quot;) state of this</span>
   <span class="s4">* object.</span>
   <span class="s4">*</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{true} if the instance is not disabled.</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{false} if the instance is disabled.</span>
   <span class="s4">*/</span>
  <span class="s1">Select2.prototype.isEnabled = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return </span><span class="s1">!</span><span class="s2">this</span><span class="s1">.isDisabled()</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s4">/**</span>
   <span class="s4">* Helper method to abstract the &quot;disabled&quot; state of this object.</span>
   <span class="s4">*</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{true} if the disabled option is true.</span>
   <span class="s4">* </span><span class="s5">@return </span><span class="s4">{false} if the disabled option is false.</span>
   <span class="s4">*/</span>
  <span class="s1">Select2.prototype.isDisabled = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return this</span><span class="s1">.options.get(</span><span class="s3">'disabled'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.isOpen = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return this</span><span class="s1">.$container.hasClass(</span><span class="s3">'select2-container--open'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.hasFocus = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">return this</span><span class="s1">.$container.hasClass(</span><span class="s3">'select2-container--focus'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.focus = </span><span class="s2">function </span><span class="s1">(data) {</span>
    <span class="s0">// No need to re-trigger focus events if we are already focused</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.hasFocus()) {</span>
      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$container.addClass(</span><span class="s3">'select2-container--focus'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'focus'</span><span class="s2">, </span><span class="s1">{})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.enable = </span><span class="s2">function </span><span class="s1">(args) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp; window.console &amp;&amp; console.warn) {</span>
      <span class="s1">console.warn(</span>
        <span class="s3">'Select2: The `select2(&quot;enable&quot;)` method has been deprecated and will' </span><span class="s1">+</span>
        <span class="s3">' be removed in later Select2 versions. Use $element.prop(&quot;disabled&quot;)' </span><span class="s1">+</span>
        <span class="s3">' instead.'</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(args == </span><span class="s2">null </span><span class="s1">|| args.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s1">args = [</span><span class="s2">true</span><span class="s1">]</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">disabled = !args[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$element.prop(</span><span class="s3">'disabled'</span><span class="s2">, </span><span class="s1">disabled)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.data = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp;</span>
        <span class="s1">arguments.length &gt; </span><span class="s6">0 </span><span class="s1">&amp;&amp; window.console &amp;&amp; console.warn) {</span>
      <span class="s1">console.warn(</span>
        <span class="s3">'Select2: Data can no longer be set using `select2(&quot;data&quot;)`. You ' </span><span class="s1">+</span>
        <span class="s3">'should consider setting the value instead using `$element.val()`.'</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">data = []</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.dataAdapter.current(</span><span class="s2">function </span><span class="s1">(currentData) {</span>
      <span class="s1">data = currentData</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">data</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.val = </span><span class="s2">function </span><span class="s1">(args) {</span>
    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp; window.console &amp;&amp; console.warn) {</span>
      <span class="s1">console.warn(</span>
        <span class="s3">'Select2: The `select2(&quot;val&quot;)` method has been deprecated and will be' </span><span class="s1">+</span>
        <span class="s3">' removed in later Select2 versions. Use $element.val() instead.'</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(args == </span><span class="s2">null </span><span class="s1">|| args.length === </span><span class="s6">0</span><span class="s1">) {</span>
      <span class="s2">return this</span><span class="s1">.$element.val()</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">newVal = args[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($.isArray(newVal)) {</span>
      <span class="s1">newVal = $.map(newVal</span><span class="s2">, function </span><span class="s1">(obj) {</span>
        <span class="s2">return </span><span class="s1">obj.toString()</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.$element.val(newVal).trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.destroy = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">this</span><span class="s1">.$container.remove()</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].detachEvent) {</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].detachEvent(</span><span class="s3">'onpropertychange'</span><span class="s2">, this</span><span class="s1">._syncA)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">._observer != </span><span class="s2">null</span><span class="s1">) {</span>
      <span class="s2">this</span><span class="s1">._observer.disconnect()</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">._observer = </span><span class="s2">null;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">].removeEventListener) {</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">]</span>
        <span class="s1">.removeEventListener(</span><span class="s3">'DOMAttrModified'</span><span class="s2">, this</span><span class="s1">._syncA</span><span class="s2">, false</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">]</span>
        <span class="s1">.removeEventListener(</span><span class="s3">'DOMNodeInserted'</span><span class="s2">, this</span><span class="s1">._syncS</span><span class="s2">, false</span><span class="s1">)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">]</span>
        <span class="s1">.removeEventListener(</span><span class="s3">'DOMNodeRemoved'</span><span class="s2">, this</span><span class="s1">._syncS</span><span class="s2">, false</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">._syncA = </span><span class="s2">null;</span>
    <span class="s2">this</span><span class="s1">._syncS = </span><span class="s2">null;</span>

    <span class="s2">this</span><span class="s1">.$element.off(</span><span class="s3">'.select2'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$element.attr(</span><span class="s3">'tabindex'</span><span class="s2">,</span>
    <span class="s1">Utils.GetData(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'old-tabindex'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$element.removeClass(</span><span class="s3">'select2-hidden-accessible'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$element.attr(</span><span class="s3">'aria-hidden'</span><span class="s2">, </span><span class="s3">'false'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">Utils.RemoveData(</span><span class="s2">this</span><span class="s1">.$element[</span><span class="s6">0</span><span class="s1">])</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.$element.removeData(</span><span class="s3">'select2'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.dataAdapter.destroy()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.selection.destroy()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.dropdown.destroy()</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">.results.destroy()</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.dataAdapter = </span><span class="s2">null;</span>
    <span class="s2">this</span><span class="s1">.selection = </span><span class="s2">null;</span>
    <span class="s2">this</span><span class="s1">.dropdown = </span><span class="s2">null;</span>
    <span class="s2">this</span><span class="s1">.results = </span><span class="s2">null;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">Select2.prototype.render = </span><span class="s2">function </span><span class="s1">() {</span>
    <span class="s2">var </span><span class="s1">$container = $(</span>
      <span class="s3">'&lt;span class=&quot;select2 select2-container&quot;&gt;' </span><span class="s1">+</span>
        <span class="s3">'&lt;span class=&quot;selection&quot;&gt;&lt;/span&gt;' </span><span class="s1">+</span>
        <span class="s3">'&lt;span class=&quot;dropdown-wrapper&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;' </span><span class="s1">+</span>
      <span class="s3">'&lt;/span&gt;'</span>
    <span class="s1">)</span><span class="s2">;</span>

    <span class="s1">$container.attr(</span><span class="s3">'dir'</span><span class="s2">, this</span><span class="s1">.options.get(</span><span class="s3">'dir'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$container = $container</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$container.addClass(</span><span class="s3">'select2-container--' </span><span class="s1">+ </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'theme'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s1">Utils.StoreData($container[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'element'</span><span class="s2">, this</span><span class="s1">.$element)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$container</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Select2</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/compat/utils'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">function </span><span class="s1">syncCssClasses ($dest</span><span class="s2">, </span><span class="s1">$src</span><span class="s2">, </span><span class="s1">adapter) {</span>
    <span class="s2">var </span><span class="s1">classes</span><span class="s2">, </span><span class="s1">replacements = []</span><span class="s2">, </span><span class="s1">adapted</span><span class="s2">;</span>

    <span class="s1">classes = $.trim($dest.attr(</span><span class="s3">'class'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(classes) {</span>
      <span class="s1">classes = </span><span class="s3">'' </span><span class="s1">+ classes</span><span class="s2">; </span><span class="s0">// for IE which returns object</span>

      <span class="s1">$(classes.split(</span><span class="s6">/\s+/</span><span class="s1">)).each(</span><span class="s2">function </span><span class="s1">() {</span>
        <span class="s0">// Save all Select2 classes</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.indexOf(</span><span class="s3">'select2-'</span><span class="s1">) === </span><span class="s6">0</span><span class="s1">) {</span>
          <span class="s1">replacements.push(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">classes = $.trim($src.attr(</span><span class="s3">'class'</span><span class="s1">))</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(classes) {</span>
      <span class="s1">classes = </span><span class="s3">'' </span><span class="s1">+ classes</span><span class="s2">; </span><span class="s0">// for IE which returns object</span>

      <span class="s1">$(classes.split(</span><span class="s6">/\s+/</span><span class="s1">)).each(</span><span class="s2">function </span><span class="s1">() {</span>
        <span class="s0">// Only adapt non-Select2 classes</span>
        <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">.indexOf(</span><span class="s3">'select2-'</span><span class="s1">) !== </span><span class="s6">0</span><span class="s1">) {</span>
          <span class="s1">adapted = adapter(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

          <span class="s2">if </span><span class="s1">(adapted != </span><span class="s2">null</span><span class="s1">) {</span>
            <span class="s1">replacements.push(adapted)</span><span class="s2">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>
      <span class="s1">})</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">$dest.attr(</span><span class="s3">'class'</span><span class="s2">, </span><span class="s1">replacements.join(</span><span class="s3">' '</span><span class="s1">))</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s1">{</span>
    <span class="s1">syncCssClasses: syncCssClasses</span>
  <span class="s1">}</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/compat/containerCss'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">CompatUtils) {</span>
  <span class="s0">// No-op CSS adapter that discards all classes by default</span>
  <span class="s2">function </span><span class="s1">_containerAdapter (clazz) {</span>
    <span class="s2">return null;</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s1">ContainerCSS () { }</span>

  <span class="s1">ContainerCSS.prototype.render = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">var </span><span class="s1">$container = decorated.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">containerCssClass = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'containerCssClass'</span><span class="s1">) || </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($.isFunction(containerCssClass)) {</span>
      <span class="s1">containerCssClass = containerCssClass(</span><span class="s2">this</span><span class="s1">.$element)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">containerCssAdapter = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'adaptContainerCssClass'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">containerCssAdapter = containerCssAdapter || _containerAdapter</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(containerCssClass.indexOf(</span><span class="s3">':all:'</span><span class="s1">) !== -</span><span class="s6">1</span><span class="s1">) {</span>
      <span class="s1">containerCssClass = containerCssClass.replace(</span><span class="s3">':all:'</span><span class="s2">, </span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">_cssAdapter = containerCssAdapter</span><span class="s2">;</span>

      <span class="s1">containerCssAdapter = </span><span class="s2">function </span><span class="s1">(clazz) {</span>
        <span class="s2">var </span><span class="s1">adapted = _cssAdapter(clazz)</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(adapted != </span><span class="s2">null</span><span class="s1">) {</span>
          <span class="s0">// Append the old one along with the adapted one</span>
          <span class="s2">return </span><span class="s1">adapted + </span><span class="s3">' ' </span><span class="s1">+ clazz</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s2">return </span><span class="s1">clazz</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">containerCss = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'containerCss'</span><span class="s1">) || {}</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($.isFunction(containerCss)) {</span>
      <span class="s1">containerCss = containerCss(</span><span class="s2">this</span><span class="s1">.$element)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">CompatUtils.syncCssClasses($container</span><span class="s2">, this</span><span class="s1">.$element</span><span class="s2">, </span><span class="s1">containerCssAdapter)</span><span class="s2">;</span>

    <span class="s1">$container.css(containerCss)</span><span class="s2">;</span>
    <span class="s1">$container.addClass(containerCssClass)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$container</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">ContainerCSS</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/compat/dropdownCss'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'./utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">CompatUtils) {</span>
  <span class="s0">// No-op CSS adapter that discards all classes by default</span>
  <span class="s2">function </span><span class="s1">_dropdownAdapter (clazz) {</span>
    <span class="s2">return null;</span>
  <span class="s1">}</span>

  <span class="s2">function </span><span class="s1">DropdownCSS () { }</span>

  <span class="s1">DropdownCSS.prototype.render = </span><span class="s2">function </span><span class="s1">(decorated) {</span>
    <span class="s2">var </span><span class="s1">$dropdown = decorated.call(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">dropdownCssClass = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'dropdownCssClass'</span><span class="s1">) || </span><span class="s3">''</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($.isFunction(dropdownCssClass)) {</span>
      <span class="s1">dropdownCssClass = dropdownCssClass(</span><span class="s2">this</span><span class="s1">.$element)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">dropdownCssAdapter = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'adaptDropdownCssClass'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">dropdownCssAdapter = dropdownCssAdapter || _dropdownAdapter</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">(dropdownCssClass.indexOf(</span><span class="s3">':all:'</span><span class="s1">) !== -</span><span class="s6">1</span><span class="s1">) {</span>
      <span class="s1">dropdownCssClass = dropdownCssClass.replace(</span><span class="s3">':all:'</span><span class="s2">, </span><span class="s3">''</span><span class="s1">)</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">_cssAdapter = dropdownCssAdapter</span><span class="s2">;</span>

      <span class="s1">dropdownCssAdapter = </span><span class="s2">function </span><span class="s1">(clazz) {</span>
        <span class="s2">var </span><span class="s1">adapted = _cssAdapter(clazz)</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(adapted != </span><span class="s2">null</span><span class="s1">) {</span>
          <span class="s0">// Append the old one along with the adapted one</span>
          <span class="s2">return </span><span class="s1">adapted + </span><span class="s3">' ' </span><span class="s1">+ clazz</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s2">return </span><span class="s1">clazz</span><span class="s2">;</span>
      <span class="s1">}</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">dropdownCss = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'dropdownCss'</span><span class="s1">) || {}</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($.isFunction(dropdownCss)) {</span>
      <span class="s1">dropdownCss = dropdownCss(</span><span class="s2">this</span><span class="s1">.$element)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">CompatUtils.syncCssClasses($dropdown</span><span class="s2">, this</span><span class="s1">.$element</span><span class="s2">, </span><span class="s1">dropdownCssAdapter)</span><span class="s2">;</span>

    <span class="s1">$dropdown.css(dropdownCss)</span><span class="s2">;</span>
    <span class="s1">$dropdown.addClass(dropdownCssClass)</span><span class="s2">;</span>

    <span class="s2">return </span><span class="s1">$dropdown</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">DropdownCSS</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/compat/initSelection'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">function </span><span class="s1">InitSelection (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">if </span><span class="s1">(options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp; window.console &amp;&amp; console.warn) {</span>
      <span class="s1">console.warn(</span>
        <span class="s3">'Select2: The `initSelection` option has been deprecated in favor' </span><span class="s1">+</span>
        <span class="s3">' of a custom data adapter that overrides the `current` method. ' </span><span class="s1">+</span>
        <span class="s3">'This method is now called multiple times instead of a single ' </span><span class="s1">+</span>
        <span class="s3">'time when the instance is initialized. Support will be removed ' </span><span class="s1">+</span>
        <span class="s3">'for the `initSelection` option in future versions of Select2'</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.initSelection = options.get(</span><span class="s3">'initSelection'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._isInitialized = </span><span class="s2">false;</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">InitSelection.prototype.current = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s2">if </span><span class="s1">(</span><span class="s2">this</span><span class="s1">._isInitialized) {</span>
      <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">callback)</span><span class="s2">;</span>

      <span class="s2">return;</span>
    <span class="s1">}</span>

    <span class="s2">this</span><span class="s1">.initSelection.call(</span><span class="s2">null, this</span><span class="s1">.$element</span><span class="s2">, function </span><span class="s1">(data) {</span>
      <span class="s1">self._isInitialized = </span><span class="s2">true;</span>

      <span class="s2">if </span><span class="s1">(!$.isArray(data)) {</span>
        <span class="s1">data = [data]</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">callback(data)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">InitSelection</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/compat/inputData'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'../utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">function </span><span class="s1">InputData (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">this</span><span class="s1">._currentData = []</span><span class="s2">;</span>
    <span class="s2">this</span><span class="s1">._valueSeparator = options.get(</span><span class="s3">'valueSeparator'</span><span class="s1">) || </span><span class="s3">','</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">($element.prop(</span><span class="s3">'type'</span><span class="s1">) === </span><span class="s3">'hidden'</span><span class="s1">) {</span>
      <span class="s2">if </span><span class="s1">(options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp; console &amp;&amp; console.warn) {</span>
        <span class="s1">console.warn(</span>
          <span class="s3">'Select2: Using a hidden input with Select2 is no longer ' </span><span class="s1">+</span>
          <span class="s3">'supported and may stop working in the future. It is recommended ' </span><span class="s1">+</span>
          <span class="s3">'to use a `&lt;select&gt;` element instead.'</span>
        <span class="s1">)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">InputData.prototype.current = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">function </span><span class="s1">getSelected (data</span><span class="s2">, </span><span class="s1">selectedIds) {</span>
      <span class="s2">var </span><span class="s1">selected = []</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(data.selected || $.inArray(data.id</span><span class="s2">, </span><span class="s1">selectedIds) !== -</span><span class="s6">1</span><span class="s1">) {</span>
        <span class="s1">data.selected = </span><span class="s2">true;</span>
        <span class="s1">selected.push(data)</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s1">data.selected = </span><span class="s2">false;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(data.children) {</span>
        <span class="s1">selected.push.apply(selected</span><span class="s2">, </span><span class="s1">getSelected(data.children</span><span class="s2">, </span><span class="s1">selectedIds))</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return </span><span class="s1">selected</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">selected = []</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; </span><span class="s2">this</span><span class="s1">._currentData.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s2">var </span><span class="s1">data = </span><span class="s2">this</span><span class="s1">._currentData[d]</span><span class="s2">;</span>

      <span class="s1">selected.push.apply(</span>
        <span class="s1">selected</span><span class="s2">,</span>
        <span class="s1">getSelected(</span>
          <span class="s1">data</span><span class="s2">,</span>
          <span class="s2">this</span><span class="s1">.$element.val().split(</span>
            <span class="s2">this</span><span class="s1">._valueSeparator</span>
          <span class="s1">)</span>
        <span class="s1">)</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">callback(selected)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InputData.prototype.select = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">if </span><span class="s1">(!</span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'multiple'</span><span class="s1">)) {</span>
      <span class="s2">this</span><span class="s1">.current(</span><span class="s2">function </span><span class="s1">(allData) {</span>
        <span class="s1">$.map(allData</span><span class="s2">, function </span><span class="s1">(data) {</span>
          <span class="s1">data.selected = </span><span class="s2">false;</span>
        <span class="s1">})</span><span class="s2">;</span>
      <span class="s1">})</span><span class="s2">;</span>

      <span class="s2">this</span><span class="s1">.$element.val(data.id)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
      <span class="s2">var </span><span class="s1">value = </span><span class="s2">this</span><span class="s1">.$element.val()</span><span class="s2">;</span>
      <span class="s1">value += </span><span class="s2">this</span><span class="s1">._valueSeparator + data.id</span><span class="s2">;</span>

      <span class="s2">this</span><span class="s1">.$element.val(value)</span><span class="s2">;</span>
      <span class="s2">this</span><span class="s1">.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InputData.prototype.unselect = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">data) {</span>
    <span class="s2">var </span><span class="s1">self = </span><span class="s2">this;</span>

    <span class="s1">data.selected = </span><span class="s2">false;</span>

    <span class="s2">this</span><span class="s1">.current(</span><span class="s2">function </span><span class="s1">(allData) {</span>
      <span class="s2">var </span><span class="s1">values = []</span><span class="s2">;</span>

      <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; allData.length</span><span class="s2">; </span><span class="s1">d++) {</span>
        <span class="s2">var </span><span class="s1">item = allData[d]</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">(data.id == item.id) {</span>
          <span class="s2">continue;</span>
        <span class="s1">}</span>

        <span class="s1">values.push(item.id)</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s1">self.$element.val(values.join(self._valueSeparator))</span><span class="s2">;</span>
      <span class="s1">self.$element.trigger(</span><span class="s3">'input'</span><span class="s1">).trigger(</span><span class="s3">'change'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InputData.prototype.query = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s2">var </span><span class="s1">results = []</span><span class="s2">;</span>

    <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">d = </span><span class="s6">0</span><span class="s2">; </span><span class="s1">d &lt; </span><span class="s2">this</span><span class="s1">._currentData.length</span><span class="s2">; </span><span class="s1">d++) {</span>
      <span class="s2">var </span><span class="s1">data = </span><span class="s2">this</span><span class="s1">._currentData[d]</span><span class="s2">;</span>

      <span class="s2">var </span><span class="s1">matches = </span><span class="s2">this</span><span class="s1">.matches(params</span><span class="s2">, </span><span class="s1">data)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(matches !== </span><span class="s2">null</span><span class="s1">) {</span>
        <span class="s1">results.push(matches)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s1">callback({</span>
      <span class="s1">results: results</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s1">InputData.prototype.addOptions = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">$options) {</span>
    <span class="s2">var </span><span class="s1">options = $.map($options</span><span class="s2">, function </span><span class="s1">($option) {</span>
      <span class="s2">return </span><span class="s1">Utils.GetData($option[</span><span class="s6">0</span><span class="s1">]</span><span class="s2">, </span><span class="s3">'data'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">._currentData.push.apply(</span><span class="s2">this</span><span class="s1">._currentData</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">InputData</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/compat/matcher'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($) {</span>
  <span class="s2">function </span><span class="s1">oldMatcher (matcher) {</span>
    <span class="s2">function </span><span class="s1">wrappedMatcher (params</span><span class="s2">, </span><span class="s1">data) {</span>
      <span class="s2">var </span><span class="s1">match = $.extend(</span><span class="s2">true, </span><span class="s1">{}</span><span class="s2">, </span><span class="s1">data)</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(params.term == </span><span class="s2">null </span><span class="s1">|| $.trim(params.term) === </span><span class="s3">''</span><span class="s1">) {</span>
        <span class="s2">return </span><span class="s1">match</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(data.children) {</span>
        <span class="s2">for </span><span class="s1">(</span><span class="s2">var </span><span class="s1">c = data.children.length - </span><span class="s6">1</span><span class="s2">; </span><span class="s1">c &gt;= </span><span class="s6">0</span><span class="s2">; </span><span class="s1">c--) {</span>
          <span class="s2">var </span><span class="s1">child = data.children[c]</span><span class="s2">;</span>

          <span class="s0">// Check if the child object matches</span>
          <span class="s0">// The old matcher returned a boolean true or false</span>
          <span class="s2">var </span><span class="s1">doesMatch = matcher(params.term</span><span class="s2">, </span><span class="s1">child.text</span><span class="s2">, </span><span class="s1">child)</span><span class="s2">;</span>

          <span class="s0">// If the child didn't match, pop it off</span>
          <span class="s2">if </span><span class="s1">(!doesMatch) {</span>
            <span class="s1">match.children.splice(c</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>
          <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s2">if </span><span class="s1">(match.children.length &gt; </span><span class="s6">0</span><span class="s1">) {</span>
          <span class="s2">return </span><span class="s1">match</span><span class="s2">;</span>
        <span class="s1">}</span>
      <span class="s1">}</span>

      <span class="s2">if </span><span class="s1">(matcher(params.term</span><span class="s2">, </span><span class="s1">data.text</span><span class="s2">, </span><span class="s1">data)) {</span>
        <span class="s2">return </span><span class="s1">match</span><span class="s2">;</span>
      <span class="s1">}</span>

      <span class="s2">return null;</span>
    <span class="s1">}</span>

    <span class="s2">return </span><span class="s1">wrappedMatcher</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s1">oldMatcher</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/compat/query'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">Query (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s2">if </span><span class="s1">(options.get(</span><span class="s3">'debug'</span><span class="s1">) &amp;&amp; window.console &amp;&amp; console.warn) {</span>
      <span class="s1">console.warn(</span>
        <span class="s3">'Select2: The `query` option has been deprecated in favor of a ' </span><span class="s1">+</span>
        <span class="s3">'custom data adapter that overrides the `query` method. Support ' </span><span class="s1">+</span>
        <span class="s3">'will be removed for the `query` option in future versions of ' </span><span class="s1">+</span>
        <span class="s3">'Select2.'</span>
      <span class="s1">)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">Query.prototype.query = </span><span class="s2">function </span><span class="s1">(_</span><span class="s2">, </span><span class="s1">params</span><span class="s2">, </span><span class="s1">callback) {</span>
    <span class="s1">params.callback = callback</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">query = </span><span class="s2">this</span><span class="s1">.options.get(</span><span class="s3">'query'</span><span class="s1">)</span><span class="s2">;</span>

    <span class="s1">query.call(</span><span class="s2">null, </span><span class="s1">params)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">Query</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/attachContainer'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">AttachContainer (decorated</span><span class="s2">, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options) {</span>
    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">$element</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s1">AttachContainer.prototype.position =</span>
    <span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">$dropdown</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s2">var </span><span class="s1">$dropdownContainer = $container.find(</span><span class="s3">'.dropdown-wrapper'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$dropdownContainer.append($dropdown)</span><span class="s2">;</span>

    <span class="s1">$dropdown.addClass(</span><span class="s3">'select2-dropdown--below'</span><span class="s1">)</span><span class="s2">;</span>
    <span class="s1">$container.addClass(</span><span class="s3">'select2-container--below'</span><span class="s1">)</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">AttachContainer</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/dropdown/stopPropagation'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">StopPropagation () { }</span>

  <span class="s1">StopPropagation.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">stoppedEvents = [</span>
    <span class="s3">'blur'</span><span class="s2">,</span>
    <span class="s3">'change'</span><span class="s2">,</span>
    <span class="s3">'click'</span><span class="s2">,</span>
    <span class="s3">'dblclick'</span><span class="s2">,</span>
    <span class="s3">'focus'</span><span class="s2">,</span>
    <span class="s3">'focusin'</span><span class="s2">,</span>
    <span class="s3">'focusout'</span><span class="s2">,</span>
    <span class="s3">'input'</span><span class="s2">,</span>
    <span class="s3">'keydown'</span><span class="s2">,</span>
    <span class="s3">'keyup'</span><span class="s2">,</span>
    <span class="s3">'keypress'</span><span class="s2">,</span>
    <span class="s3">'mousedown'</span><span class="s2">,</span>
    <span class="s3">'mouseenter'</span><span class="s2">,</span>
    <span class="s3">'mouseleave'</span><span class="s2">,</span>
    <span class="s3">'mousemove'</span><span class="s2">,</span>
    <span class="s3">'mouseover'</span><span class="s2">,</span>
    <span class="s3">'mouseup'</span><span class="s2">,</span>
    <span class="s3">'search'</span><span class="s2">,</span>
    <span class="s3">'touchend'</span><span class="s2">,</span>
    <span class="s3">'touchstart'</span>
    <span class="s1">]</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$dropdown.on(stoppedEvents.join(</span><span class="s3">' '</span><span class="s1">)</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">evt.stopPropagation()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">StopPropagation</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'select2/selection/stopPropagation'</span><span class="s2">,</span><span class="s1">[</span>

<span class="s1">]</span><span class="s2">, function </span><span class="s1">() {</span>
  <span class="s2">function </span><span class="s1">StopPropagation () { }</span>

  <span class="s1">StopPropagation.prototype.bind = </span><span class="s2">function </span><span class="s1">(decorated</span><span class="s2">, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container) {</span>
    <span class="s1">decorated.call(</span><span class="s2">this, </span><span class="s1">container</span><span class="s2">, </span><span class="s1">$container)</span><span class="s2">;</span>

    <span class="s2">var </span><span class="s1">stoppedEvents = [</span>
      <span class="s3">'blur'</span><span class="s2">,</span>
      <span class="s3">'change'</span><span class="s2">,</span>
      <span class="s3">'click'</span><span class="s2">,</span>
      <span class="s3">'dblclick'</span><span class="s2">,</span>
      <span class="s3">'focus'</span><span class="s2">,</span>
      <span class="s3">'focusin'</span><span class="s2">,</span>
      <span class="s3">'focusout'</span><span class="s2">,</span>
      <span class="s3">'input'</span><span class="s2">,</span>
      <span class="s3">'keydown'</span><span class="s2">,</span>
      <span class="s3">'keyup'</span><span class="s2">,</span>
      <span class="s3">'keypress'</span><span class="s2">,</span>
      <span class="s3">'mousedown'</span><span class="s2">,</span>
      <span class="s3">'mouseenter'</span><span class="s2">,</span>
      <span class="s3">'mouseleave'</span><span class="s2">,</span>
      <span class="s3">'mousemove'</span><span class="s2">,</span>
      <span class="s3">'mouseover'</span><span class="s2">,</span>
      <span class="s3">'mouseup'</span><span class="s2">,</span>
      <span class="s3">'search'</span><span class="s2">,</span>
      <span class="s3">'touchend'</span><span class="s2">,</span>
      <span class="s3">'touchstart'</span>
    <span class="s1">]</span><span class="s2">;</span>

    <span class="s2">this</span><span class="s1">.$selection.on(stoppedEvents.join(</span><span class="s3">' '</span><span class="s1">)</span><span class="s2">, function </span><span class="s1">(evt) {</span>
      <span class="s1">evt.stopPropagation()</span><span class="s2">;</span>
    <span class="s1">})</span><span class="s2">;</span>
  <span class="s1">}</span><span class="s2">;</span>

  <span class="s2">return </span><span class="s1">StopPropagation</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

<span class="s0">/*! 
 * jQuery Mousewheel 3.1.13 
 * 
 * Copyright jQuery Foundation and other contributors 
 * Released under the MIT license 
 * http://jquery.org/license 
 */</span>

<span class="s1">(</span><span class="s2">function </span><span class="s1">(factory) {</span>
    <span class="s2">if </span><span class="s1">( </span><span class="s2">typeof </span><span class="s1">S2.define === </span><span class="s3">'function' </span><span class="s1">&amp;&amp; S2.define.amd ) {</span>
        <span class="s0">// AMD. Register as an anonymous module.</span>
        <span class="s1">S2.define(</span><span class="s3">'jquery-mousewheel'</span><span class="s2">,</span><span class="s1">[</span><span class="s3">'jquery'</span><span class="s1">]</span><span class="s2">, </span><span class="s1">factory)</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">exports === </span><span class="s3">'object'</span><span class="s1">) {</span>
        <span class="s0">// Node/CommonJS style for Browserify</span>
        <span class="s1">module.exports = factory</span><span class="s2">;</span>
    <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s0">// Browser globals</span>
        <span class="s1">factory(jQuery)</span><span class="s2">;</span>
    <span class="s1">}</span>
<span class="s1">}(</span><span class="s2">function </span><span class="s1">($) {</span>

    <span class="s2">var </span><span class="s1">toFix  = [</span><span class="s3">'wheel'</span><span class="s2">, </span><span class="s3">'mousewheel'</span><span class="s2">, </span><span class="s3">'DOMMouseScroll'</span><span class="s2">, </span><span class="s3">'MozMousePixelScroll'</span><span class="s1">]</span><span class="s2">,</span>
        <span class="s1">toBind = ( </span><span class="s3">'onwheel' </span><span class="s2">in </span><span class="s1">document || document.documentMode &gt;= </span><span class="s6">9 </span><span class="s1">) ?</span>
                    <span class="s1">[</span><span class="s3">'wheel'</span><span class="s1">] : [</span><span class="s3">'mousewheel'</span><span class="s2">, </span><span class="s3">'DomMouseScroll'</span><span class="s2">, </span><span class="s3">'MozMousePixelScroll'</span><span class="s1">]</span><span class="s2">,</span>
        <span class="s1">slice  = Array.prototype.slice</span><span class="s2">,</span>
        <span class="s1">nullLowestDeltaTimeout</span><span class="s2">, </span><span class="s1">lowestDelta</span><span class="s2">;</span>

    <span class="s2">if </span><span class="s1">( $.event.fixHooks ) {</span>
        <span class="s2">for </span><span class="s1">( </span><span class="s2">var </span><span class="s1">i = toFix.length</span><span class="s2">; </span><span class="s1">i</span><span class="s2">; </span><span class="s1">) {</span>
            <span class="s1">$.event.fixHooks[ toFix[--i] ] = $.event.mouseHooks</span><span class="s2">;</span>
        <span class="s1">}</span>
    <span class="s1">}</span>

    <span class="s2">var </span><span class="s1">special = $.event.special.mousewheel = {</span>
        <span class="s1">version: </span><span class="s3">'3.1.12'</span><span class="s2">,</span>

        <span class="s1">setup: </span><span class="s2">function</span><span class="s1">() {</span>
            <span class="s2">if </span><span class="s1">( </span><span class="s2">this</span><span class="s1">.addEventListener ) {</span>
                <span class="s2">for </span><span class="s1">( </span><span class="s2">var </span><span class="s1">i = toBind.length</span><span class="s2">; </span><span class="s1">i</span><span class="s2">; </span><span class="s1">) {</span>
                    <span class="s2">this</span><span class="s1">.addEventListener( toBind[--i]</span><span class="s2">, </span><span class="s1">handler</span><span class="s2">, false </span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">}</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s2">this</span><span class="s1">.onmousewheel = handler</span><span class="s2">;</span>
            <span class="s1">}</span>
            <span class="s0">// Store the line height and page height for this particular element</span>
            <span class="s1">$.data(</span><span class="s2">this, </span><span class="s3">'mousewheel-line-height'</span><span class="s2">, </span><span class="s1">special.getLineHeight(</span><span class="s2">this</span><span class="s1">))</span><span class="s2">;</span>
            <span class="s1">$.data(</span><span class="s2">this, </span><span class="s3">'mousewheel-page-height'</span><span class="s2">, </span><span class="s1">special.getPageHeight(</span><span class="s2">this</span><span class="s1">))</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">,</span>

        <span class="s1">teardown: </span><span class="s2">function</span><span class="s1">() {</span>
            <span class="s2">if </span><span class="s1">( </span><span class="s2">this</span><span class="s1">.removeEventListener ) {</span>
                <span class="s2">for </span><span class="s1">( </span><span class="s2">var </span><span class="s1">i = toBind.length</span><span class="s2">; </span><span class="s1">i</span><span class="s2">; </span><span class="s1">) {</span>
                    <span class="s2">this</span><span class="s1">.removeEventListener( toBind[--i]</span><span class="s2">, </span><span class="s1">handler</span><span class="s2">, false </span><span class="s1">)</span><span class="s2">;</span>
                <span class="s1">}</span>
            <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
                <span class="s2">this</span><span class="s1">.onmousewheel = </span><span class="s2">null;</span>
            <span class="s1">}</span>
            <span class="s0">// Clean up the data we added to the element</span>
            <span class="s1">$.removeData(</span><span class="s2">this, </span><span class="s3">'mousewheel-line-height'</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">$.removeData(</span><span class="s2">this, </span><span class="s3">'mousewheel-page-height'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">,</span>

        <span class="s1">getLineHeight: </span><span class="s2">function</span><span class="s1">(elem) {</span>
            <span class="s2">var </span><span class="s1">$elem = $(elem)</span><span class="s2">,</span>
                <span class="s1">$parent = $elem[</span><span class="s3">'offsetParent' </span><span class="s2">in </span><span class="s1">$.fn ? </span><span class="s3">'offsetParent' </span><span class="s1">: </span><span class="s3">'parent'</span><span class="s1">]()</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">(!$parent.length) {</span>
                <span class="s1">$parent = $(</span><span class="s3">'body'</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">}</span>
            <span class="s2">return </span><span class="s1">parseInt($parent.css(</span><span class="s3">'fontSize'</span><span class="s1">)</span><span class="s2">, </span><span class="s6">10</span><span class="s1">) || parseInt($elem.css(</span><span class="s3">'fontSize'</span><span class="s1">)</span><span class="s2">, </span><span class="s6">10</span><span class="s1">) || </span><span class="s6">16</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">,</span>

        <span class="s1">getPageHeight: </span><span class="s2">function</span><span class="s1">(elem) {</span>
            <span class="s2">return </span><span class="s1">$(elem).height()</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">,</span>

        <span class="s1">settings: {</span>
            <span class="s1">adjustOldDeltas: </span><span class="s2">true, </span><span class="s0">// see shouldAdjustOldDeltas() below</span>
            <span class="s1">normalizeOffset: </span><span class="s2">true  </span><span class="s0">// calls getBoundingClientRect for each event</span>
        <span class="s1">}</span>
    <span class="s1">}</span><span class="s2">;</span>

    <span class="s1">$.fn.extend({</span>
        <span class="s1">mousewheel: </span><span class="s2">function</span><span class="s1">(fn) {</span>
            <span class="s2">return </span><span class="s1">fn ? </span><span class="s2">this</span><span class="s1">.bind(</span><span class="s3">'mousewheel'</span><span class="s2">, </span><span class="s1">fn) : </span><span class="s2">this</span><span class="s1">.trigger(</span><span class="s3">'mousewheel'</span><span class="s1">)</span><span class="s2">;</span>
        <span class="s1">}</span><span class="s2">,</span>

        <span class="s1">unmousewheel: </span><span class="s2">function</span><span class="s1">(fn) {</span>
            <span class="s2">return this</span><span class="s1">.unbind(</span><span class="s3">'mousewheel'</span><span class="s2">, </span><span class="s1">fn)</span><span class="s2">;</span>
        <span class="s1">}</span>
    <span class="s1">})</span><span class="s2">;</span>


    <span class="s2">function </span><span class="s1">handler(event) {</span>
        <span class="s2">var </span><span class="s1">orgEvent   = event || window.event</span><span class="s2">,</span>
            <span class="s1">args       = slice.call(arguments</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">,</span>
            <span class="s1">delta      = </span><span class="s6">0</span><span class="s2">,</span>
            <span class="s1">deltaX     = </span><span class="s6">0</span><span class="s2">,</span>
            <span class="s1">deltaY     = </span><span class="s6">0</span><span class="s2">,</span>
            <span class="s1">absDelta   = </span><span class="s6">0</span><span class="s2">,</span>
            <span class="s1">offsetX    = </span><span class="s6">0</span><span class="s2">,</span>
            <span class="s1">offsetY    = </span><span class="s6">0</span><span class="s2">;</span>
        <span class="s1">event = $.event.fix(orgEvent)</span><span class="s2">;</span>
        <span class="s1">event.type = </span><span class="s3">'mousewheel'</span><span class="s2">;</span>

        <span class="s0">// Old school scrollwheel delta</span>
        <span class="s2">if </span><span class="s1">( </span><span class="s3">'detail'      </span><span class="s2">in </span><span class="s1">orgEvent ) { deltaY = orgEvent.detail * -</span><span class="s6">1</span><span class="s2">;      </span><span class="s1">}</span>
        <span class="s2">if </span><span class="s1">( </span><span class="s3">'wheelDelta'  </span><span class="s2">in </span><span class="s1">orgEvent ) { deltaY = orgEvent.wheelDelta</span><span class="s2">;       </span><span class="s1">}</span>
        <span class="s2">if </span><span class="s1">( </span><span class="s3">'wheelDeltaY' </span><span class="s2">in </span><span class="s1">orgEvent ) { deltaY = orgEvent.wheelDeltaY</span><span class="s2">;      </span><span class="s1">}</span>
        <span class="s2">if </span><span class="s1">( </span><span class="s3">'wheelDeltaX' </span><span class="s2">in </span><span class="s1">orgEvent ) { deltaX = orgEvent.wheelDeltaX * -</span><span class="s6">1</span><span class="s2">; </span><span class="s1">}</span>

        <span class="s0">// Firefox &lt; 17 horizontal scrolling related to DOMMouseScroll event</span>
        <span class="s2">if </span><span class="s1">( </span><span class="s3">'axis' </span><span class="s2">in </span><span class="s1">orgEvent &amp;&amp; orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {</span>
            <span class="s1">deltaX = deltaY * -</span><span class="s6">1</span><span class="s2">;</span>
            <span class="s1">deltaY = </span><span class="s6">0</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">// Set delta to be deltaY or deltaX if deltaY is 0 for backwards compatabilitiy</span>
        <span class="s1">delta = deltaY === </span><span class="s6">0 </span><span class="s1">? deltaX : deltaY</span><span class="s2">;</span>

        <span class="s0">// New school wheel delta (wheel event)</span>
        <span class="s2">if </span><span class="s1">( </span><span class="s3">'deltaY' </span><span class="s2">in </span><span class="s1">orgEvent ) {</span>
            <span class="s1">deltaY = orgEvent.deltaY * -</span><span class="s6">1</span><span class="s2">;</span>
            <span class="s1">delta  = deltaY</span><span class="s2">;</span>
        <span class="s1">}</span>
        <span class="s2">if </span><span class="s1">( </span><span class="s3">'deltaX' </span><span class="s2">in </span><span class="s1">orgEvent ) {</span>
            <span class="s1">deltaX = orgEvent.deltaX</span><span class="s2">;</span>
            <span class="s2">if </span><span class="s1">( deltaY === </span><span class="s6">0 </span><span class="s1">) { delta  = deltaX * -</span><span class="s6">1</span><span class="s2">; </span><span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s0">// No change actually happened, no reason to go any further</span>
        <span class="s2">if </span><span class="s1">( deltaY === </span><span class="s6">0 </span><span class="s1">&amp;&amp; deltaX === </span><span class="s6">0 </span><span class="s1">) { </span><span class="s2">return; </span><span class="s1">}</span>

        <span class="s0">// Need to convert lines and pages to pixels if we aren't already in pixels</span>
        <span class="s0">// There are three delta modes:</span>
        <span class="s0">//   * deltaMode 0 is by pixels, nothing to do</span>
        <span class="s0">//   * deltaMode 1 is by lines</span>
        <span class="s0">//   * deltaMode 2 is by pages</span>
        <span class="s2">if </span><span class="s1">( orgEvent.deltaMode === </span><span class="s6">1 </span><span class="s1">) {</span>
            <span class="s2">var </span><span class="s1">lineHeight = $.data(</span><span class="s2">this, </span><span class="s3">'mousewheel-line-height'</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">delta  *= lineHeight</span><span class="s2">;</span>
            <span class="s1">deltaY *= lineHeight</span><span class="s2">;</span>
            <span class="s1">deltaX *= lineHeight</span><span class="s2">;</span>
        <span class="s1">} </span><span class="s2">else if </span><span class="s1">( orgEvent.deltaMode === </span><span class="s6">2 </span><span class="s1">) {</span>
            <span class="s2">var </span><span class="s1">pageHeight = $.data(</span><span class="s2">this, </span><span class="s3">'mousewheel-page-height'</span><span class="s1">)</span><span class="s2">;</span>
            <span class="s1">delta  *= pageHeight</span><span class="s2">;</span>
            <span class="s1">deltaY *= pageHeight</span><span class="s2">;</span>
            <span class="s1">deltaX *= pageHeight</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">// Store lowest absolute delta to normalize the delta values</span>
        <span class="s1">absDelta = Math.max( Math.abs(deltaY)</span><span class="s2">, </span><span class="s1">Math.abs(deltaX) )</span><span class="s2">;</span>

        <span class="s2">if </span><span class="s1">( !lowestDelta || absDelta &lt; lowestDelta ) {</span>
            <span class="s1">lowestDelta = absDelta</span><span class="s2">;</span>

            <span class="s0">// Adjust older deltas if necessary</span>
            <span class="s2">if </span><span class="s1">( shouldAdjustOldDeltas(orgEvent</span><span class="s2">, </span><span class="s1">absDelta) ) {</span>
                <span class="s1">lowestDelta /= </span><span class="s6">40</span><span class="s2">;</span>
            <span class="s1">}</span>
        <span class="s1">}</span>

        <span class="s0">// Adjust older deltas if necessary</span>
        <span class="s2">if </span><span class="s1">( shouldAdjustOldDeltas(orgEvent</span><span class="s2">, </span><span class="s1">absDelta) ) {</span>
            <span class="s0">// Divide all the things by 40!</span>
            <span class="s1">delta  /= </span><span class="s6">40</span><span class="s2">;</span>
            <span class="s1">deltaX /= </span><span class="s6">40</span><span class="s2">;</span>
            <span class="s1">deltaY /= </span><span class="s6">40</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">// Get a whole, normalized value for the deltas</span>
        <span class="s1">delta  = Math[ delta  &gt;= </span><span class="s6">1 </span><span class="s1">? </span><span class="s3">'floor' </span><span class="s1">: </span><span class="s3">'ceil' </span><span class="s1">](delta  / lowestDelta)</span><span class="s2">;</span>
        <span class="s1">deltaX = Math[ deltaX &gt;= </span><span class="s6">1 </span><span class="s1">? </span><span class="s3">'floor' </span><span class="s1">: </span><span class="s3">'ceil' </span><span class="s1">](deltaX / lowestDelta)</span><span class="s2">;</span>
        <span class="s1">deltaY = Math[ deltaY &gt;= </span><span class="s6">1 </span><span class="s1">? </span><span class="s3">'floor' </span><span class="s1">: </span><span class="s3">'ceil' </span><span class="s1">](deltaY / lowestDelta)</span><span class="s2">;</span>

        <span class="s0">// Normalise offsetX and offsetY properties</span>
        <span class="s2">if </span><span class="s1">( special.settings.normalizeOffset &amp;&amp; </span><span class="s2">this</span><span class="s1">.getBoundingClientRect ) {</span>
            <span class="s2">var </span><span class="s1">boundingRect = </span><span class="s2">this</span><span class="s1">.getBoundingClientRect()</span><span class="s2">;</span>
            <span class="s1">offsetX = event.clientX - boundingRect.left</span><span class="s2">;</span>
            <span class="s1">offsetY = event.clientY - boundingRect.top</span><span class="s2">;</span>
        <span class="s1">}</span>

        <span class="s0">// Add information to the event object</span>
        <span class="s1">event.deltaX = deltaX</span><span class="s2">;</span>
        <span class="s1">event.deltaY = deltaY</span><span class="s2">;</span>
        <span class="s1">event.deltaFactor = lowestDelta</span><span class="s2">;</span>
        <span class="s1">event.offsetX = offsetX</span><span class="s2">;</span>
        <span class="s1">event.offsetY = offsetY</span><span class="s2">;</span>
        <span class="s0">// Go ahead and set deltaMode to 0 since we converted to pixels</span>
        <span class="s0">// Although this is a little odd since we overwrite the deltaX/Y</span>
        <span class="s0">// properties with normalized deltas.</span>
        <span class="s1">event.deltaMode = </span><span class="s6">0</span><span class="s2">;</span>

        <span class="s0">// Add event and delta to the front of the arguments</span>
        <span class="s1">args.unshift(event</span><span class="s2">, </span><span class="s1">delta</span><span class="s2">, </span><span class="s1">deltaX</span><span class="s2">, </span><span class="s1">deltaY)</span><span class="s2">;</span>

        <span class="s0">// Clearout lowestDelta after sometime to better</span>
        <span class="s0">// handle multiple device types that give different</span>
        <span class="s0">// a different lowestDelta</span>
        <span class="s0">// Ex: trackpad = 3 and mouse wheel = 120</span>
        <span class="s2">if </span><span class="s1">(nullLowestDeltaTimeout) { clearTimeout(nullLowestDeltaTimeout)</span><span class="s2">; </span><span class="s1">}</span>
        <span class="s1">nullLowestDeltaTimeout = setTimeout(nullLowestDelta</span><span class="s2">, </span><span class="s6">200</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s2">return </span><span class="s1">($.event.dispatch || $.event.handle).apply(</span><span class="s2">this, </span><span class="s1">args)</span><span class="s2">;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">nullLowestDelta() {</span>
        <span class="s1">lowestDelta = </span><span class="s2">null;</span>
    <span class="s1">}</span>

    <span class="s2">function </span><span class="s1">shouldAdjustOldDeltas(orgEvent</span><span class="s2">, </span><span class="s1">absDelta) {</span>
        <span class="s0">// If this is an older event and the delta is divisable by 120,</span>
        <span class="s0">// then we are assuming that the browser is treating this as an</span>
        <span class="s0">// older mouse wheel event and that we should divide the deltas</span>
        <span class="s0">// by 40 to try and get a more usable deltaFactor.</span>
        <span class="s0">// Side note, this actually impacts the reported scroll distance</span>
        <span class="s0">// in older browsers and can cause scrolling to be slower than native.</span>
        <span class="s0">// Turn this off by setting $.event.special.mousewheel.settings.adjustOldDeltas to false.</span>
        <span class="s2">return </span><span class="s1">special.settings.adjustOldDeltas &amp;&amp; orgEvent.type === </span><span class="s3">'mousewheel' </span><span class="s1">&amp;&amp; absDelta % </span><span class="s6">120 </span><span class="s1">=== </span><span class="s6">0</span><span class="s2">;</span>
    <span class="s1">}</span>

<span class="s1">}))</span><span class="s2">;</span>

<span class="s1">S2.define(</span><span class="s3">'jquery.select2'</span><span class="s2">,</span><span class="s1">[</span>
  <span class="s3">'jquery'</span><span class="s2">,</span>
  <span class="s3">'jquery-mousewheel'</span><span class="s2">,</span>

  <span class="s3">'./select2/core'</span><span class="s2">,</span>
  <span class="s3">'./select2/defaults'</span><span class="s2">,</span>
  <span class="s3">'./select2/utils'</span>
<span class="s1">]</span><span class="s2">, function </span><span class="s1">($</span><span class="s2">, </span><span class="s1">_</span><span class="s2">, </span><span class="s1">Select2</span><span class="s2">, </span><span class="s1">Defaults</span><span class="s2">, </span><span class="s1">Utils) {</span>
  <span class="s2">if </span><span class="s1">($.fn.select2 == </span><span class="s2">null</span><span class="s1">) {</span>
    <span class="s0">// All methods that should return the element</span>
    <span class="s2">var </span><span class="s1">thisMethods = [</span><span class="s3">'open'</span><span class="s2">, </span><span class="s3">'close'</span><span class="s2">, </span><span class="s3">'destroy'</span><span class="s1">]</span><span class="s2">;</span>

    <span class="s1">$.fn.select2 = </span><span class="s2">function </span><span class="s1">(options) {</span>
      <span class="s1">options = options || {}</span><span class="s2">;</span>

      <span class="s2">if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">options === </span><span class="s3">'object'</span><span class="s1">) {</span>
        <span class="s2">this</span><span class="s1">.each(</span><span class="s2">function </span><span class="s1">() {</span>
          <span class="s2">var </span><span class="s1">instanceOptions = $.extend(</span><span class="s2">true, </span><span class="s1">{}</span><span class="s2">, </span><span class="s1">options)</span><span class="s2">;</span>

          <span class="s2">var </span><span class="s1">instance = </span><span class="s2">new </span><span class="s1">Select2($(</span><span class="s2">this</span><span class="s1">)</span><span class="s2">, </span><span class="s1">instanceOptions)</span><span class="s2">;</span>
        <span class="s1">})</span><span class="s2">;</span>

        <span class="s2">return this;</span>
      <span class="s1">} </span><span class="s2">else if </span><span class="s1">(</span><span class="s2">typeof </span><span class="s1">options === </span><span class="s3">'string'</span><span class="s1">) {</span>
        <span class="s2">var </span><span class="s1">ret</span><span class="s2">;</span>
        <span class="s2">var </span><span class="s1">args = Array.prototype.slice.call(arguments</span><span class="s2">, </span><span class="s6">1</span><span class="s1">)</span><span class="s2">;</span>

        <span class="s2">this</span><span class="s1">.each(</span><span class="s2">function </span><span class="s1">() {</span>
          <span class="s2">var </span><span class="s1">instance = Utils.GetData(</span><span class="s2">this, </span><span class="s3">'select2'</span><span class="s1">)</span><span class="s2">;</span>

          <span class="s2">if </span><span class="s1">(instance == </span><span class="s2">null </span><span class="s1">&amp;&amp; window.console &amp;&amp; console.error) {</span>
            <span class="s1">console.error(</span>
              <span class="s3">'The select2(</span><span class="s2">\'</span><span class="s3">' </span><span class="s1">+ options + </span><span class="s3">'</span><span class="s2">\'</span><span class="s3">) method was called on an ' </span><span class="s1">+</span>
              <span class="s3">'element that is not using Select2.'</span>
            <span class="s1">)</span><span class="s2">;</span>
          <span class="s1">}</span>

          <span class="s1">ret = instance[options].apply(instance</span><span class="s2">, </span><span class="s1">args)</span><span class="s2">;</span>
        <span class="s1">})</span><span class="s2">;</span>

        <span class="s0">// Check if we should be returning `this`</span>
        <span class="s2">if </span><span class="s1">($.inArray(options</span><span class="s2">, </span><span class="s1">thisMethods) &gt; -</span><span class="s6">1</span><span class="s1">) {</span>
          <span class="s2">return this;</span>
        <span class="s1">}</span>

        <span class="s2">return </span><span class="s1">ret</span><span class="s2">;</span>
      <span class="s1">} </span><span class="s2">else </span><span class="s1">{</span>
        <span class="s2">throw new </span><span class="s1">Error(</span><span class="s3">'Invalid arguments for Select2: ' </span><span class="s1">+ options)</span><span class="s2">;</span>
      <span class="s1">}</span>
    <span class="s1">}</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">if </span><span class="s1">($.fn.select2.defaults == </span><span class="s2">null</span><span class="s1">) {</span>
    <span class="s1">$.fn.select2.defaults = Defaults</span><span class="s2">;</span>
  <span class="s1">}</span>

  <span class="s2">return </span><span class="s1">Select2</span><span class="s2">;</span>
<span class="s1">})</span><span class="s2">;</span>

  <span class="s0">// Return the AMD loader configuration so it can be used outside of this file</span>
  <span class="s2">return </span><span class="s1">{</span>
    <span class="s1">define: S2.define</span><span class="s2">,</span>
    <span class="s1">require: S2.require</span>
  <span class="s1">}</span><span class="s2">;</span>
<span class="s1">}())</span><span class="s2">;</span>

  <span class="s0">// Autoload the jQuery bindings</span>
  <span class="s0">// We know that all of the modules exist above this, so we're safe</span>
  <span class="s2">var </span><span class="s1">select2 = S2.require(</span><span class="s3">'jquery.select2'</span><span class="s1">)</span><span class="s2">;</span>

  <span class="s0">// Hold the AMD module references on the jQuery function that was just loaded</span>
  <span class="s0">// This allows Select2 to use the internal loader outside of this file, such</span>
  <span class="s0">// as in the language files.</span>
  <span class="s1">jQuery.fn.select2.amd = S2</span><span class="s2">;</span>

  <span class="s0">// Return the Select2 instance for anyone who is importing it.</span>
  <span class="s2">return </span><span class="s1">select2</span><span class="s2">;</span>
<span class="s1">}))</span><span class="s2">;</span>
</pre>
</body>
</html>